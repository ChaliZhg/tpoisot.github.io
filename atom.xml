<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Tim Poisot :: Updates</title>
  <link href="http://timotheepoisot.fr/atom.xml" rel="self"/>
  <link href="http://timotheepoisot.fr/"/>
  <updated>2013-12-02T16:28:49-05:00</updated>
  <id>Tim Poisot</id>
  <author>
    <name>Tim Poisot</name>
    <email></email>
  </author>
  
  <entry>
     <title>Why JSON is my go-to data format</title>
     <link href="http://timotheepoisot.fr/2013/12/02/json-goto-format/"/>
    <updated>2013-12-02T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Since this summer, I work with models that generate massive amounts
of output. This weekend batch of simulations resulted in 20+ Gig of raw
data. This particular model outputs very variable data. The number of
lines/columns (were I working in a tabular format) would be unpredictable,
vary across simulations, and generally be a little bit too massive to work
with (simply) in &lt;code&gt;R&lt;/code&gt;. But I&#39;ve been using &lt;code&gt;JSON&lt;/code&gt; for a while now, and it
makes working with these types of data (not the &quot;several Gig&quot; types, the
&quot;highly heterogeneous&quot; type) easy.&lt;/p&gt;

&lt;p&gt;I love &lt;code&gt;JSON&lt;/code&gt; because it can be validated. Running a command like &lt;code&gt;jsonlint
file.json&lt;/code&gt; will either return me the pretty-printed version of the file,
or an error telling me where the file is not conforming to the &lt;code&gt;JSON&lt;/code&gt;
specification. Or in other words, when I read something in memory, I&#39;m
confident it is indeed a correctly formated file.&lt;/p&gt;

&lt;p&gt;But wait, there&#39;s more! In &lt;code&gt;JSON&lt;/code&gt;, you can define &lt;em&gt;schemes&lt;/em&gt;, or a &lt;code&gt;JSON&lt;/code&gt;
file telling you (or a validator) what other &lt;code&gt;JSON&lt;/code&gt; files should look
like. Which means that it&#39;s possible to check that a particular file is
correctly formatted &lt;em&gt;with regard to a previously described data format&lt;/em&gt;. I
use the &lt;code&gt;jsonschema&lt;/code&gt; python module to do that:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;jsonschema&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;validate&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Read the JSON scheme file&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;scheme.json&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;sc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Read the JSON output file&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;output.json&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Validate&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Not valid&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Valid&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And because a&lt;code&gt;JSON&lt;/code&gt; scheme has &lt;a href=&quot;http://json-schema.org/&quot;&gt;field for description of each element&lt;/a&gt;,
your output is essentially self-described. Someone with no prior knowledge
of how you organized your data can take your results, check that they conform
to the specification, and see what each element of the output file represents.&lt;/p&gt;

&lt;p&gt;Although I haven&#39;t bothered to write a scheme (yet), you can see how &lt;code&gt;JSON&lt;/code&gt;
can contain a lot of heterogeneous informations in an easy to read format
&lt;a href=&quot;https://github.com/tpoisot/manna&quot;&gt;on the &lt;code&gt;manna&lt;/code&gt; index page&lt;/a&gt;: the output files give informations about
the species, and for each time steps, the number of individuals, and each
individual interaction.&lt;/p&gt;

&lt;p&gt;While it&#39;s true this information is not extremely complicated, it&#39;s still
simpler to have it in this form, rather than as a text file. But &lt;code&gt;JSON&lt;/code&gt;
truly shines when &lt;em&gt;reading&lt;/em&gt; the data. In the above example, if the &lt;code&gt;op&lt;/code&gt;
object contains a list of species, each having a body size called &lt;code&gt;bs&lt;/code&gt;,
then we can get the mean body size with&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;m_bs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;bs&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;R&lt;/code&gt; can also read &lt;code&gt;JSON&lt;/code&gt; well with the &lt;code&gt;rjson&lt;/code&gt; package. This returns a &lt;code&gt;list&lt;/code&gt;
representation of the &lt;code&gt;JSON&lt;/code&gt; file, so it&#39;s easy to manipulate &lt;code&gt;JSON&lt;/code&gt; objects
with &lt;code&gt;l*ply&lt;/code&gt; functions in &lt;code&gt;plyr&lt;/code&gt;. So now, most of my models work in the same
way. I write one &lt;code&gt;JSON&lt;/code&gt; file for each simulation (or variations thereof)
into an &lt;code&gt;output&lt;/code&gt; folder. Then I read through each file with &lt;code&gt;python&lt;/code&gt; and/or
&lt;code&gt;R&lt;/code&gt;, and I have a great time doing it!&lt;/p&gt;

&lt;p&gt;The main drawback of &lt;code&gt;JSON&lt;/code&gt; (&lt;a href=&quot;http://www.alcides-mp.com/?p=1&quot;&gt;as pointed out here&lt;/a&gt; are that it must be
read in memory entirely before it&#39;s used (and it gets parsed at this time
too). Or in other words, it can be slow. But it&#39;s a good thing! I found out
that it forces me to (i) aim for the most concise representation possible,
and (ii) split the output in chunks when needed. These chunks can be read
in parallel later, and re-assembled, so I don&#39;t try to load files of a few
hundreds Mb at times.&lt;/p&gt;

&lt;p&gt;So now, go try &lt;code&gt;JSON&lt;/code&gt; for yourself. In the &lt;code&gt;manna&lt;/code&gt; program linked above, there
are examples with (admittedly badly written) &lt;code&gt;R&lt;/code&gt; files to read and manipulate
&lt;code&gt;JSON&lt;/code&gt; outputs. And keep in mind that when you&#39;ll be coming back to your
output files in six months, you&#39;ll be glad to have a verbose format and a
scheme describing it to understand what is going on...!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The pros and cons of using R packages for teaching</title>
     <link href="http://timotheepoisot.fr/2013/11/27/r-packages-teaching/"/>
    <updated>2013-11-27T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;R packages are one of the best tools we have. It&#39;s a library of 1000s
of functions ready to be used, all wrapped in a single common language,
and it&#39;s free. I wrote some, and used even more. When I review a paper,
upon seeing &quot;we used function &lt;code&gt;x&lt;/code&gt; in the version 2.3 of package &lt;code&gt;y&lt;/code&gt;&quot;,
I know a lot about what the authors have been doing (and I can check the
help of this function for references and additional details). And obviously,
training students about which packages are widely used in a particular field
is an important task, because it will ensure that they will speak the same
language as other scientists in the field.&lt;/p&gt;

&lt;p&gt;Because packages (often) represent the &lt;em&gt;state of the art&lt;/em&gt; in a particular
field, or because they offer a unified interface to a lot of different methods
(&lt;code&gt;simecol&lt;/code&gt; is a good example of that), it&#39;s important that students know how
to use them (and most importantly, which packages to use). To some extent,
packages are just another tool, like PCR or statistics. Knowing how to use
them (properly) saves time, and opens new possibilities for analyses. And
let&#39;s just be realistic, everyone uses packages. All the time. So yes, of
course, the students should be familiar with the most important in their field.&lt;/p&gt;

&lt;p&gt;An important point is that we also start to see the development of &lt;em&gt;package
ecosystems&lt;/em&gt;. The &lt;a href=&quot;http://ropensci.org/packages/index.html&quot;&gt;&lt;em&gt;rOpenSci&lt;/em&gt;&lt;/a&gt; project is an example of that. They propose a
lot of different packages whose common purpose is to interact with databases
and API for science, but the real power is offered by the ability to integrate
several of these packages &lt;a href=&quot;http://ropensci.org/usecases/index.html&quot;&gt;in a single analysis&lt;/a&gt;. Want to get the list of
species in a country, and check which are invasive, then plot that onto
their phylogenetic tree? It can be done. Another well known example is the
&lt;code&gt;plyr&lt;/code&gt;/&lt;code&gt;reshape2&lt;/code&gt;/&lt;code&gt;ggplot2&lt;/code&gt; combo, which is (seriously) the only reason I
still have to start &lt;code&gt;R&lt;/code&gt; at least once a day.&lt;/p&gt;

&lt;p&gt;So on one hand, packages are really good, because they save time and
allow to do an analysis which (hopefully) conforms with the current set of
&quot;best practices&quot; in the field. On the other hand, when you start working
&lt;em&gt;only&lt;/em&gt; with what the packages have to offer, you can severely limit your
creativity. There are questions that will require new code to be written,
and you&#39;ll most likely hit obstacles along the ways. That, too, should be
something the students encounter during their training.&lt;/p&gt;

&lt;p&gt;And this is when the limits of &lt;code&gt;R&lt;/code&gt; start to show. As John Cook said (&lt;a href=&quot;http://readwrite.com/2013/11/25/python-displacing-r-as-the-programming-language-for-data-science&quot;&gt;source&lt;/a&gt;),
&quot;I find it more helpful to think of R as having a programming language than
being a programming language&quot;. I would never have put that so eloquently,
and it is entirely ture. Over the last two months, I gave a graduate training
class on &lt;em&gt;Algorithms and programming for environmental sciences&lt;/em&gt;, in which
I tried to discuss how to make &quot;good&quot; (robust, user-friendly, stupid-proof)
programs. Regardless of what the students learned, I definitely realized
that &lt;code&gt;R&lt;/code&gt; is a &lt;em&gt;huge mess&lt;/em&gt; when you try to work outside of packages, or
do something else than statistics. Interestingly, even Hadley Whickam&#39;s
forthcoming &lt;a href=&quot;http://adv-r.had.co.nz/&quot;&gt;&lt;em&gt;Advanced R development&lt;/em&gt;&lt;/a&gt; starts by saying that it will
show how &lt;em&gt;what seems horrible is merely &quot;not that bad&quot;&lt;/em&gt; (go read the book,
by the way, it&#39;s great). And so understanding &lt;em&gt;what&lt;/em&gt; to do often comes second
to understanding &lt;em&gt;how to do it&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The (many, many) quirks of &lt;code&gt;R&lt;/code&gt; nonwithstanding, working with a package
and doing something new are two different approaches. The former involves
looking at the examples, and reading the documentatin to see what each
function does. The later requires a working knowledge of the language, and
some notions of algorithmic. Yet, judging from my observations, these two
different exercices are often (and let&#39;s not forget statistics) presented
together, under the general denomination of &lt;code&gt;R&lt;/code&gt;. And when, afterwards, students
complain of &quot;not getting &lt;code&gt;R&lt;/code&gt;&quot;, it&#39;s hard to tell whether what they don&#39;t
get is what exactly a &lt;code&gt;while&lt;/code&gt; loop does (which is not a &lt;code&gt;R&lt;/code&gt;-specific issue),
or why a &lt;code&gt;data.frame&lt;/code&gt; is also a &lt;code&gt;list&lt;/code&gt; and a &lt;code&gt;matrix&lt;/code&gt; (which is a reasonable
question, and quite specific to &lt;code&gt;R&lt;/code&gt;); you may know how to do statistics with
&lt;code&gt;R&lt;/code&gt;, or use &lt;code&gt;vegan&lt;/code&gt; or &lt;code&gt;picante&lt;/code&gt;, but not know &lt;code&gt;R&lt;/code&gt; (or the other way around).&lt;/p&gt;

&lt;p&gt;The point I&#39;m slowly getting at is that you&#39;ll most likely end up in a
situation which is not covered by &lt;em&gt;any&lt;/em&gt; package available. Or, as a student,
you&#39;ll have to modify a code for a group project, which means re-writing
some functions, or changing the data structure. Part of the training should
prepare students to do this kind of things. Rather than using a pre-made
function to calculate a Shannon&#39;s index, or even find the maximal value in
an array, let&#39;s walk students through the writing of this function.&lt;/p&gt;

&lt;p&gt;So, to conclude, while it&#39;s clear that I have a love/hate relationship
with &lt;code&gt;R&lt;/code&gt;, I think it&#39;s still an invaluable tool for teaching, especially in
undergraduate courses. &lt;code&gt;python&lt;/code&gt; might be as easy and more coherent, but less
people use it (for now...), and &lt;code&gt;R&lt;/code&gt; is still the &lt;em&gt;lingua franca&lt;/em&gt;. And a part
of the success of &lt;code&gt;R&lt;/code&gt; is the diversity of available packages. But relying
only on packages creates this weird black box situation, in which students
will know what the function does, but not necessarily &lt;em&gt;how&lt;/em&gt; it does it; and
knowing how stuff works is key when you have to create your own stuff. So
&lt;strong&gt;pros&lt;/strong&gt;, packages are awesome because 90% of what you want to do is already
programmed. &lt;strong&gt;Cons&lt;/strong&gt;, the remaining 10% will be extremely hard for you to
get if you don&#39;t get your hands dirty once in a while, and write things
from scratch.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Spatially explicit metapopulation model in R</title>
     <link href="http://timotheepoisot.fr/2013/11/25/metapopulation-model-r/"/>
    <updated>2013-11-25T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;One of my favorite tools to work with networks is &lt;a href=&quot;http://networkx.github.io/&quot;&gt;the &lt;code&gt;networkx&lt;/code&gt; python
package&lt;/a&gt; (if only because lists comprehensions make so much sense when you
work with graphs). But for teaching purposes (especially in ecology), having
purely &lt;code&gt;R&lt;/code&gt;-based tools is better. The students know the language (at least
enough to get around most problems in a few hours, and so they can focus on
the theory rather than the tedious details of implementation. So I started
looking for good graph analysis tools in R.&lt;/p&gt;

&lt;p&gt;I&#39;ve read good thing (well, &lt;a href=&quot;http://assemblingnetwork.wordpress.com/tutorials/network-basics/&quot;&gt;good-looking code&lt;/a&gt;, actually) about the
&lt;code&gt;igraph&lt;/code&gt; package, so I decided to try it (good surprise: there are both &lt;code&gt;R&lt;/code&gt;,
&lt;code&gt;python&lt;/code&gt; and &lt;code&gt;C&lt;/code&gt; implementations. My first two projects when I&#39;m doing graph
things are (i) how fast can I implement Williams &amp;amp; Martinez &lt;em&gt;niche model&lt;/em&gt;, and
(ii) how fast can I implement a spatially explicit metapopulation model. I have
folders in my computers with various versions of both in various languages.&lt;/p&gt;

&lt;p&gt;So I decided to work on the later project. The idea is to use &lt;code&gt;igraph&lt;/code&gt; to
generate a random geometric graph, and use that as the landscape over which the
metapopulation is simulated. The code is &lt;a href=&quot;https://gist.github.com/tpoisot/7547954&quot;&gt;available as a gist&lt;/a&gt;. Coming
from &lt;code&gt;networkx&lt;/code&gt;, it took some time getting used to the different approach. But
overall, &lt;code&gt;igraph&lt;/code&gt; convinced me, and I&#39;ll most definitely use it when teaching
about networks in the future.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/rmetapop.png&quot; alt=&quot;Fig1&quot; /&gt;
As a side note, the code allows to generate 3D spatial graphs. It&#39;s entirely
useless, but it&#39;s kinda cool!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Collaborating with markdown and bibtex</title>
     <link href="http://timotheepoisot.fr/2013/11/10/shared-bibtex-file-markdown/"/>
    <updated>2013-11-10T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;The single most annoying issue when using &lt;code&gt;pandoc&lt;/code&gt; to work collaboratively on
papers is that it might be difficult for other people to compile the paper if
they do not use your bibtex file. And if there is ony thing I avoid like the
plague, it&#39;s having several bibtex files all over the place. And I&#39;m can&#39;t
be bothered to keep &quot;Collections&quot; or separate folders in Zotero. So clearly,
I had to code my way out of this one.&lt;/p&gt;

&lt;p&gt;The good thing of using &lt;code&gt;pandoc&lt;/code&gt; is that the citation syntax is remarkably
simple: &lt;code&gt;@key&lt;/code&gt;. It means that using a simple &lt;code&gt;grep&lt;/code&gt; command&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;grep @&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-:_a-zA-Z0-9&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;* ms.md -oh --color&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;never | sort  | uniq -u | sed &lt;span class=&quot;s1&quot;&gt;&amp;#39;s/@//g&amp;#39;&lt;/span&gt; &amp;gt; bib.keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;, I can generate &lt;code&gt;bib.keys&lt;/code&gt;, a list with all the keys encountered in
&lt;code&gt;ms.md&lt;/code&gt;. The keys will be present only once, and sorted. The first few lines
of one such file are&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;allesina_competitive_2011
angilletta_temperature_2004
araujo_using_2011
baiser_geographic_2012
baskerville_spatial_2011
bluthgen_what_2008
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, I need to take each of these keys, read my big &lt;code&gt;library.bib&lt;/code&gt; file, and
extract only the entries that are cited in the document. So I installed a
&lt;a href=&quot;https://github.com/sciunto/python-bibtexparser&quot;&gt;bibtex parser for python&lt;/a&gt;, and started doing exactly that. The amazing
thing is, this only takes four (interesting) lines:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;## Step 1 - read the key list&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rstrip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kl&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## Step 2 - read the library file&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;refs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BibTexParser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bib_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_entry_dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## Step 3 - extract the used entries&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;used_refs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;refs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iteritems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## Step 4 - convert the dicts back into bibtex&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;refs_as_bib&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dict2bib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;used_refs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iteritems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uk&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uk&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uk&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;used_refs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## Step 5 - write the output file&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codecs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;utf-8-sig&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writelines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;refs_as_bib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This code will print a list of all the keys in the &lt;code&gt;bib.keys&lt;/code&gt; that have
&lt;em&gt;not&lt;/em&gt; been matched to an entry in the main library file. If all went well,
this list should be empty. I&#39;ve uploaded the whole file as a &lt;a href=&quot;https://gist.github.com/tpoisot/7406955&quot;&gt;gist&lt;/a&gt;, if you
intend to use it.&lt;/p&gt;

&lt;p&gt;And of course, you can nicely wrap things up in a &lt;code&gt;makefile&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;makefile&quot;&gt;&lt;span class=&quot;nv&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; python2
&lt;span class=&quot;nv&quot;&gt;refs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; refs.bib
&lt;span class=&quot;nv&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ms.md
&lt;span class=&quot;nv&quot;&gt;library&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; /path/to/main/bibtex/file.bib

&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;refs&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;: bib.keys
   &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;python&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt; extractbib.py bib.keys &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;library&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;refs&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;

bib.keys: 
   grep @&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;-:_a-zA-Z0-9&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;* &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;text&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt; -oh --color&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;never | sort  | uniq -u | sed &lt;span class=&quot;s1&quot;&gt;&amp;#39;s/@//g&amp;#39;&lt;/span&gt; &amp;gt; bib.keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I&#39;m glad that I finally have a solution to this problem. Of course, a
multi-author version is not difficult to do (just have each author write
its own bibtex file, and put them all together before running &lt;code&gt;pandoc&lt;/code&gt;). It
also means that my &lt;code&gt;pandoc&lt;/code&gt;-using papers are going to finally be entirely
reproducible, as I&#39;ll distribute the references list in the &lt;em&gt;github&lt;/em&gt;
repository.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Notes on test-driven development (in Python)</title>
     <link href="http://timotheepoisot.fr/2013/11/04/test-driven-python/"/>
    <updated>2013-11-04T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m looking into the methodology of &lt;em&gt;test-driven development&lt;/em&gt;, that is when
you write your tests &lt;em&gt;before&lt;/em&gt; writing your code. The advertised benefit is
that you know in advance the behavior of your code, and it will make it easier
to implement and debug. This &lt;a href=&quot;http://www.onlamp.com/pub/a/python/2004/12/02/tdd_pyunit.html&quot;&gt;paper at O&#39;Reilly&lt;/a&gt; is a good introduction
(although the exact functions of &lt;code&gt;unittest&lt;/code&gt; it uses are now deprecated). To
get started, I&#39;ll work on a simple script that takes a series of numerical
values, and divide them by their max, to get the equivalent series of values
but in [0;1]. Let&#39;s start with the basics:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# for testing&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# for other things&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first function I&#39;d like to write will be called &lt;code&gt;scale&lt;/code&gt;, and it will take a
(&lt;code&gt;numpy&lt;/code&gt;) array of numerical values, and return the same array divided by its
maximal value. So my first &lt;em&gt;unit test&lt;/em&gt; will test that the function performs
as needed:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;scaleTest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TextCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testOnKnownResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;KnownInput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Scaled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KnownInput&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scaled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scaled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are a number of stupid-proofing steps required. First, the function
cannot work when all values in the array are 0, or if there are negative
values, so I&#39;ll write a test for that. I want the function &lt;code&gt;scale&lt;/code&gt; to raise a
&lt;code&gt;ValueError&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testNegative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;WithNeg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
   &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertRaises&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ne&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WithNeg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testNull&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;OnlyNull&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
   &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertRaises&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ne&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OnlyNull&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now I have one test to check that the expected behavior is indeed obtained,
and two tests to check that the input values are correct. Things are starting
to look good! The one final thing that I want to enforce is the type of
inputs. Specifically, I want &lt;code&gt;numpy&lt;/code&gt; arrays of numeric types. If this is
not the case, the &lt;code&gt;scale&lt;/code&gt; function will raise a &lt;code&gt;TypeError&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;WithChar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;0.0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
   &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assertRaises&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ne&quot;&gt;TypeError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WithCar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this point, even though I haven&#39;t yet wrote a single line of the &lt;code&gt;scale&lt;/code&gt;
function, I know quite well how it should work! Importantly, I know the
type of data that will come in this function. This is something I like when
writing code: I need to understand which data go where, and how they are
formatted and transformed along the way. I try to make students think about
this when giving courses. What kind of data go in? What kind of data come
out? This approach forces to determine when and how the function will break,
and it&#39;s great to have a very clear idea of the data types.&lt;/p&gt;

&lt;p&gt;Now is the time to program the actual function. It will take one argument,
and return another array (the original one is not modified). Let&#39;s write
the simplest possible form of this function:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In most situations, I would have been happy writing the function this way. Let&#39;s integrate it with the test suite, and see how it goes:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;#! /usr/bin/python2&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;unittest&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;## scaleTest goes here&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;## scale goes here&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;unittest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here is the output of running this file:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;======================================================================
FAIL: testNegative (__main__.scaleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
File &amp;quot;lv.py&amp;quot;, line 21, in testNegative
self.assertRaises(ValueError, scale, WithNeg)
AssertionError: ValueError not raised
======================================================================
FAIL: testNull (__main__.scaleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
File &amp;quot;lv.py&amp;quot;, line 18, in testNull
self.assertRaises(ValueError, scale, WithNeg)
AssertionError: ValueError not raised
----------------------------------------------------------------------
Ran 4 tests in 0.001s
FAILED (failures=2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are &lt;em&gt;only&lt;/em&gt; two failed tests. This is because &lt;code&gt;testOnKnownResult&lt;/code&gt; is
expected to succeed, and &lt;code&gt;testType&lt;/code&gt; will catch the &lt;code&gt;TypeError&lt;/code&gt; raised by
&lt;code&gt;np.max&lt;/code&gt; if there are arguments of the bad type. So now I just need to test
that the argument are not negative, or not only zeroes:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# We test that values are positive&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;ne&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Values of p cannot be smaller than 0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# We test that values are not all null&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;ne&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Values of p cannot be all equal to 0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# Finally we return the result&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With these two checks, we can now re-run the tests:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;....
----------------------------------------------------------------------
Ran 4 tests in 0.001s
OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mission accomplished! It requires some discipline to work this way, but I
actually enjoyed going through this example. I really like the fact that
this approach forces to ask question about the structure of the code first,
and write the actual code later.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Why should Ecology be open?</title>
     <link href="http://timotheepoisot.fr/2013/11/03/open-ecology/"/>
    <updated>2013-11-03T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;There are a lot of extremely good arguments to defend the fact that &lt;a href=&quot;http://www.technology.org/2013/10/04/science-even-open/&quot;&gt;&lt;em&gt;Science&lt;/em&gt;
(as a whole) should be more open&lt;/a&gt;. To summarize them very roughly: it&#39;s the
ethical thing to do as it allows everyone to access information, it&#39;s easier
for scientists to access information, it&#39;s faster than the traditional
peer-review system when you need to get your work noticed, and it&#39;s &lt;em&gt;much less
expensive&lt;/em&gt; than closed-source science. I could also elaborate on transparency,
accountability, and the refusal to put a wall around knowledge for a while
as well. In short, I&#39;m yet to find an argument that would convince me that
open science is a bad thing.&lt;/p&gt;

&lt;p&gt;What we call &lt;em&gt;open science&lt;/em&gt; obviously varies from people to people, but the
common thread is that it is a &lt;em&gt;set of practices aiming a lowering the
technological, financial, and legal barrier to the accessibility of scientific
materials, methods, processes, and outputs&lt;/em&gt;. This includes a diversity of
practices such as open manuscript writing, the use of preprints, data sharing,
in addition to open access publishing and the use of free/open source
software. Most of these practices can be applied to nearly all fields
of science, as proven by the &lt;a href=&quot;http://openwetware.org/wiki/Main_Page&quot;&gt;&lt;em&gt;OpenWetWare&lt;/em&gt; wiki&lt;/a&gt;, that caters
specifically to experimental biology and biochemistry.&lt;/p&gt;

&lt;p&gt;An interesting question that keeps popping up whenever I discuss &lt;em&gt;Open
ecology&lt;/em&gt;, or &lt;em&gt;Open biodiversity&lt;/em&gt;, is &quot;Why should it be different in ecology?&quot;.
Or expressed in another way, why should ecology pose particular challenges as
far as open science is concerned? It is a very valid question, and in
preparation for the &lt;em&gt;Open biodiversity&lt;/em&gt; panel that will take place at the QCBS
meeting in a month and a half, I thought it was time to bring some elements to
answer it.&lt;/p&gt;

&lt;p&gt;Let&#39;s start by recognizing that there are (broadly) two types of ecologists.
The &quot;empirical&quot; ecologists (including the microcosm people) rely on empirical
observations, and extensive field surveys, to address their questions. The
&quot;theoretical&quot; ecologists, on the other hand, integrate different data sources,
or build models, to understand &quot;general&quot; questions. There are obviously
people working all along this continuum (I don&#39;t consider myself a &quot;pure&quot;
theoretician, for example), and empiricists contributing some of the
most important ecological &lt;em&gt;theories&lt;/em&gt;, but we can all agree that leaning
towards one end of the continuum implies having a different set of
practices. And to make things worse, the communication between the two
groups is not as good as it should. While it&#39;s easy (I would like to say
&lt;em&gt;natural&lt;/em&gt;) for theoreticians to have an entirely open workflow (put
your code on &lt;em&gt;GitHub&lt;/em&gt;, use it to write your manuscripts, push your
data on &lt;em&gt;figshare&lt;/em&gt; using the API, and &lt;em&gt;voilà!&lt;/em&gt;), it&#39;s slightly more
complicated for empiricists. While it&#39;s true that anyone can make data
public, you can&#39;t reasonably release your field site under a &lt;em&gt;Creative
Commons&lt;/em&gt; licence (because it doesn&#39;t make any sense...).&lt;/p&gt;

&lt;p&gt;There are two points at which both worlds meet, however: data and algorithms.
Even for the most local and system-centered question, there is a large quantity
of required data. And because data are essentially multivariate, sometimes
incomplete, collected with unbalanced designs, and generally subject to the
contingencies of the &lt;a href=&quot;http://dna-protein.blogspot.com/2012/03/harvard-law-of-biology.html&quot;&gt;Harvard Law of Biology&lt;/a&gt;, these is often a need for
elegant (read: complicated) numerical methods to make sense of them (but this
is easy to solve, code should always be made open source, in
non-proprietary languages). This is probably the unique challenge of
&lt;em&gt;open ecology&lt;/em&gt;: we produce a lot of data, we need a lot of data, but there are
so many peculiarities attached to datasets that sharing them is by nature
a difficult task. Molecular biologists do not have this problem. The &lt;code&gt;fasta&lt;/code&gt;
format is simple because the biological reality of what it represents
(sequences) is simple too (or at least, it is easy to represent the building
blocks). And so it seems almost natural than sequences databases are so
prominent: there is no obstacle to data sharing because anyone can use
a &lt;code&gt;fasta&lt;/code&gt; file after two minutes of explanation of the format. I cannot remember
a single case when I managed to become entirely comfortable with the structure
of an Excel file in less than an afternoon.&lt;/p&gt;

&lt;p&gt;Open ecology will probably be much like all other forms of open science, but
the data heterogeneity challenge is especially problematic. There are certain
ways to solve it, though.&lt;/p&gt;

&lt;p&gt;First, we need &lt;strong&gt;strict data specifications&lt;/strong&gt;. If several groups work on the
same questions in similar systems, it would make sense that the data are
formatted in a common way. A good opportunity to draft these specifications is
large working groups, in which people sharing a common interest would think
about the &quot;core&quot; and &quot;satellite&quot; properties of a dataset. This will also
speed-up the development of data repositories with APIs. My personal favorite
for the development of data specifications is &lt;code&gt;JSON&lt;/code&gt; schemes, but really any
kind will do. Data are highly structured information, and it makes sense that
they are used and shared in a highly structured way. It is quite obvious that
there will not a be a single &lt;em&gt;ecological ontology&lt;/em&gt;, but if we managed to get it
right for a few dozens of high quality ones, it will be a strong enhancement
over the current data format of &quot;However I felt that day&quot; (I&#39;m guilty of this
one, of course).&lt;/p&gt;

&lt;p&gt;Second, we need &lt;strong&gt;stricter data review&lt;/strong&gt;. Once the data specification has been
published, it is important that its use is enforced by referees and editors, so
as to make sure that data will be re-usable. This is different from evaluating
the quality of data (data quality is only measurable in the light of the
specific question they are used for). What I have in mind is more along
the lines of a checklist with a few points: is the data conforming to the
specification (this step can be automated with a &lt;code&gt;jsonlint&lt;/code&gt;-like tool), is the
data easy to access, and are enough data released to make the dataset re-usable?&lt;/p&gt;

&lt;p&gt;Third, and finally, we need to &lt;strong&gt;un-install Excel and similar software&lt;/strong&gt;. What
we need instead, is a &lt;code&gt;pandoc&lt;/code&gt; for data. &lt;code&gt;pandoc&lt;/code&gt; is a tool to convert text
formats into other text formats. It&#39;s awesome. And with strict data
specifications, we should be able to write one for ecology. This will allow use
to store data in their correct format (&lt;em&gt;i.e.&lt;/em&gt;, conforming to the data
specification), but use them in another format when we need them in
another format.&lt;/p&gt;

&lt;p&gt;All of this will require a fair amount of community coordination, and changes
in the training and teaching of ecologists, but it&#39;s all for the greater good.
Some outstanding ecological problems will only be solved when a critical mass
of data is reached, and it would be extremely disappointing to realize that
these data were existing, but not available due to poor practices. So in short,
this is the challenge specific to open ecology: &lt;strong&gt;making sense of highly
heterogeneous and local data, and mobilizing them to address global and
general questions&lt;/strong&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The (French) paradox of Closed Open Access</title>
     <link href="http://timotheepoisot.fr/2013/11/02/my-science-work/"/>
    <updated>2013-11-02T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;The OpenAccessWeek in France generated a &lt;em&gt;huge&lt;/em&gt; backlash, mostly owing to the
identity of the organizer. This edition was organized by the for profit
&quot;scientific social network&quot; &lt;em&gt;MyScienceWork&lt;/em&gt; (I&#39;m not going to link them). &lt;em&gt;My
Science Work&lt;/em&gt; (&lt;em&gt;MSW&lt;/em&gt; henceforth) is a social network in which people can...
well, you know what a social network is. This one is yet another social network
for scientists, much like Academia.edu and ResearchGate. I don&#39;t care all that
much about these tools.&lt;/p&gt;

&lt;p&gt;Let&#39;s summarize the situation. The French OpenAccesWeek was organized by &lt;em&gt;My
Science Work&lt;/em&gt;, and got backed up by several public organisms involved in
research: some labs, some universities, other related institutions. During this
operation, the credibility of &lt;em&gt;MSW&lt;/em&gt; got a huge boost in the French OA
community, in large part because of the fact that high-profile institutions
lent their credibility to the OpenAccessWeek.&lt;/p&gt;

&lt;p&gt;During the OpenAccessWeek itself, the critics started to emerge. &lt;a href=&quot;http://translate.google.com/translate?hl=fr&amp;amp;sl=fr&amp;amp;tl=en&amp;amp;u=http%3A%2F%2Fblog.stephanepouyllau.org%2F709&quot;&gt;Stéphane
Pouyllau &lt;/a&gt; started talking about &lt;em&gt;private open access&lt;/em&gt;. Shortly
thereafter, &lt;a href=&quot;http://translate.google.com/translate?hl=fr&amp;amp;sl=fr&amp;amp;tl=en&amp;amp;u=http%3A%2F%2Fpenserclasser.wordpress.com%2F2013%2F11%2F02%2Fopenaccessweek_france%2F&quot;&gt;Elifsu Sabuncu&lt;/a&gt; produced a great synthesis of the most important
reactions on twitter and in blogs (both links are through Google translate,
which gives a fairly broken but acceptable translation). What are these
critics about?&lt;/p&gt;

&lt;p&gt;Well, for a &quot;Frontrunner in Open Access&quot;, &lt;em&gt;MSW&lt;/em&gt; is surprisingly closed. Their
website lists over 28 millions academic papers in Open Access. I tried to
access some of mine, and when I clicked on the &quot;Download link&quot;, I got
redirected to a login/signup page. Does it seems like a &lt;em&gt;huge&lt;/em&gt; problem to you?
Because it is. When you put papers behind a wall, you are not advancing Open
Access. You are using the OA label to advance your business, and you are not
more worthy than a predatory OA publisher. If your goal is to provide a service
to the scientists, let us download the papers without signing-up for yet
another website we&#39;ll never visit again.&lt;/p&gt;

&lt;p&gt;And it&#39;s not like the links to the original publications is easy to spot,
either. It&#39;s nowhere to be found on the pages. You have no choice but to
signup for their &quot;service&quot;, if you want to get access to the paper (or,
well, you can realize that this is bullshit and go find the PDF
somewhere else). When some authors took offense with the practice,
the heads of &lt;em&gt;MSW&lt;/em&gt; proposed to remove their articles from the platform.
They were also quite active in insulting some of the most vocal critics on
their blogs, which is not a smart move. So it seems that &lt;em&gt;MSW&lt;/em&gt; has no will
to change their system, and is instead trying to silence the critics (you
cannot silence French people - criticism is an &lt;em&gt;art de vivre&lt;/em&gt; for
us!).&lt;/p&gt;

&lt;p&gt;If it were just yet another social network for scientists, I&#39;m sure no one
would have cared about their &quot;signup-required&quot; policy. But &lt;em&gt;MSW&lt;/em&gt; was, for
a week, the face of French Open Access. The closed, greedy, critics-insulting
face of French Open Access. So here is your explanation of the huge backslash.
People advocating &lt;em&gt;open&lt;/em&gt; access took it badly when a business tried to trick
people into thinking they were advancing OA, but was instead freeloading on OA
initiatives to make money. This is extremely worrisome. Predatory publishing is
bad press enough for OA, we really don&#39;t need new forms of predation.&lt;/p&gt;

&lt;p&gt;And the next step, after the name calling and the finger pointing will have
ended, is to have a good productive debate about &lt;em&gt;open&lt;/em&gt; access. Access is not
&lt;em&gt;open&lt;/em&gt; if you have to pay for it. And the fact that the price you pay for
a paper at &lt;em&gt;MSW&lt;/em&gt; is not monetary makes no matter: you pay with your
information, with your facebook profile, with your email address. When every
piece of information about you can be turned into a profit, &lt;strong&gt;every wall is
a paywall&lt;/strong&gt;. Parasitic behaviors, in which some use the OA label to get
credibility, but exploit OA to increase their userbase and their profit, must
be denounced &lt;em&gt;en masse&lt;/em&gt; by the community. And just for this reason, even so I&#39;m
disappointed that the Open Access Week was organized by &lt;em&gt;MSW&lt;/em&gt;, I&#39;m glad to see
that there is such a massive discussion about the ethics of putting OA papers
behind (pay)walls.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Mapping ecological concepts using twitter</title>
     <link href="http://timotheepoisot.fr/2013/10/18/mapping-ecological-concepts/"/>
    <updated>2013-10-18T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;ve been setting up a Twitter account for the &lt;a href=&quot;http://twitter.com/sfecologie/&quot;&gt;French Ecological
Society&lt;/a&gt;, and while we currently use it as a tool to relay the various
informations we want to share, it&#39;s also a great way to engage with people. So
the question that immediately came to mind is: what kind of topics are
associated with ecology on twitter? My own twitter list is a poor indicator of
the &quot;general public&quot; as far as ecology is concerned, so I had to look for
another solution.&lt;/p&gt;

&lt;p&gt;Twitter offers a series of &lt;em&gt;Streaming API&lt;/em&gt;, which allows to &quot;listen&quot; to the
conversation, by tracking some keywords, or users, or geographic location. So
I downloaded the excellent &lt;a href=&quot;https://github.com/geduldig/TwitterAPI&quot;&gt;&lt;code&gt;TwitterAPI&lt;/code&gt; &lt;/a&gt; module for &lt;code&gt;python&lt;/code&gt;, and
tracked a series of keywords. After some trial and error, I settled on
&lt;code&gt;biodiversity&lt;/code&gt;, &lt;code&gt;biological diversity&lt;/code&gt;, &lt;code&gt;ecology&lt;/code&gt;, &lt;code&gt;species richness&lt;/code&gt;,
&lt;code&gt;ecosystem services&lt;/code&gt;, &lt;code&gt;ecosystem functioning&lt;/code&gt;, and &lt;code&gt;ecological&lt;/code&gt;. I left out
&lt;code&gt;conservation&lt;/code&gt; and &lt;code&gt;ecosystem&lt;/code&gt;, because they had a really high rate of false
positives (in engineering and software, respectively).&lt;/p&gt;

&lt;p&gt;The streaming API, in a nutshell, will return a new line everytime a tweet that
matches the search parameters is posted. Not all tweets are sampled, but it&#39;s
approximately a random sampling, so more than good enough for a side-project.
I left the script running for a few hours at a time, which gave me a database
of over 1000 tweets, about 600 of which were retained. I&#39;ve removed all tweets
using a alphabet that is not latin, and there were quite a bit of these.&lt;/p&gt;

&lt;p&gt;Once this was done, I just read each line in &lt;code&gt;python&lt;/code&gt; (the Twitter API have the
good taste of returning everything as &lt;code&gt;json&lt;/code&gt; strings), selected the text,
and cleaned it. I simple (i) converted everything to lower case, (ii)
removed every non-ascii characters, (iii) removed punctuations, and (iv)
removed the hasthag (&lt;code&gt;#&lt;/code&gt;) symbol. Then I extracted all of the unique words
in each tweet, and let the fun begin!&lt;/p&gt;

&lt;p&gt;One of the things I know how to do is network analysis. So I settled on the
following procedure to find connections between words. All of the unique words
are nodes in a network, and two nodes are connected whenever they appear in the
same tweet. That makes for a &lt;em&gt;lot&lt;/em&gt; of connections, but it&#39;s not a problem
because I will eliminate a lot of them later. At this stage, I have a network
with 2600 nodes, and over 30000 undirected edges. Obviously (i) words appearing
only once in the dataset have little interest, and (ii) words like &lt;code&gt;the&lt;/code&gt; and
&lt;code&gt;in&lt;/code&gt; have a much higher chance of being in the same tweet than &lt;code&gt;amazonia&lt;/code&gt; and
&lt;code&gt;tits&lt;/code&gt; (I checked the original tweet, and it was not about ornithology).&lt;/p&gt;

&lt;p&gt;Before I go into how I accounted for that, some additional cleaning steps: all
usernames (&lt;code&gt;@&lt;/code&gt;), urls (&lt;code&gt;htt&lt;/code&gt;), and twitter-specific idioms (&lt;code&gt;RT&lt;/code&gt;, &lt;code&gt;MT&lt;/code&gt;, &lt;code&gt;ff&lt;/code&gt;)
were excluded. I also deleted all of the small connex components (&lt;em&gt;i.e.&lt;/em&gt;
small groups of words that were not connected with the rest of the
dataset). Then, the most arbitrary part of the work began. I removed
&lt;em&gt;all&lt;/em&gt; the nodes with a betweenness centrality of 0. The betweenness
centrality is the frequency at which a node appears in the shortest paths of
the graph, so I assumed that words that were not part of the shortest
connexions were not really important. Most of the words were excluded using
this proccess, and the network felt to a much more manageable 149 nodes and
2509 edges.&lt;/p&gt;

&lt;p&gt;Part of these were still words like &lt;code&gt;the&lt;/code&gt;, &lt;code&gt;at&lt;/code&gt;, and so forth. I&#39;ll eventually
use TF-IDF to select relevant words from each tweet, but remember, this is
a quick-and-dirty analysis. So I simply looked at mylist of nodes, and removed
every words that were not relevant (this is rather arbitrary too, but in doubt
I decided to be inclusive). The final network had 58 nodes, and 250 edges.&lt;/p&gt;

&lt;p&gt;Here are the top most important ones, based on their eigenvector centrality:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left;&quot;&gt; Word          &lt;/th&gt;
&lt;th style=&quot;text-align:center;&quot;&gt; Centrality &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; ecology       &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 1          &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; biodiversity  &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.94       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; ecological    &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.70       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; human         &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.45       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; environment   &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.43       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; loss          &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.40       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; wetland       &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.36       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; environmental &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.35       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; forest        &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.34       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; wildlife      &lt;/td&gt;
&lt;td style=&quot;text-align:center;&quot;&gt; 0.33       &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;p&gt;If you want to see the other words, you can &lt;a href=&quot;http://dx.doi.org/10.6084/m9.figshare.827286&quot;&gt;get the &lt;code&gt;graphml&lt;/code&gt; file from
&lt;em&gt;figshare&lt;/em&gt;&lt;/a&gt;. So here is the recipe. If you want to engage with the
public, these are the topics of interest. And they paint a quite clear picture:
what is the role of human in biodiversity loss at the global scale? As I assume
that the volume of non-ecologists is orders of magnitude larger than the volume
of ecologists, these keywords are most likely what is discussed.&lt;/p&gt;

&lt;p&gt;Here is finally a visualization of the network. There is a clearly
non-significant modular structure, but I&#39;ve nonetheless colored the nodes to
better illustrate the relationships:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/tw-ecol-concepts.png&quot; title=&quot;the network&quot; alt=&quot;Figure1&quot; /&gt;
Interestingly (the layout method groups nodes that are close to each other),
there seems to be the &quot;sustainability/ecosystem services&quot; topics
on one side (bottom-left), and the &quot;conservation&quot; topics on the
other side (top-right).&lt;/p&gt;

&lt;p&gt;I&#39;ll keep on running this model from time to time, but I think there is a good
opportunity to design informed strategies for communication with the public.
There is not much effort in collecting these data, and we (scientists) can help
by communicating in issues in which their is a broad interest. And I may end up
doing a best-of of the undergrads complaining on Twitter about how &lt;em&gt;Ecology
101&lt;/em&gt; is hard, that is fun too.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>An additive partition of species-level specificity</title>
     <link href="http://timotheepoisot.fr/2013/10/15/specificity-range-measures/"/>
    <updated>2013-10-15T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;A while ago, we published a paper in &lt;em&gt;Methods in Ecology &amp;amp; Evolution&lt;/em&gt;,
&lt;a href=&quot;http://timotheepoisot.fr/2012/01/19/measuring-ecological-specificity/&quot;&gt;comparing different ways to estimate ecological
specificity&lt;/a&gt;
on binary (presence/absence) and quantitative data. All the measures we
review, and the one we introduce, work in the same way: for an organism,
species, population, you have an array &lt;strong&gt;P&lt;/strong&gt; of its performances across &lt;em&gt;R&lt;/em&gt;
different environments, which is (1) sorted decreasingly, and (2) ranged so
that &lt;strong&gt;P&lt;/strong&gt;[1] = 1. In this paper, we recommend to use either &lt;em&gt;RR&lt;/em&gt; (which is
a modification of Schoener&#39;s generality), and &lt;em&gt;PDI&lt;/em&gt; (which is first
formally introduced in this paper), which measures how fast
performance decreases when you move away from the optimal environment
(the faster it decays, the more specialized you are).&lt;/p&gt;

&lt;p&gt;The main advantage of &lt;em&gt;PDI&lt;/em&gt; is that it relates extremely well to the
&lt;em&gt;definition&lt;/em&gt; of what specificity is: a rapid decay of performance on resources
which are not your own optimum (regardless of the &lt;em&gt;absolute&lt;/em&gt; performance on
this optimal resource, which is why we set &lt;strong&gt;P&lt;/strong&gt;[1] = 1). &lt;em&gt;PDI&lt;/em&gt; is
nothing more that the sum of performance lost by not being on the optimal
resource, divided by the number of non-optimal resources. Somewhere in the end
of the paper, we write that when the data are binary, &lt;em&gt;RR&lt;/em&gt; and &lt;em&gt;PDI&lt;/em&gt; are
equivalent. For some reason that still eludes me, the demonstration did not
make its way in the final version of the paper. So let&#39;s start with it. First,
for an organism of which the performances are measured in &lt;em&gt;R&lt;/em&gt;
environments, of which it has a performance higher than 0 in &lt;em&gt;r&lt;/em&gt;, we
define &lt;em&gt;RR&lt;/em&gt; as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt; RR = \frac{R-r}{R-1} &lt;/script&gt;


&lt;p&gt;and &lt;em&gt;PDI&lt;/em&gt; as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt; PDI = \frac{\sum_{i=2}(\mathbf{P}_1-\mathbf{P}_i)}{R-1} &lt;/script&gt;


&lt;p&gt;It&#39;s easy to prove that if all values of &lt;strong&gt;P&lt;/strong&gt; are either 0 or 1, then &lt;em&gt;PDI&lt;/em&gt;
= &lt;em&gt;RR&lt;/em&gt;. In this situation, the species in question has &lt;em&gt;r&lt;/em&gt; times 1 in &lt;strong&gt;P&lt;/strong&gt;,
and &lt;em&gt;R-r&lt;/em&gt; times 0 in &lt;strong&gt;P&lt;/strong&gt;. In other words, for the first &lt;em&gt;r&lt;/em&gt; elements of
&lt;strong&gt;P&lt;/strong&gt;, &lt;strong&gt;P&lt;/strong&gt;[1]-&lt;strong&gt;P&lt;/strong&gt;[i] = 0, and for the remaining (&lt;em&gt;R-r&lt;/em&gt;) elements,
&lt;strong&gt;P&lt;/strong&gt;[1]-&lt;strong&gt;P&lt;/strong&gt;[i] = 1. The numerator of &lt;em&gt;PDI&lt;/em&gt; is thus &lt;em&gt;R-r&lt;/em&gt;, so the
expression of &lt;em&gt;PDI&lt;/em&gt; is the same as the expression of &lt;em&gt;RR&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Previously, we and others discussed the fact that specificity ought to be
separated in its &quot;interactions&quot; and &quot;impacts&quot; components, &lt;em&gt;i.e.&lt;/em&gt; (i) how many
resources do I exploit, and (ii) how are my performances distributed. With &lt;em&gt;RR&lt;/em&gt;
and &lt;em&gt;PDI&lt;/em&gt;, it might seem that we have the adequate tool to measure both sides
of the specificity. There&#39;s more to do with these measures, though. Because
&lt;em&gt;RR&lt;/em&gt; is included in &lt;em&gt;PDI&lt;/em&gt; (it&#39;s easy to show that &lt;em&gt;PDI&lt;/em&gt; &amp;geq; &lt;em&gt;RR&lt;/em&gt;), &lt;em&gt;PDI&lt;/em&gt; also
measures an &quot;association&quot; component of specificity. But then again, the
specificity of impact makes sense if you first consider the specificity of
associations before. So we can start thinking of this problem as an additive
partition of specificity:&lt;/p&gt;

&lt;p&gt;Specificity = associations + impacts&lt;/p&gt;

&lt;p&gt;Luckily, we know that &lt;em&gt;RR&lt;/em&gt; measures the specificity of associations, and the
impacts are accounted for by &lt;em&gt;PDI&lt;/em&gt;, so in measurable terms, the above becomes&lt;/p&gt;

&lt;p&gt;&lt;em&gt;PDI&lt;/em&gt; = &lt;em&gt;RR&lt;/em&gt; + &lt;em&gt;I&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This additive partition makes sense, because if you go back to the
demonstration of &lt;em&gt;PDI = RR&lt;/em&gt;, it&#39;s straightforward that whenever performances
are different across resources, the first &lt;em&gt;r&lt;/em&gt; elements of &lt;strong&gt;P&lt;/strong&gt;[1]-&lt;strong&gt;P&lt;/strong&gt;[i]
will be &lt;em&gt;greater&lt;/em&gt; than 0, so the numerator will be &lt;em&gt;greater&lt;/em&gt; than &lt;em&gt;R-r&lt;/em&gt;, so
&lt;em&gt;PDI&lt;/em&gt; will be superior or equal to &lt;em&gt;RR&lt;/em&gt;. How much greater it will be is the
importance of different performances on specificity. Or in other words, when
you do not have informations to measure specificity of impacts, all of the
specificity is because of associations.&lt;/p&gt;

&lt;p&gt;Now what? Well, we can start measuring how much of the total specificity
(&lt;em&gt;PDI&lt;/em&gt;) is due to specificity of associations only (&lt;em&gt;RR&lt;/em&gt;/&lt;em&gt;PDI&lt;/em&gt;), and how much
                                                          is due to specificity
                                                          of impacts only
                                                          (&lt;em&gt;I&lt;/em&gt;/&lt;em&gt;PDI&lt;/em&gt;). As far
                                                                as I can tell,
                                                                the couple
                                                               &lt;em&gt;PDI&lt;/em&gt;-&lt;em&gt;RR&lt;/em&gt; is
                                                               the only pair of
                                                               measures that
                                                               allow to do that
                                                               (though there
                                                               are other
                                                               approaches) in
                                                               a context where
                                                               you can show
                                                               that one measure
                                                               is a component
                                                               of the other.
                                                               Here is a &lt;code&gt;R&lt;/code&gt;
                                                               function to do
                                                               it using the
                                                               &lt;code&gt;ESM&lt;/code&gt; package
                                                               (&lt;a href=&quot;https://r-forge.r-project.org/R/?group_id=593&quot;&gt;from
                                                               R-Forge&lt;/a&gt;).&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ESM&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

sap &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;P&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   Spe &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; pdi&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;P&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   Ass &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; rr&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;P&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   Imp &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Spe &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; Ass
   &lt;span class=&quot;kr&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      specificity  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Spe&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      associations &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Ass&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      impacts      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Imp&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      assoc_rel    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Ass &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; Spe&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      impac_rel    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Imp &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; Spe
      &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let&#39;s do some simple examples, and contrast to species with the same number of
resources, but a very high performance on resource 2, or a very low performance
on resource 3:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; unlist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sap&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.999&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
  specificity associations      impacts    assoc_rel    impac_rel 
  &lt;span class=&quot;m&quot;&gt;0.500500000&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;0.500000000&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;0.000500000&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;0.999000999&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;0.000999001&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; unlist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;sap&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
  specificity associations      impacts    assoc_rel    impac_rel 
  &lt;span class=&quot;m&quot;&gt;0.9995000&lt;/span&gt;    &lt;span class=&quot;m&quot;&gt;0.5000000&lt;/span&gt;    &lt;span class=&quot;m&quot;&gt;0.4995000&lt;/span&gt;    &lt;span class=&quot;m&quot;&gt;0.5002501&lt;/span&gt;    &lt;span class=&quot;m&quot;&gt;0.4997499&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the second example, because the performance on the second resource is much
almost zero, the &lt;em&gt;RR&lt;/em&gt; and &lt;em&gt;I&lt;/em&gt; components are almost as important to understand
specificity (whereas it&#39;s not the case in the first example, wherein you can
assume that &lt;strong&gt;P&lt;/strong&gt;[2] = 1 without changing the big picture.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>R, priority effects, and the meta-package</title>
     <link href="http://timotheepoisot.fr/2013/10/12/r-priority-responsibility/"/>
    <updated>2013-10-12T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;R packages are a superb opportunity to use new methods, and if anything, we
should only rejoice that there are so many of them in ecology. Yet, there is
a point that occurred to me over recent experiences (reviewing code for a few
papers recently, and reading the help page about &lt;a href=&quot;http://www.inside-r.org/packages/cran/bipartite/docs/PDI&quot;&gt;one of my own metrics
in the &lt;code&gt;bipartite&lt;/code&gt; package&lt;/a&gt;), and that I think is rarely discussed.&lt;/p&gt;

&lt;p&gt;When a R package presenting a series of measures becomes available, it will
become the &lt;em&gt;gold standard&lt;/em&gt; of future analyzes in this field. This is an
extremely strong effect. French students in ecology use the (French-developed)
&lt;code&gt;ade4&lt;/code&gt; package, while people in Québec use the &lt;code&gt;vegan&lt;/code&gt; package (most likely
because of its ties with the &lt;em&gt;Numerical Ecology&lt;/em&gt; book, as Gavin
Simpson mentioned in the comments). There is a priority effect when
a package is released, and metrics that are not implemented in this package,
because they are more difficult to apply, will be less widely used. This is
a central point for methodological research papers. Describing the method is
a small fraction of the work. People are more likely to apply what is
proposed if there is a tool to do it, and as a consequence, (&lt;em&gt;I assume
that&lt;/em&gt;) methods are used more if there is an easy and well-known way to
apply them.&lt;/p&gt;

&lt;p&gt;This is especially true of large-scale packages, that aim to become your single
interface with the metrics and analyzes in a domain. Ecologists are familiar
with &lt;code&gt;bipartite&lt;/code&gt;, &lt;code&gt;vegan&lt;/code&gt;, &lt;code&gt;picante&lt;/code&gt;, &lt;code&gt;ape&lt;/code&gt;, for example. These &quot;mega-packages&quot;
implement a lot of measures, and for this reason, some will look through the
manual to see what kind of analyzes they can do. I most likely still do it
myself, especially so for side-projects where I&#39;m not entirely familiar with
the methodological literature yet. So based on my experience, this is
particularly problematic for newcomers to a field, because when you don&#39;t know,
you assume that the default values were chosen as defaults by
someone knowing what he was doing. Then I remember the &lt;a href=&quot;http://www.python.org/dev/peps/pep-0020/&quot;&gt;&lt;em&gt;Zen of
Python&lt;/em&gt;&lt;/a&gt;: &lt;em&gt;&quot;In the face of ambiguity, refuse the temptation
to guess.&quot;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;And as we all have different sensibilities, it shows in the way we think about
code, and in the way we write it. The default options of a function, for
example, can be a matter of choice, and especially so when this function
becomes as broad as &quot;measure diversity&quot;. This partiality is not an issue when
developing tools that you will use for your own research. But when developing
tools intended for a broad audience, then this code becomes a service, and it
is our duty as service providers that the defaults reflect our own biases the
least, and the current consensus the most.&lt;/p&gt;

&lt;p&gt;This is why extremely big packages &lt;em&gt;can&lt;/em&gt; be a problem under some circumstances:
they break Doug McIlroy&#39;s &lt;em&gt;Unix philosophy&lt;/em&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is the Unix philosophy: &lt;em&gt;Write programs that do one thing&lt;/em&gt; and do it
well. &lt;em&gt;Write programs to work together&lt;/em&gt;. Write programs to handle text
streams, because that is a universal interface.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When we, as users, rely on a big package to do our work, we assume that every
component of this package is (i) well implemented, (ii) conform to the original
paper, and (iii) up-to-date. Given the frequency of commits in the biggest
ecological packages, I&#39;m sure this is the case, but it&#39;s worth keeping in mind.
My personal preference goes to using a lot of packages doing a small number of
things. For my two papers relying on heavily on the development of comparison
of new methods, I started by writing the R package (well I started at the
drawing board, but that part is not relevant), then used the package to
perform the analyzes described in the paper. The idea is that whenever someone
will (hopefully) read the paper, there will be a package doing &lt;em&gt;only&lt;/em&gt; what is
described in the paper.&lt;/p&gt;

&lt;p&gt;And I understand that some people would rather have one big package doing
everything they need. There are arguments for that of course, namely the fact
that with as many users, errors are most likely to be uncovered, and the
quality of the package will increase (and the state of the R packages in
ecology tends to confirm that). But on the other hand, when you increase
the number of pieces, you increase the probability that one of them will behave
in a way you would not have anticipated. With this regard, packages that
require you to do a lot of small steps by hand have a great advantage, you know
what is happening in real time (then again, I like C and doing every thing by
hand, so perhaps I just enjoy hurting myself).&lt;/p&gt;

&lt;p&gt;In any case, the &quot;default&quot; behavior of programs is something that should be
held under intense scrutiny by the community, and improved code review will
definitely help. This is also where big packages can somehow escape the system:
even if they are reviewed formally (as opposed to being reviewed informally,
which they are in real time as people use them), this will not happen for
each release, and some new releases may introduce things that can be argued
against. In short, my point is: R packages (or packages in other languages, but
you get the idea) tend to rapidly represent the &quot;canon&quot; of the analyzes
to perform, and for this reason, we should always keep a critical eye on them.
Also, keep on writing open-source code, that will enrich the code base
available to the community.&lt;/p&gt;

&lt;p&gt;With that in mind, what would my &lt;em&gt;ideal&lt;/em&gt; super-big package be? Ideally, it
would only be a wrapper around other packages, each doing a single task, &lt;em&gt;Unix
philosophy&lt;/em&gt;-style. Proudly following the ecological tradition of sticking
&lt;em&gt;meta&lt;/em&gt; to every non-meta thing, it would obviously be called a &lt;em&gt;meta-package&lt;/em&gt;.
It would automate the process of taking data from one format to the other, and
propose pipelines to do automated analysis, but with users checking each step
of the process. As such a package would glue together other programs, there
will be little development required. The role of the maintainers, however,
would be to vet the new releases of the packages, find suitable additions,
and so forth. This would be a good example of the community coming
together to merge disparate tools. Social coding platforms allow to do
this almost effortlessly, and it would have the benefit of showing &lt;em&gt;how
the sausage is made&lt;/em&gt;, since each individual package would be usable on its
own. This would also shift the balance towards a system in which there is
a strict one paper / one package relationship, which I think would
considerably clarify the type of analyzes included in a package, in
addition to matching these analyzes to the primary literature.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Inferring the structure of food webs</title>
     <link href="http://timotheepoisot.fr/2013/09/21/predicting-network-structure/"/>
    <updated>2013-09-21T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;We&#39;ve just published a paper in &lt;em&gt;Methods in Ecology and Evolution&lt;/em&gt;, about the
&lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/2041-210X.12103/abstract&quot;&gt;inference of food web structure based on species trait data&lt;/a&gt;. That&#39;s
a seriously cool result (we think). There is a serious challenge when you work
with food webs: you need to know which species are interacting, and to do so,
you need to observed interactions in the fields. It&#39;s challenging, because
it must be done extensively, so as not to miss interactions.&lt;/p&gt;

&lt;p&gt;But on the other hand, there are well described relationships between traits of
interacting species. In the particular case of food webs, notably, there is
a log-log relationship between the body size of a predator and the body size of
its prey. The existence of this relationship can be used to, given
a distribution of body sizes, predict the interactions within a species
assemblage.&lt;/p&gt;

&lt;p&gt;So what we have been doing, is designing a statistical method to, given a list
of species and body size, callibrate a model of food web structure, to predict
the interactions. As we discuss in the paper, the more traits you put in your
prediction, the better it will get. Using a dataset of fishes, we generated
a convicing network using only body size and bathymetry.&lt;/p&gt;

&lt;p&gt;We think this result is cool, because by opposition to the &quot;observational&quot;
method of constructing food webs, you only need to know (well) a small number
of interactions. As we show in the paper, whenever you have a high R² of the
trait-trait-interaction relationship, the infered network is close to the
observed one. These methods can therefore allow to generate rough estimates of network structure.&lt;/p&gt;

&lt;p&gt;Interestingly, they will also help in the generation of predictions. As we
illustrate in the paper, we can tweak the body size distribution, and see how
much the network structure changes. For example, this can help simulate the
effect of body size decrease through over-fishing, or the extinction of the
larger species. There is still a bit of work to do to be able to predict the
structure of other types of networks, but it was definitely comforting to see
that, even with straightforward statistics, we were able to achieve it.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Is programming an acquired taste?</title>
     <link href="http://timotheepoisot.fr/2013/09/11/programming-innate-acquired/"/>
    <updated>2013-09-11T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Two weeks ago, the whole lab headed up to a remote place in the Rimouski
countryside for a summers school on &lt;em&gt;Ecological Modeling&lt;/em&gt;. It was a whole lot
of fun, and a really good way to get back to some things I&#39;ve always wanted to
study more in depth. So far, so good. Most of the days were courses in the
morning, and programming in the afternoon. There were also some pen-and-paper
model solving, but I won&#39;t talk much about these.&lt;/p&gt;

&lt;p&gt;While the students were sweating on the programming problems, we discussed the
fact that programming is maybe an innate skill. Not in the sense that some
people are unable to learn how to code functional things, but in the sense that
some people find it intuitive to express things in terms of &lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt;,
&lt;code&gt;if&lt;/code&gt;, and so forth (so forth is &lt;em&gt;not&lt;/em&gt; a valid algorithmic structure). That
may be true, that some people will find it easier to split up a large
problem in a series of short instructions. If you can do that intuitively,
then you&#39;ll probably have no problem structuring your code.&lt;/p&gt;

&lt;p&gt;But this particular skill can be trained, I think. One of the things I asked of
the students was to code something implementing Williams &amp;amp; Martinez &lt;em&gt;niche
model&lt;/em&gt; of food webs. The title of the assignment may be &quot;Write a program
implementing the NM in R&quot;. I took the opportunity of turning that into an
exercise about how to organize code. The whole problem can be easily
sub-divided into a series of smaller problems. In this case, we first need to
generate species, then to find out the interactions between them. The first
step, of generating species, itself involves several sub-steps, that can each
go into a function, or can be handled by logical tests.&lt;/p&gt;

&lt;p&gt;Perhaps there will be a &lt;em&gt;happy few&lt;/em&gt; that will take this series of steps by
themselves. Looking back on the first programs I wrote (I am unlucky enough to
have kept some of my spaghetti code from my first year of Masters, ...),
I&#39;m definitely not one of these people. As in most things, the key to
developing a feeling of how to organize things will come with practice, and
thinking about what you felt comfortable with. Which is why I always
encourage people to &lt;a href=&quot;http://timotheepoisot.fr/2013/04/12/learn-code-ecology/&quot;&gt;write code when they want to learn&lt;/a&gt;. I seriously
don&#39;t think there is a better way to increase your skills.&lt;/p&gt;

&lt;p&gt;So, is programming an acquired taste? Probably. It may seems frustrating at
first to need to specify things clearly at a very small scale. Some people may
call it intuitive, and be comfortable with the &lt;code&gt;if&lt;/code&gt;s and the &lt;code&gt;while&lt;/code&gt;s really
quickly, but I don&#39;t think these are majority. And that might explain why it&#39;s
not uncommon to hear students say that they aren&#39;t able to code well (aside
from the fact that, well, monkeys and typewriters...). Learning how to
code is like learning a language with a different grammatical structure. On
your first day, Python and &lt;a href=&quot;http://en.wikipedia.org/wiki/Brainfuck&quot;&gt;brainfuck&lt;/a&gt;
look awfully similar. Things you conceptualize easily will not translate well
in your editor because you need to use a different structure of thought to
express them. The more you practice, the more natural it will seem. For this
reason, I don&#39;t really believe in programming classes (for biologists, I don&#39;t
know how it goes in other majors) in which you only need to write-down
some code, press enter, and see that it does what your instructor says it does.
Letting students experiment, and fail, and sort out their experiences of what
worked, what did not, and what they felt comfortable with, could probably do
a lot to improve coding literacy.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Teach more maths to the undergrads!</title>
     <link href="http://timotheepoisot.fr/2013/08/28/lack-quantitative-training/"/>
    <updated>2013-08-28T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Fred Barraquand, a bunch of INNGE-and-friends-of-INNGE people, and I, just
published a &lt;a href=&quot;https://peerj.com/preprints/53/&quot;&gt;preprint&lt;/a&gt; at &lt;em&gt;Peer J&lt;/em&gt; about quantitative training in
early-career ecologists (or rather, the lack thereof). Talking about how much
maths is needed during training is all the rage in the ecological community,
and both sides of the argument have really good arguments.&lt;/p&gt;

&lt;p&gt;So Fred decided to do a survey of early-career (and older) ecologists through
&lt;em&gt;ECOLOG-L&lt;/em&gt;. Quoting directly from the abstract, this is what we found:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We found a clear self-perceived lack of quantitative training: &lt;strong&gt;75% are not
satisfied with their understanding of mathematical models&lt;/strong&gt;; 75% feel the level
of mathematics was “too low” in their ecology classes; 90% wanted more
mathematics classes for ecologists; and 95% more statistics classes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are a lot of number to process, but basically all point to the same
message: with a few more years of experience after your undergraduate degree,
you wish you have studied more maths (it&#39;s especially true for me). We
conclude the paper by exploring recommendations about how to (re)design
curriculum using the results from this survey.&lt;/p&gt;

&lt;p&gt;I discussed this result with my B.Sc. class last fall. We had a fun exchange,
and over time, the polarization between animal-watchers and number-crunchers
(the 2 or 3 of them) decreased. But here is the fun thing. When I asked the
students whether the found plausible that they&#39;ll wish for strong
quantitative training in a few years, they said yes. Immediately afterwards,
when I asked what they would do if we increased the part of quantitative
training up to 30% of all classes, as survey respondent suggested. To a vast
majority, they would not enroll.&lt;/p&gt;

&lt;p&gt;So, it seems like we&#39;ll need to sneakily teach quantitative skills...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>In defense of narrative reviews</title>
     <link href="http://timotheepoisot.fr/2013/08/24/in-defense-narrative-reviews/"/>
    <updated>2013-08-24T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Early in July, Christopher Lortie published a really great preprint on &lt;em&gt;PeerJ&lt;/em&gt;,
about the &lt;a href=&quot;https://peerj.com/preprints/39/&quot;&gt;opportunities of systematic reviews for ecology&lt;/a&gt;. It&#39;s
extremely insightful, and a good read. The abstract starts by &lt;em&gt;Narrative
reviews are dead&lt;/em&gt;. No they&#39;re not, nor shouldn&#39;t they be! &lt;em&gt;Narrative&lt;/em&gt; reviews are those we are used to read now: a story built on the
collection of some pieces of litterature. On the other hand, systematic reviews
or meta-analyses are, well, systematic, and try to reach a consensus (at least
a generalizable result) through the analysis of everything published on
a particular topic (I abusively generalize, but go read the paper and you&#39;ll
get the idea).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;There is something fascinating about science. One gets such wholesale returns of conjecture out of such a trifling investment of fact.&lt;/em&gt; &lt;br/&gt;
Mark Twain&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I get the idea that narrative reviews are more likely to reflect the author(s)
personal biases or interests, and in our quest for absolute impartiality, it
would make sense to get rid of this. This is the whole point of Chris&#39;s
paper: as the goal of a review is to give an overview of the
state-of-the-art in a particular field, then non-narrative reviews are the
&lt;em&gt;better&lt;/em&gt; tool. Nonetheless, I think this is an over-simplification of the
way people &lt;em&gt;use&lt;/em&gt; review papers.&lt;/p&gt;

&lt;p&gt;As a Ph.D. candidate, &lt;em&gt;narrative&lt;/em&gt; reviews helped me a lot when I was trying to
get an idea of the history of the field. Being able to understand how current
ideas emerged from previous observations and results, and seeing which papers
influenced which authors, was important when I had to develop my own research
questions. I won&#39;t spend time on the argument that narrative reviews are great
teaching material, and that it&#39;s a gentler introduction to a field to be walked
through a concept rather than to read through tables of ANOVA. I enjoy these
much more when I have an idea of the &quot;story&quot; behind.&lt;/p&gt;

&lt;p&gt;Essentially, narrative reviews should not be discarded because they serve
a different purpose from systematic reviews. Let&#39;s take the example of the
&lt;a href=&quot;http://en.wikipedia.org/wiki/Rare_biosphere&quot;&gt;&lt;em&gt;rare biosphere&lt;/em&gt;&lt;/a&gt; in environmental microbiology. For several
historical reasons, it has been hypothesized that the distribution of
biodiversity has a long-tail, with a lot of species being in extremely low
abundances. Classical sampling and enumeration technique only described the tip
of the iceberg. Fast forward a few years later, and the existence of the rare
biosphere is well established, and people start questioning its impact in
ecosystem processes, among other things. How we switched from &quot;it probably
exists&quot; to &quot;we need to understand what it&#39;s doing&quot; is best understood with
a little bit of narration. Specifically, the development of molecular biology
methods, and recently high-throughput sequencing, increased our detection
ability by order of magnitudes. The emergence of new tools (which in the
perspective of people like &lt;a href=&quot;http://www.scribd.com/doc/28780545/Gutting-Bachelard-s-Philosophy-of-Science-1987&quot;&gt;Bachelard, only reflects the emergence of new
theories&lt;/a&gt; that progressively materialized) allowed a switch in the way
people studied rare biosphere. A &lt;em&gt;narrative&lt;/em&gt; review of the question will likely
put this element forward.&lt;/p&gt;

&lt;p&gt;A systematic review will hold different informations. While the narrative
review aks &lt;em&gt;How did we get there?&lt;/em&gt;, the systematic review asks &lt;em&gt;Where are we
now?&lt;/em&gt;. They give different answers, but it&#39;s hard to argue that one of these
questions has more merit than the other. Interestingly, more and more reviews
conclude by asking &lt;em&gt;Where to next?&lt;/em&gt;. Both narrative and systematic reviews can
bring different elements, and thus will likely bring different responses. This
multiplicity of points of views should not be so rapidly dismissed. Narrative
reviews should be continued &lt;em&gt;because&lt;/em&gt; they are often not entirely impartial,
reflects biases or personnal preferences, and because they tell
stories. Once we are familiar with this story, and once we know the
different interpretations that people make of the same data, it&#39;s time
to go read the systematic reviews, and the meta-analyses. I appreciate
that people will enjoy one of these more than the other, or would
prefer to read statistics before naration. But I think we should
continue reading, and writing, narrative reviews.&lt;/p&gt;

&lt;p&gt;As a final point, whatever you may think of the issue, go read the &quot;companion&quot;
paper about the &lt;a href=&quot;https://peerj.com/preprints/38/&quot;&gt;&lt;em&gt;interpretation&lt;/em&gt;&lt;/a&gt; of meta-analyses in ecology. It&#39;s
a really good introduction.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Network structure of obligate and facultative parasites</title>
     <link href="http://timotheepoisot.fr/2013/08/20/network-structure-obligate-facultative-parasites/"/>
    <updated>2013-08-20T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;We have a new paper &lt;a href=&quot;http://dx.doi.org/10.1017/S0031182013000851&quot;&gt;online at &lt;em&gt;Parasitology&lt;/em&gt;&lt;/a&gt;, on the differences of
the structure between rodents hosts, and their obligates of facultatives
parasites. We had data from a really cool rodents-ectoparasites system, in
which the same hosts have both facultative and obligate parasites. These data
were also collected in different locations, and at different times.&lt;/p&gt;

&lt;p&gt;There are two important things in the results. First, the networks of obligate
and facultative parasites look &lt;em&gt;nothing&lt;/em&gt; alike. One (obligate) is highly
modular and anti-nested, and the other (facultative) is highly nested but not
particularly more or less modular. But when you look at all types of parasites
together, the resulting networks are both more moudular &lt;em&gt;and&lt;/em&gt; more nested than
expected by chance. The take-home of this particular result is: &quot;parasitism&quot; is
a vague notion, and we should not be too surprized when lumping contrasted
ecological strategies makes weird results emerge (also, we should focus on how
different functional groups affect network properties).&lt;/p&gt;

&lt;p&gt;The second part of the result is most likely more appealling to
parasitologists: we show that the networks of obligate parasites vary less in
space and time that the network of facultative ones. Not too suprising when you
think about it long enough: facultative parasites are mostly opportunisitc, and
thus they will probably pick their hosts more randomly (without less
constraints) than obligate ones. There&#39;s also the fact that facultative
parasites tend to occupy sites within the hosts that require less stringent
adaptations. But the key message is still the same: when we lump different
classes of organisms together in a single network, it&#39;s important to quantify
how much each contribute to the overall properties.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Complexity and connectance of ecological networks</title>
     <link href="http://timotheepoisot.fr/2013/08/19/connectance-complexity/"/>
    <updated>2013-08-19T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;So my &lt;a href=&quot;http://timotheepoisot.fr/2013/06/19/notes-on-network-complexity/&quot;&gt;blog post on ecological complexity in networks&lt;/a&gt; turned into
a manuscript, now online as a preprint at &lt;a href=&quot;https://peerj.com/preprints/50/&quot;&gt;&lt;em&gt;PeerJ&lt;/em&gt;&lt;/a&gt;. We&#39;ll send it up for
review (at &lt;em&gt;PeerJ&lt;/em&gt; also) in a while, but feel free to read it and give us
feedback using the &lt;a href=&quot;https://github.com/tpoisot/ms_connectance_complexity/issues&quot;&gt;github issues tracker&lt;/a&gt;. We&#39;d like that very much,
actually. And as the github repository is public, feel free to
fork/edit/push modifications if you have something to contribute to
the paper.&lt;/p&gt;

&lt;p&gt;In a nutshell; we argue that connectance is still a central property of
networks. For one thing, (i) it constrains how much different networks exists
for a given species number, which was the point of the original post. But more
importantly, (ii), because a given connectance implies a given number of
interactions, connectance imposes structural constraints on networks
properties. Or in other words, all important moments of the degree distribution
vary with connectance. And it works quite well with Erdos-Renyi graphs, and
with the famous &quot;niche&quot; model of food webs.&lt;/p&gt;

&lt;p&gt;It&#39;s kinda cool, because connectance is &lt;em&gt;simple&lt;/em&gt; to measure, and even people
that no background in network analysis will get what it means. It also means
that from a purely statistical point of view, any effect of the degree
distribution must be controlled for an effect of connectance.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;P.S.&lt;/em&gt;: This is a good example of &lt;a href=&quot;http://timotheepoisot.fr/2013/08/05/codelust/&quot;&gt;Codelust&lt;/a&gt; in practice. The
original script were written over a particularly greasy and disappointing club
sandwich eaten alone in my office, so at least something productive came out of
this particularly bleak view of the academic daily life...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Writing manuscripts in Linux (like a boss)</title>
     <link href="http://timotheepoisot.fr/2013/08/18/writing-linux-like-a-boss/"/>
    <updated>2013-08-18T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Hey, it&#39;s been a year since I &lt;a href=&quot;http://timotheepoisot.fr/2012/08/03/new-linux-setup/&quot;&gt;switched to Linux&lt;/a&gt;. I&#39;ve tried a few
different distros, and finally settled on &lt;a href=&quot;https://www.archlinux.org/&quot;&gt;Arch Linux&lt;/a&gt; with
&lt;a href=&quot;http://openbox.org/&quot;&gt;OpenBox&lt;/a&gt;. It&#39;s ligthweight, uncluttered, and I love. But that&#39;s not what
I&#39;m going to talk about.&lt;/p&gt;

&lt;p&gt;I may have mentionned in the past that I used &lt;em&gt;Sublime Text 2&lt;/em&gt;. During my quest
for ever-increasing minimalism, I&#39;ve made the switch to &lt;code&gt;vim&lt;/code&gt;. And I now have
a &lt;em&gt;cool&lt;/em&gt; writing setup. Most of what I do is writing markdown files, and using
makefiles to use pandoc to convert them to PDF (read more about it
&lt;a href=&quot;http://timotheepoisot.fr/2013/05/18/make-pandoc/&quot;&gt;here&lt;/a&gt;). The only thing that missed was a lightweight PDF reader,
able to auto-refresh things. I have now found &lt;a href=&quot;http://pwmt.org/projects/zathura/&quot;&gt;&lt;em&gt;zathura&lt;/em&gt;&lt;/a&gt;. I am supper happy.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;zathura&lt;/em&gt; is command-line based, and uses keyboard for interaction. So whenever
I am working on a document in a terminal (&lt;code&gt;rxvt-unicode&lt;/code&gt;, in case you wonder,
with the &lt;em&gt;excellent&lt;/em&gt; font &lt;a href=&quot;http://damieng.com/blog/2008/05/26/envy-code-r-preview-7-coding-font-released&quot;&gt;Envy Code R&lt;/a&gt;), I just need to do a quick
&lt;code&gt;zathura my-doc.pdf&lt;/code&gt;, and I can see the output. Because &lt;em&gt;zathura&lt;/em&gt;
auto-refreshes things, whenever I &lt;code&gt;make pdf&lt;/code&gt;, the output is up to date. Just
like that.&lt;/p&gt;

&lt;p&gt;And the point is: the productivity boost is amazing. I do everything from within the terminal (or rather, terminals, I have a few of them open at any time). And it&#39;s fast, ligthweight, and &lt;em&gt;responsive&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;And just in case you are curious&lt;/strong&gt;, a list of the &lt;em&gt;vim&lt;/em&gt; plugins I use:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/tpope/vim-pathogen&quot;&gt;pathogen&lt;/a&gt; to easily install plugins&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/airblade/vim-gitgutter&quot;&gt;vim-gitgutter&lt;/a&gt; to see how my local file differs from the git version&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/vim-pandoc/vim-pandoc&quot;&gt;vim-pandoc&lt;/a&gt; for a lot of pandoc-related stuff, including &lt;em&gt;bibtex reference auto-completion&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
  </entry>
  
  <entry>
     <title>F1000Research announces new Ecology section</title>
     <link href="http://timotheepoisot.fr/2013/08/08/F1000R-ecology-section/"/>
    <updated>2013-08-08T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;F1000Research just put up a &lt;a href=&quot;http://blog.f1000research.com/2013/08/08/ecologists-join-our-open-science-ecosystem/&quot;&gt;new blog post&lt;/a&gt; to announce that they
will concentrate some of their efforts to increase the proportion of ecology
papers they publish. We should all be excited about this. First, the article
processing fees will be waived until 2014, so here goes a good opportunity to
see for yourself how this journal works. Second, the publication model of
F1000Research is extremely interesting. After initial checking, the paper is
put on-line, and appears as a preprint. Reviews appear in real-time, and are
not anonymous. Further changes to the paper are well documented.&lt;/p&gt;

&lt;p&gt;As we discuss in &lt;a href=&quot;http://www.plosbiology.org/article/info%3Adoi%2F10.1371%2Fjournal.pbio.1001563&quot;&gt;Phil&#39;s paper&lt;/a&gt; paper on preprints in biology, this
immediate publication model is good, especially for early-career people. When
you need to have something to show for your work in order to apply for
a fellowship, it&#39;s understandable that you don&#39;t want to wait for up to a whole
year for your paper to run the gauntlet of peer review. F1000Research also
integrates tightly with figshare, and datasets are required to be open when the
paper is submitted. That&#39;s a really good practice, and it will further the
integration between datasets and papers.&lt;/p&gt;

&lt;p&gt;One of the coolest things for field ecologists (I&#39;ve been informed that ecology
is the study of populations, and not a branch of applied mathematics or
computer sciences...?) is that F1000Research will now offer to publish
&lt;em&gt;observation articles&lt;/em&gt;. People in the medical sciences have many case studies,
that are extremely important to the field as a whole. In ecology, despite
the recognition that general laws are elusive and not as general as they
appear, there seems to be a shortage of places to publish interesting
field/lab observations. I&#39;m sure many people will be deligthed to learn that
the modern publishing world still cares about the naturalist tradition of
ecology.&lt;/p&gt;

&lt;p&gt;So you can head to the &lt;a href=&quot;http://f1000research.com&quot;&gt;F1000Research&lt;/a&gt; website and
see for yourself!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Codelust</title>
     <link href="http://timotheepoisot.fr/2013/08/05/codelust/"/>
    <updated>2013-08-05T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;&lt;strong&gt;Wanderlust&lt;/strong&gt; &lt;em&gt;(noun)&lt;/em&gt;: a strong desire to travel.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Codelust&lt;/strong&gt; &lt;em&gt;(noun)&lt;/em&gt;: a strong desire to code rather than actually work, and how you can use it for good.&lt;/p&gt;

&lt;p&gt;I&#39;m lucky. I have stacks of datasets on my laptop, and good ecological
questions to ask, and (hopefully) that will result in a few papers. But that&#39;s
not &lt;em&gt;fun&lt;/em&gt;. I know what I have to do, how I have to do it, and I&#39;m mostly
re-using existing tools. So over the last month or so, I&#39;ve been consumed by
&lt;em&gt;codelust&lt;/em&gt;, a strong desire to open a text editor, and write a program that
does something I&#39;ve never done before.&lt;/p&gt;

&lt;p&gt;At first sight, it&#39;s a complete waste of time. But I&#39;ve noticed that it&#39;s
better to let myself take one hour or two a few days a week, than fight against
the need to do new stuff just for the sake of it, and for a few reasons.&lt;/p&gt;

&lt;p&gt;First, it&#39;s a good way not to grow tired of your current projects. There are
times when you can&#39;t see anymore of a particular dataset or paper for the day,
and it&#39;s better to sharpen your computing skills than roam around the
office trying to find other bored people to socialize with (at least,
it&#39;s more productive in the long term). That&#39;s a good way to keep
your sanity. I&#39;ve always been a big fan of Google&#39;s &lt;a href=&quot;http://www.wisebread.com/why-you-should-follow-googles-20-rule&quot;&gt;20% time
rule&lt;/a&gt;, that states that 20% of your time should be spent on
something &lt;em&gt;not&lt;/em&gt; directly related to what you&#39;re supposed to be. The
precise amount of time dedicated to goofing around will vary. but the
general idea is that you will eventually use this time to do new,
creative things, and you will eventually have a long-term benefit.&lt;/p&gt;

&lt;p&gt;Second, episodes of codelust are good times to try &lt;em&gt;something new&lt;/em&gt;. I&#39;m not
talking about creating something new from a scientific point of view (though
we&#39;ll get to that), but more of trying a new technique, library, or
something like that. It recently led me to replace &lt;code&gt;tsv&lt;/code&gt; by &lt;code&gt;json&lt;/code&gt; as the
output format for a model I&#39;m working on. I&#39;ve learnt a great deal, and
identified new areas for improvement. This will probably help me save time in
other projects, and now I have one more tool in my toolbox.&lt;/p&gt;

&lt;p&gt;Additionaly, codelust (if you&#39;re the theory type) is a good way to get
innovative projects started. What happpens if I change this model in this way?
How does the relationship between these and these outputs reacts to another
factor? With most simple, canonical ecological models, simple questions are
easy to explore. If you&#39;re lucky (failing that, you&#39;ll have to be smart), you
can stumble upon an interesting result that is worthy of being expanded into
a &quot;real&quot; paper. Try not to grow bored of &lt;em&gt;this&lt;/em&gt; paper and engage in more
codelusting, that would probably disprove the point I just made...&lt;/p&gt;

&lt;p&gt;And as a final point, codelust will keep you sharp. It&#39;s easy to write one
R package and use it for a while. Forcing yourself to write new code, using new
methods, every once in a while, will keep you up to date, increase the range of
situations you&#39;ve already covered, and give you a more solid experience.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Should we share reviews?</title>
     <link href="http://timotheepoisot.fr/2013/07/10/sharing-reviews/"/>
    <updated>2013-07-10T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Britt Koskella  &lt;a href=&quot;http://brittkoskella.wordpress.com/2013/07/08/and-the-reviews-are-in/&quot;&gt;uploaded reviews, and her replies&lt;/a&gt;, for her recent
&lt;em&gt;Current Biology&lt;/em&gt; paper (which, by the way, is great). She also announced that
she will do the same thing &lt;em&gt;every time&lt;/em&gt; a paper is published. We&#39;ve had
a discussion in the lab over the few months, about whether or not we should do
almost the same thing: we wanted to put online a very tongue-in-cheek &lt;em&gt;Hall of
fame&lt;/em&gt; of the &quot;worse&quot; comments we&#39;ve received, for papers that ended up being
published. We decided not to make it (public). The &lt;a href=&quot;http://theseamonster.net/2013/05/are-unreasonably-harsh-reviewers-retarding-the-pace-of-coral-reef-science/&quot;&gt;SeaMonster&lt;/a&gt;
also did a very good job of deconstructing bad practices in refereeing, and
discuss how preprints can compensate for the fact that pre-publication review
exists.&lt;/p&gt;

&lt;p&gt;Should we share reviews &lt;em&gt;at all&lt;/em&gt;? If we want to share reviews, in the sense of,
we put them online for all to see, along with the replies, there are
a few things to consider. First, in most situations, it will still not
break the assymetry in the review process. The burden of proof is still
on the author, and by the time you can show how bad a review is (which
is what the &lt;em&gt;SeaMonster&lt;/em&gt; people did in the above reference), the
paper has most likely been rejected. That&#39;s a great way to vent out your
frustration and get support from other people, but it&#39;s not really
helping in getting your paper out there.&lt;/p&gt;

&lt;p&gt;Sharing reviews and replies can also show that you&#39;ve been taking the revisions
seriously, but that&#39;s part of our job description anyway. If you don&#39;t do
mistakes, you&#39;re doing science wrong, and if you don&#39;t correct these mistakes,
you&#39;re doing science &lt;em&gt;really&lt;/em&gt; wrong, or something like that. So posting the reviews and the replies is a good way to contribute some trivia, but I can&#39;t see how it can be really meaningful.&lt;/p&gt;

&lt;p&gt;Now, read the following sentence carefully.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The field has responded with enthusiasm, and reviewers seem to really get it, look for what is good and what needs to be improved in the paper. You don’t need to find a reason to reject.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is from &lt;a href=&quot;http://exchanges.wiley.com/blog/2012/07/02/your-starter-for-tenan-interview-with-professor-allen-moore-head-of-the-department-of-genetics-university-of-georgia-athens-usa-and-editor-of-ecology-and-evolution-a-new-open-access-jour/&quot;&gt;Allen Moore&lt;/a&gt;, editor in chief of &lt;em&gt;Ecology and
Evolution&lt;/em&gt;. This single sentence is all the difference between a good and a bad
review. Your task is to help make the paper better (unless the paper is so bad
that it&#39;s not possible to save it, but I&#39;ve probably had only one of
these in my 30+ reviews so far). That&#39;s an even more straightforward
definition of the [&lt;em&gt;Golden Rule&lt;/em&gt;][goldenrule] of reviews: don&#39;t be an assh*le.&lt;/p&gt;

&lt;p&gt;This is where posting reviews can be good: we can (perhaps) make the reviews
better. We can give credit where credit is due, and blame where blame is due.
But that&#39;s only true if the reviews are not anonymized. If we want the sharing
of reviews to have an impact, then it is necessary that reviews are not
anonymous. This is the purpose of journals like &lt;em&gt;F1000Research&lt;/em&gt;. If you want to
see an example, go see the reviews, replies, and revisions, of our paper about
&lt;a href=&quot;http://f1000research.com/articles/1-21/v2&quot;&gt;terminal investment in bacteria&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Will it improve the quality of reviews (and, if better reviews mean better
papers, the quality of the literature)? Results published in BMJ suggest
&lt;a href=&quot;http://www.bmj.com/content/341/bmj.c5729&quot;&gt;it&#39;s not the case&lt;/a&gt;. But there are two striking things with this paper.
First, the rate of &lt;em&gt;refusal&lt;/em&gt; increased when the editors told the reviewers that
their review might be posted, online, in a non-anonymous way. Second, the
reviewers that accepted took, on average, longer to review. And the additional
delay makes sense: if your name is attached to it, then a review is a valid
piece of scientific output, and you will make sure that it&#39;s good.&lt;/p&gt;

&lt;p&gt;Here is how I&#39;d like to have conducted this study. Get all the reviews, and
&lt;em&gt;once they are turned in&lt;/em&gt;, ask the authors if they agree to have them published
online, with their name attached to it. Then have editors rate the reviews from
each group, and check the proportion of positive/negative recommandations in
each group. I&#39;m now signing all of my reviews, even the negative ones. And
check for the age of the people in each group also, just in case. I&#39;m still
hoping it won&#39;t make any difference, but perhaps the really bad kind of reviews
(the biased ones, trashing a paper just because they don&#39;t like it, or because
it contradicts some kind of agenda they set), will be filtered out. You don&#39;t
want the whole world to see that you are a terrible persone (unless you are
a clear sociopath, that is).&lt;/p&gt;

&lt;p&gt;But I feel like that rate of refusal to share the reviews should not be that
high. Fear of future payback might be a valid one, but hopefully with a very
small number of people. And besides, they&#39;re not much to be angry about in
reviews anyway. Because reading through most of them, the &quot;worse&quot; kind of
reviews I write and receive are either &quot;Your paper is sound, but it needs
a little but more work to be &lt;em&gt;awesome&lt;/em&gt;&quot;, or &quot;Hey, you probably missed this
little flaw, correct it and we&#39;re good&quot;. There&#39;s the occasional blatant mistake
on my side, or crazy referee, but most of the time, it&#39;s just this perfect
blend of stimulating and annoying. There&#39;s no reason to hate people on these
grounds, and there&#39;s no reason to be afraid of attaching your name to that
either.  And you know what? The most awesome thing happenned to &lt;a href=&quot;http://ibartomeus.wordpress.com/2013/06/27/signing-reviews-pays-back-and-about-sharing-good-and-bad-news/&quot;&gt;Ignasi
Bartomeus&lt;/a&gt;. He got a &lt;em&gt;thank you note&lt;/em&gt; from the authors of a paper he
&quot;helped&quot; rejecting. &lt;em&gt;That&#39;s&lt;/em&gt; how you do it.&lt;/p&gt;

&lt;p&gt;So where does that leaves us? Sharing reviews can be a good way to share your
frustration, or illustrate all the is broken with a system where you have to
defend your work against people you don&#39;t know the names of (although we have
to keep in minds that the editors know what they&#39;re doing, and won&#39;t
probably pick referees at random...). But if we take the extra step of
having non-anonymous reviews, then sharing it (an not on our blogs or twitter,
but on the journal web-site) will perhaps rekindle our complicated
relationship with the peer-review procces. Because for all the frustration it
does us, it&#39;s still done by our &lt;strong&gt;peers&lt;/strong&gt;. People we hang with at meetings, drink
beers with, do awesome science with. We are inspired by the papers they write.
We find ideas in their data. We&#39;re not enemies; let&#39;s not behave as if it were
the case (except reviewer #3, this guy is the worse).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>What do I read (according to Zotero)?</title>
     <link href="http://timotheepoisot.fr/2013/07/09/zotero-number-papers/"/>
    <updated>2013-07-09T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;ve been playing around a bit with &lt;a href=&quot;http://zotero.org/&quot;&gt;Zotero&lt;/a&gt; these last few days.
Zotero stores the data about your library in a &lt;code&gt;sqlite3&lt;/code&gt; database, called
&lt;code&gt;zotero.sqlite&lt;/code&gt;, and stored in your Zotero folder (&lt;code&gt;~/Zotero/&lt;/code&gt; in my case, but
most likely something else in yours). The internal structure of the
database is very weird, and it took my a bit of poking around in &lt;code&gt;sqliteman&lt;/code&gt; to
figure it out. But in the end, I was able to come up with a solution to count
the number of papers in each journal, stored in my library.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;python&lt;/code&gt; script is &lt;a href=&quot;https://gist.github.com/tpoisot/5958933&quot;&gt;available as a gist&lt;/a&gt;. When you run it
(assuming you&#39;ve made a copy of the &lt;code&gt;zotero.sqlite&lt;/code&gt; in the folder where the
script is, you will end up with a &lt;code&gt;journals.tsv&lt;/code&gt; file, in which the two
columns are, respectively, the number of papers, and the journal title.&lt;/p&gt;

&lt;p&gt;Because despite the feature being &lt;em&gt;in progress&lt;/em&gt; for a few years now there is
still no bacth edit of journal titles (that I know of), it took me a bit of
cleaning-up in open office to check for duplicates, especially since my
current database is following me since the first year of my masters (so 2006).
So, what do I read? Here is the top 15:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left;&quot;&gt; Journal                   &lt;/th&gt;
&lt;th style=&quot;text-align:left;&quot;&gt; Count &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Ecology Letters           &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 202   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Ecology                   &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 198   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; PLoS One                  &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 196   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; American Naturalist       &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 181   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; PNAS                      &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 156   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Oikos                     &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 135   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Trends Ecol Evol          &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 132   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Procs R Soc B             &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 123   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Evolution                 &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 120   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Nature                    &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 119   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Science                   &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 108   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; J Evol Biol               &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 101   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; J Anim Ecol               &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 71    &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; J Biogeogr                &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 46    &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; Phil Trans B              &lt;/td&gt;
&lt;td style=&quot;text-align:left;&quot;&gt; 45    &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;p&gt;So, what to make of this information? Note that by the time we reach number 12
or so in that list, the paper count decreases extremely sharply. Also, the top
five is not reallu surprising. I was expecting to see &lt;em&gt;Nature&lt;/em&gt; and &lt;em&gt;Science&lt;/em&gt;
rank higher on the list. There is still some inertia, as well, with &lt;em&gt;J Evol
Biol&lt;/em&gt; and &lt;em&gt;Evolution&lt;/em&gt; occupying high positions because I&#39;ve read these some
much during my PhD and Masters. So I guess that (i) I&#39;m definitely an ecologist
(also, &lt;em&gt;J Theor Biol&lt;/em&gt; and &lt;em&gt;Theor Pop Biol&lt;/em&gt; are lurking not far below), and (ii)
despite this having a very very long tail, I mostly read things coming up in
a few journals.&lt;/p&gt;

&lt;p&gt;Now, the really pressing issue... How does it relates to their &lt;em&gt;Impact Factor&lt;/em&gt;?
A quick survey of the table above shows that some high scoring journals are
quite low on the list, and some not-so-high scoring ones are nearing the top.
A quick googling got me the most recent IF for the first 30 or so journals of my
list. The results are plotted below (put your mouse over a dot to see the journal name).&lt;/p&gt;

&lt;div class=&#39;scatterplot d3&#39;&gt;&lt;/div&gt;


&lt;script type=&quot;text/javascript&quot; src=&quot;/data/zotero-if.js&quot;&gt;&lt;/script&gt;


&lt;p&gt;It doesn&#39;t look like there is much effect of the IF on wether or not I&#39;ll save
the paper in my library. And we can also see a small group of three journals
I read much more than their IF would &quot;predict&quot; (&lt;em&gt;Ecology&lt;/em&gt;, &lt;em&gt;PLoS One&lt;/em&gt;, and &lt;em&gt;The
American Naturalist&lt;/em&gt;). So that turned out to be a fun little lunch coding
project. Don&#39;t hesitate to look at the code, I&#39;m sure there is plenty of things
to make better.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A quick way to parallelize</title>
     <link href="http://timotheepoisot.fr/2013/07/08/parallel/"/>
    <updated>2013-07-08T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39; ve often been confronted to the situation when I want to run a bunch of
simulations, that will take long if I run them in batch, but long enough that
I want to put them on the lab cluster. A fairly common situation is when I want
to feed some sequentially numbered output files to a script performing all kind
of black magic (&lt;em&gt;a.k.a.&lt;/em&gt; data analysis).&lt;/p&gt;

&lt;p&gt;While looking for a solution, I came across &lt;a href=&quot;http://www.gnu.org/software/parallel/&quot;&gt;GNU &lt;code&gt;parallel&lt;/code&gt;&lt;/a&gt;. This
little command-line program will just execute whatever you feed him on the
different CPUs. For example, if I want to run all of the files in my &lt;code&gt;output/&lt;/code&gt; folder into a python script, I can write something like:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;ls output/*.dat | sort | parallel ./results.py --file output/&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That will take the files, then output then one by one, and pass them to
&lt;code&gt;parallel&lt;/code&gt;. When I run that, all of my CPU start working on the task, so I can
cut the treatment time in four (more than what I could achieve with code
optimization!). It&#39;s definitely poor man parallelization, but it works, and
it&#39;s faster then setting up a bunch of simulations on a cluster.&lt;/p&gt;

&lt;p&gt;That&#39;s one of the (many many) nice sides of working only with GNU/Linux now.
I&#39;m learning a lot of nifty little tricks, and it&#39;s starting to really pay off
in terms of how fast I can throw command lines instructions at a problem until
it disappears (or until I accidentaly delete the files, look, I&#39;m still
learning...)..&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Fixes for the ManuscriptCentral PDF conversion problem</title>
     <link href="http://timotheepoisot.fr/2013/06/24/manuscript-central-pdf-fix/"/>
    <updated>2013-06-24T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;While submitting a MS to &lt;em&gt;Methods in Ecology and Evolution&lt;/em&gt;, I ran into a PDF
conversion problem. It was not the first time it happenned, and always on
journals using &lt;em&gt;manuscriptcentral&lt;/em&gt; as an upload system, and always with
&lt;code&gt;LaTeX&lt;/code&gt;-generated PDF. My previous fix for this, in the proud quick-and-dirty
tradition of the academic world, was to (1) import the PDF in google documents,
(2) print it as a PDF, (3) upload the PDF and (4) drink the shame
away.&lt;/p&gt;

&lt;p&gt;Only this time, I wanted to understand what was happening, and to fix it as much
as I could. Well, as it turns out, the &lt;em&gt;manuscriptcentral&lt;/em&gt; system only accepts
PDF up to version 1.5 of the standard. Reasonably recent &lt;code&gt;LaTeX&lt;/code&gt; distributions
will generate 1.7 or 1.8, so it&#39;s obviously not going to work (but on the
up-side, it will give you one of the most depressing and amusing error
message ever: your PDF file cannot be converted in the correct PDF format). So to fix it, there are a number of workarounds.&lt;/p&gt;

&lt;p&gt;First, you can add&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\pdfminorversion&lt;/span&gt;=4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to your &lt;code&gt;LaTeX&lt;/code&gt; preamble, if compiling with &lt;code&gt;pdflatex&lt;/code&gt;, as explained
&lt;a href=&quot;http://www.jakubkonka.com/2012/11/07/latex-manuscript-central.html&quot;&gt;here&lt;/a&gt;. That&#39;s one additional command, which is not needed in most other situations, but that&#39;s one way to fix it.&lt;/p&gt;

&lt;p&gt;There is a second workaround, which is to compile with &lt;code&gt;latex&lt;/code&gt; instead of
&lt;code&gt;pdflatex&lt;/code&gt; (haven&#39;t tested this one, but it should work), then upload the whole
dependencies when you submit. Note that your figures needs be &lt;code&gt;eps&lt;/code&gt; for this to
work, and you&#39;ll probably be limited by the packages installed on the remote
server, the list of which is not known. The &lt;em&gt;Methods in Ecology and Evolution&lt;/em&gt;
staff was extremely quick in pointing that out after I raised the issue on
Twitter, so a big thank you to them.&lt;/p&gt;

&lt;p&gt;The solution I found this morning is the following:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;pdftops ms.pdf ms.ps
ps2pdf13 ms.ps ps.pdf
rm ms.ps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Very simply put, that will convert your pdf into a postscript file, then convert
it into a PDF 1.3 file, that can be uploaded with no problems. You can just add
that to a &lt;code&gt;makefile&lt;/code&gt;, by the way:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;make&quot;&gt;&lt;span class=&quot;nf&quot;&gt;mc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;ms.pdf&lt;/span&gt;
    pdftops ms.pdf ms.ps
    ps2pdf13 ms.ps ms_mc.pdf
    rm ms.ps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once your paper is ready, a simple &lt;code&gt;make mc&lt;/code&gt; will create a &lt;code&gt;ms_mc.pdf&lt;/code&gt; file,
which is suitable for upload. So here you go, happy upload to all of you, and may the editorial decisions ever be in your favor.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A niche to fill in ecological publishing?</title>
     <link href="http://timotheepoisot.fr/2013/06/23/niche-fill-ecological-papers/"/>
    <updated>2013-06-23T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I have been wondering, over the past few weeks, about places to submit
really short, methodological minded papers, in ecology. As far as I know,
there is currently no journal for that. I&#39;m specifically talking
about papers that are not groundbreaking, possibly extremely
technical, but still hold value because they deal with arguments that
happen often. As a good example, the reply of &lt;a href=&quot;http://arxiv.org/abs/1301.3651&quot;&gt;Rohr and
colleagues&lt;/a&gt; to the &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22722863&quot;&gt;James and colleagues&lt;/a&gt; paper is interesting, but technical. It&#39;s unlikely to stimulate a debate in the whole community, but for the people active on the topic, it&#39;s something to read and think of (regardless of who you side with on the issue discussed).&lt;/p&gt;

&lt;p&gt;So where to publish this? &lt;em&gt;&lt;a href=&quot;http://www.methodsinecologyandevolution.org/view/0/authorGuidelines.html#Editorial%20Policy&quot;&gt;Methods in Ecology and Evolution&lt;/a&gt;&lt;/em&gt; seems to
be &lt;em&gt;the&lt;/em&gt; ideal place for that, but their guidelines do not offer the
opportunity to submit this kind of papers. &lt;em&gt;F1000Research&lt;/em&gt; and &lt;em&gt;PeerJ&lt;/em&gt; are good
places as well, but fairly expensive is you want to do a one-off thing. You
always have the opportunity to publish things in your blog, but unless you are
a big-name blogger, your result will go un-noticed (which is why I&#39;ll work on
turning &lt;a href=&quot;http://timotheepoisot.fr/2013/06/19/notes-on-network-complexity/&quot;&gt;this entry&lt;/a&gt; into a short note somewhere.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ArXiV&lt;/em&gt; is another possibility, but the readership in biological sciences is
&lt;a href=&quot;http://www.plosbiology.org/article/metrics/info%3Adoi%2F10.1371%2Fjournal.pbio.1001563&quot;&gt;too low at the moment&lt;/a&gt;. So there is possibly a niche to fill for an
adventurous journal. Let&#39;s give us a place to write short notes, so that the
active debates are &lt;em&gt;documented&lt;/em&gt;, no matter what the number of people debating
is. What do you think?&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A note on network complexity</title>
     <link href="http://timotheepoisot.fr/2013/06/19/notes-on-network-complexity/"/>
    <updated>2013-06-19T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I have seen the word &lt;em&gt;complexity&lt;/em&gt; used to mean approximately anything in
ecological network litterature, and to be  extremely honest, I&#39;m entirely guilty
of that myself. We can probably find as many uses for &lt;em&gt;complexity&lt;/em&gt; in the
network litterature as there are uses for &lt;em&gt;paradigm&lt;/em&gt; in Thomas Kuhn&#39;s &lt;em&gt;The
Structure of Scientific Revolutions&lt;/em&gt; (which is to say, probbaly way too much,
and certainly enough to confuse people). It&#39;s getting bad enough that some
of us (and again, I&#39;m probably guilty of that) use &lt;em&gt;complex network&lt;/em&gt; any time we
should just say &lt;em&gt;network&lt;/em&gt;. Or &lt;em&gt;species-rich network&lt;/em&gt; (which we can argue is not
necessarily complex), or &lt;em&gt;densely connected network&lt;/em&gt; (same thing).&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;h4&gt;Warning!&lt;/h4&gt;
This was supposed to be a short post. It&#39;s not. Unless you are terribly interested in networks, you can safely skip this one. If you have an eye for statistics, please read through, there are likely mistakes to correct...&lt;/div&gt;


&lt;p&gt;Consider this post my humble attempt to clarify things. The thing is, networks
are physically constrained, in that you can&#39;t put more edges in them than the
number of nodes will allow. In ecological terms, a predator won&#39;t eat a prey
more than once. So for example, one could argue that a very densely connected
network is not complex. The &lt;em&gt;dynamics of the community&lt;/em&gt; probably will be, but
the network in itself has no exceptional properties to speak of. In the same
line of thinking, a minimally connected network is simple as well. It can have
1000 species in a linear chain, that won&#39;t give it any properties worth being
excited about (in terms of topology that is, because a super-long food chain is
pretty exciting by itself).&lt;/p&gt;

&lt;p&gt;So let&#39;s start this way. What are the lower and upper bounds of the number of
links you can put in a network made of a given number of species? The key issue
is that there should be no species with a degree of 0, which is to say
everything should have at least one partner. To keep things simple, we&#39;ll assume
that we work on binary undirected adjacency matrices, with no self-loops.
Finding the lower bound is simple enough. If you want a strongly connected
graph, so that you can reach any node from any other node by travelling along
edges, the minimal number of edges if you have N nodes is simply N-1. If you
don&#39;t care about your graph being strongly connected, then the minimal number of
edges is (N+1)/2 if N is odd, and N/2 if N is even.&lt;/p&gt;

&lt;p&gt;Whether you care or not about the graph being strongly connected, the maximal
number of edges in a graph with N nodes, &lt;em&gt;i.e.&lt;/em&gt; a complete graph, is N(N-1)/2.
This is a starting point: for any number of N species, we can predict the
interval in which the number of interactions will fall. Now, keep in mind that
(species indentity nonwithstanding), there is only one way to have a complete
graph, and only one way to have the minimally connected graph. This is a cool
thing right here: most of the action will happen for intermediate number of
edges within the range! And a thing that serves our purpose: the maximal number
of edges is the maximal number of &quot;slots&quot; that we can fill with edges. This
becomes a quite simple combination problem.&lt;/p&gt;

&lt;p&gt;So here is an interesting questions: knowing N, and a number of edges L, how
many different graphs can I produce? This is simple enough to solve, we just
need to calculate how many ways there are to put L elements in N(N-1)/2
elements. Let&#39;s call M the maximal number of edges, and the solution to this
problem is simply M!/(L!(M-L)!), which we will note C(M,L). For example, with
4 nodes, the maximal number of edges M is 6. How many ways are there to
distribute 5 edges between 4 nodes? Using the formula above, we get 6.&lt;/p&gt;

&lt;p&gt;But that&#39;s not quite the original problem: among these 6 combinations, how many
of them leave at least one node unconnected? It took me a while to figure out
the rather simple solution. In the simple system with 4 species, and 5 edges, if
we assume that one species has no connection, then we will look for the number
of combinations of 5 edges, in the maximal number of edges allowed by 3 nodes.
With three nodes, there is at most 3 edges, and as it turns out, it&#39;s impossible
to make 5 edges fit in only 3 slots. So with this simple exercice, we can say
that there are 6 different networks of 5 edges and 4 nodes that have no
unconnected nodes.&lt;/p&gt;

&lt;p&gt;Let&#39;s now try a slightly more complicated (noticed how I didn&#39;t wrote &lt;em&gt;complex&lt;/em&gt;?
Good.) situation. Assuming 5 nodes, we will have between 3 and 10 edges.
A very interesting question is: if I have 3 edges to distribute in this network,
how many combinations can I do with no unconnected edges? C(10,3) gives 120 of
them. But, we need to account for the fact that some of these combinations
will result in nodes having no edges. Specifically, there are 20 ways to
distribute 3 edges in a 4 node network. Note that these 20 ways also include
all the possible combinations of 3 edges in a 3 nodes network, so just
counting the number of networks connecting at most N-1 is good. So here is the
routine: removing one node, how many combination can I make with the same
number of edges? The answer is simply the number of times I can distribute
L edges in a network of size N-1. In our example, as stated above, this is 20.
But we need to do that for &lt;em&gt;each&lt;/em&gt; node in the network, so there are actually
100 (5 times 20) combinations we need to remove. This left us with only 20
&quot;good&quot; networks.&lt;/p&gt;

&lt;p&gt;Let&#39;s wrap things up. If we call m(N) the mininal number of edges in a network
of N nodes, and M(N) the maximal number of edges in the same network, and C(X,L)
the number of ways to distribute L edges in X possible edges configurations,
then we can calculate the number of networks with N links and L edges for
which no node is unconnected. This is quite simply C(M(N),L)-N*C(M(N-1),L),
and we will call this R(N,L). You may not realize it yet, but this actually
quite cool. What does it means for complexity? Well, that   a network with
a given number of species will be more or less constrained in the diversity of
structure it can adopt, as a function of the number of interactions.&lt;/p&gt;

&lt;p&gt;It is actually easy to measure the amount to which a network is constrained.
Simply dividing R(N,L) by C(N,L) will give an idea of how difficult is is to
find a network with no free nodes given N and L. There are important
applications, like predicting the time needed to generate null models of network
structure. But also, we can ask how many &lt;em&gt;different&lt;/em&gt; networks we will be able to
generate for a given network size.&lt;/p&gt;

&lt;p&gt;I ran some simple tests using 10 nodes, and here is what happenned.&lt;/p&gt;

&lt;p&gt;First, the size of the &quot;network space&quot; is hump-shaped, which means that for
intermediate number of links, you have much more work to do if you want to
explore the possible configurations that your network can take. Things seems to
be &lt;em&gt;more&lt;/em&gt; complex (or at least have more potential for complexity) at
intermediate connectance values.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/netspacedistrib.png&quot; title=&quot;Figure 1&quot; alt=&quot;Figure1&quot; /&gt;
Note that the number of networks with no free nodes is, all things considered,
quite close to the whole network space, so you&#39;ll have to be quite unlucky
not to have all nodes connected. But how strong exactly is the constraint
on network structure? Let&#39;s measure 1 minus the ratio of networks having no
free nodes:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/netspaceconstraint.png&quot; title=&quot;Figure 2&quot; alt=&quot;Figure2&quot; /&gt;
Quite simply, it shows that when the networks are not strongly connected, you
have a lot of chance to pick at random a network in which nodes are not
connected. This has important consequences for the geenration of null models: it
is &lt;em&gt;extremely difficult&lt;/em&gt; to generate random networks based on large, sparsely
connected networks. You know what is large and sparsely connected? All
ecological networks. Yeah!&lt;/p&gt;

&lt;p&gt;So, it&#39;s time to wrap things up. First, networks have more potential for
complexity when the connectance takes on intermediate values. That&#39;s a cool
little piece of information with some ecological potential. Second, the space of
extremely connected, and extremely sparse networks, is small, so both are
extremely constrained. Finally, sparse networks are difficult to generate if you
want all species to be connected. In short, if you want 1000 null replicates,
you&#39;ll need to run a lot more trials than that.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The structure of natural bacteria-phage networks</title>
     <link href="http://timotheepoisot.fr/2013/05/30/bacteria-soil-networks/"/>
    <updated>2013-05-30T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Freedom! The final chapter of my thesis is now online on the website of &lt;a href=&quot;http://www.ecologicalprocesses.com/content/2/1/13/abstract&quot;&gt;&lt;em&gt;Ecological Processes&lt;/em&gt;&lt;/a&gt;. We use data form a field isolated bacteria-phage system to have a network approach of the specialist-generalist coexistence problem. The main result is that, even when controlling for phylogenetic dispersal of hosts, it&#39;s better to be a generalist. This signal is highly consistent across the five networks we studied, and goes in the way of recent results on coevolution: if you let a system coevolve long enough, it&#39;s expected that generalists will emerge.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Measuring realized network modularity</title>
     <link href="http://timotheepoisot.fr/2013/05/23/realized-modularity/"/>
    <updated>2013-05-23T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;A paper describing how to measure &lt;a href=&quot;http://f1000research.com/articles/2-130/v1&quot;&gt;realized network modularity&lt;/a&gt; just appeared online at &lt;em&gt;F1000 Research&lt;/em&gt;. It&#39;s currently waiting for reviewers. This is a short methodological note, to &quot;solve&quot; a problem I had when presenting the ouput of modularity analyses. Most of the time,  the values you get are between 0 and 1, but they are fairly difficult to make sense of. They&#39;re not probabilities that the network is different. They&#39;re statistics to some extent, but it&#39;s not clear what a critical value should be.&lt;/p&gt;

&lt;p&gt;I simply propose to count the number of links established by species from the same module, and by species from different modules. This give a very simple measure to understand: a network with a &lt;em&gt;realized&lt;/em&gt; modularity of 1 has no links between species from different modules. The other interesting thing is that you can use this measure as an &lt;em&gt;a posteriori&lt;/em&gt; criteria to decide which community partition to use, which can be useful when deciding on which module detection method you should pick.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Trophic complementarity and the BEF relationship in food webs</title>
     <link href="http://timotheepoisot.fr/2013/05/22/food-web-structure-ecosystem-functioning/"/>
    <updated>2013-05-22T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m really glad to announce that we (here meaning Dom Gravel, Nicolas Mouquet
and I), have a new paper in &lt;em&gt;Ecology Letters&lt;/em&gt;, about the biodiversity-ecosystem
functioning (BEF) relationship in food webs. In this paper, we show that
&lt;em&gt;trophic complementarity&lt;/em&gt; is a very good predictor of productivity in complex
ecosystems. You can &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/ele.12118/abstract&quot;&gt;go get the paper&lt;/a&gt;.
So what is trophic complementarity, and why is this result
important?&lt;/p&gt;

&lt;p&gt;The strength of the BEF theory is that the core mechanisms are intuitive and
elegant. You have the sampling effet, and functional complementarity. It boils
down to something extremely simple: if each species has a set of unique
functions, the more species you have, the more productive your ecosystem will
be, because the niche space is entirely filled. This theoretical framework is
extremely strong, and gave really good predictions in &lt;em&gt;competitive&lt;/em&gt; systems.
More complex (here meaning trophic) systems are an entirely different story.&lt;/p&gt;

&lt;p&gt;Previous models have been over-simplifying the structure of food webs, by
focusing only on extreme cases (low connectance/high connectance,
specialists/generalists). The situation of most empirical systems is
slightly more complicated (or slightly more continuous, anyway), and a new
approach was needed. Our core hypothesis was that the complementarity effect can
be expressed quite simply in food webs (and possibly other types of networks),
by just measuring the functional originality of the different species. In
simple terms, you can be different either because you have different
resources (that is the competitve BEF), or because different predators eat
you.&lt;/p&gt;

&lt;p&gt;In the paper, we try to measure this (which we call trophic complementarity) at differents level of complexity. The simple model, which was first used by &lt;a href=&quot;http://www.nature.com/nature/journal/v456/n7219/full/nature07248.html&quot;&gt;Chesson &amp;amp; Kuang&lt;/a&gt;, works extremely well with previous solutions for the competitive BEF published by &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.0030-1299.2004.12685.x/full&quot;&gt;Michel Loreau&lt;/a&gt;. We&#39;ve been &lt;em&gt;so&lt;/em&gt; very lucky that two important results from two different bodies of litterature were in agreement...&lt;/p&gt;

&lt;p&gt;The interesting part is also that in more complex systems, trophic complementarity is easy to approximate with measures of nestedness. This is (I think) an important results for empirical studies. It offers the possibility to have a rough expectation of how productive a system can be based on the knowledge of presence/absence interactions. There are good opportunities to explore in re-analysing the results of empirical BEF studies in which trophic interactions were not accounted for.&lt;/p&gt;

&lt;p&gt;As an amusing sidenote, when we were working on the revisions, Marc Cadotte and Caroline Tucker, at &lt;em&gt;EEB &amp;amp; Flow&lt;/em&gt;, wondered if most BEF discoveries were simply a &lt;a href=&quot;http://evol-eco.blogspot.ca/2013/01/reinventing-ecological-wheel-why-do-we.html&quot;&gt;reinvention of the wheel&lt;/a&gt;, which is (roughly verbatim) a comment made by one referee on the first version of our paper (it also prompted me to write &lt;a href=&quot;http://timotheepoisot.fr/2013/01/28/introductions-reinventing-ecological-wheel/&quot;&gt;this post&lt;/a&gt;).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Should code be reviewed?</title>
     <link href="http://timotheepoisot.fr/2013/05/21/should-code-reviewed/"/>
    <updated>2013-05-21T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Joppa and colleagues published a &lt;a href=&quot;http://www.sciencemag.org/content/340/6134/814&quot;&gt;policy forum&lt;/a&gt; in &lt;em&gt;Science&lt;/em&gt;, dealing with problems in the use of adoption of scientific software. Their paper quite nicely summarizes that the intrinsic quality of a software is not a deciding factor in its use, and that the community of scientists will be more influenced by who the early adopters are, and how well they are connected. In short, using a particular software quickly becomes a tradition, with few considerations for its merit, and worse, few consideration for the merit of following software (it happened to me once, that two referees asked me to do an outdated analysis because &quot;everyone else is doing this analysis&quot; - way to go).&lt;/p&gt;

&lt;p&gt;As Joppa and colleagues say quite early in the paper, &quot;the software code used to
do the science has not been formally reviewed&quot;. This is, indeed, one of the main
recommandations that Joppa and colleagues make: code should be reviewed, just as
the paper it is attached to. And it is obvious, but just saying that referees
will read the code, and all the problems will go away, is wishful thinking.
Should code be reviewed? Yes. Can it? Not quite yet, I think.&lt;/p&gt;

&lt;p&gt;I&#39;ve talked to five different people this morning about computer stuff. We
mentionned approximately ten different languages. Of these, I knew four well
(enough to write functional code in a reasonable amount of time), two
approximately (I can guess what a code does by reading it, most of the time),
and the others not at all. Sure, &lt;code&gt;R&lt;/code&gt; has become a &lt;em&gt;lingua franca&lt;/em&gt;
for ecologists and many other fields, but there are still other
languages out there. Think you can review my &lt;code&gt;python&lt;/code&gt; code?
I wouldn&#39;t even do it myself! What about very verbose languages
(&lt;code&gt;C&lt;/code&gt;), or things that should have gone extinct a long time ago but
for some reason are still around (&lt;code&gt;delphi&lt;/code&gt;)? We are collectively
using a multitude of languages. Now think about it in a review
perspective. How likely is it that you&#39;ll be able to (i)
understand, (ii) evalute, and (iii) assess the quality of a random
piece of code? If you&#39;re not in the top 90% programers in your field, then you&#39;re not likely to review the code properly.&lt;/p&gt;

&lt;p&gt;Joppa and colleagues also call for more widespread unit tests. Some languages have really easy way to write them (&lt;code&gt;python&lt;/code&gt;, for example). I&#39;m guilty of not using them, just as a lot of other people. And the reason is simple: ain&#39;t nobody got time for that! &lt;a href=&quot;http://www.nature.com/news/2010/101013/full/467753a.html&quot;&gt;Nick Barnes&lt;/a&gt; encouraged us to publish our computer code because it was &quot;good enough&quot;, and most of the time, our code is just that. Good &lt;em&gt;enough&lt;/em&gt; for the project we are currently working on. When I write a model of whatever ecological process to look at how it affects the relationship between two variables, I mostly don&#39;t think that people can use it to do something else. I write it as well as I can, and stupid-test it (does it behave the way my calculations tell me it should in some important yet simple cases?). Then I&#39;m done with it. But I don&#39;t write unit tests, and I don&#39;t adhere to any good practices of code quality. This is bad, we are (to a vast majority), bad people.&lt;/p&gt;

&lt;p&gt;It&#39;s true that most of what Joppa and colleagues discuss are big projects. The
&lt;code&gt;vegan&lt;/code&gt; and &lt;code&gt;bipartite&lt;/code&gt;, for example. And writing these big projects is the
&lt;em&gt;exception&lt;/em&gt;, not the rule. We are not trained to work on them, we don&#39;t know how
to behave, and it&#39;s not what we do most of the time! And for he very same
reason, we probably wouldn&#39;t know how to review it, either. So what is the solution?&lt;/p&gt;

&lt;p&gt;First, more open science. As I&#39;ve mentionned &lt;a href=&quot;http://timotheepoisot.fr/2012/01/06/science-age-social-coding/&quot;&gt;before&lt;/a&gt;, I&#39;m quite convinced that the ability to have other people read our code will increase the probability that we received feedback. Second, (still) more open science. Hearing that your program is flawed when you submit the paper is a terrible waste of time. &lt;a href=&quot;http://timotheepoisot.fr/2013/05/16/steal-my-paper/&quot;&gt;Put your papers on line when you write them&lt;/a&gt;, with the code you use, and ask people for input. It&#39;s better to hear that something is wrong soon, when you can still change it withouth going through a full rewrite, rather than at the end of the process. And finally, (one again) more open science. Make reviews (of code, but why stop there) public. If you detect a mistake in the code, explain where, how, whay, and what it does to the results. Help the &lt;em&gt;users&lt;/em&gt; of the software, not only the developpers. Also, when you spot a mistake, explain it so that other people will avoid it in the future.&lt;/p&gt;

&lt;p&gt;Now, enabling all of this requires massive training efforts. No more sending
code by email in &lt;code&gt;zip&lt;/code&gt; files. No more developping using closed systems that the
reviewers will not have access to. No mor &lt;code&gt;.exe&lt;/code&gt; files in supplementary
materials. Does it sound like a high standard? Good, because we should set high
standards for the science we create.So start putting in place training sessions
of computer litteracy, evangelize open source and social coding, and help
everyone move from &quot;perhaps code should be reviewed&quot; to &quot;we have the tools to do
this, let&#39;s go!&quot;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Remove indels from blast output</title>
     <link href="http://timotheepoisot.fr/2013/05/20/blast-remove-gaps/"/>
    <updated>2013-05-20T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;My wife recently mentionned to me that most of the errors introduced during 454 pyrosequencing were &lt;a href=&quot;http://www.retrovirology.com/content/10/1/18/abstract&quot;&gt;indels rather than point mutations&lt;/a&gt;. It may not sound like it, but it&#39;s kind of a big deal when measuring similarity between sequences, most likely when you try to do taxonomic identification by comparing to the best match of &lt;code&gt;blast&lt;/code&gt;. So to get a &quot;reliable&quot; estimate of the dissimilarity, a reliable strategy is most likely to remove the gaps.&lt;/p&gt;

&lt;p&gt;As doing it by hand would be, let&#39;s say, tedious, I started looking for a &lt;code&gt;biopython&lt;/code&gt; way to do it. As it turns out, despite the fact that the &lt;code&gt;biopython&lt;/code&gt; documentation is cryptic and baffling at some points, it turned out to be a great over-lunch coding project.&lt;/p&gt;

&lt;p&gt;I&#39;ve put the code up as a &lt;a href=&quot;https://gist.github.com/tpoisot/5613748&quot;&gt;gist&lt;/a&gt;. It would definitely benefit from being run in parallel (especially with millions of sequences), but if you want to quickly check out a few samples, it&#39;s not that slow (a few seconds per sequence, most of which are actually spent blasting).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Using make and pandoc for reproducible papers</title>
     <link href="http://timotheepoisot.fr/2013/05/18/make-pandoc/"/>
    <updated>2013-05-18T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I tend to use &lt;a href=&quot;http://johnmacfarlane.net/pandoc/&quot;&gt;&lt;code&gt;pandoc&lt;/code&gt;&lt;/a&gt; more and more to
write my papers. The syntax of markdown is ligthweight, doesn&#39;t get in the way
of my writing, and it&#39;s easy to export the text to almost any format you can
name afterward. The only issue I ran in is that I also like
&lt;a href=&quot;http://pgfplots.sourceforge.net/&quot;&gt;&lt;code&gt;pgfplots&lt;/code&gt;&lt;/a&gt; a lot for graphics, because they
come with the ability to update themselves at each compilation, when the data
are re-generated. It&#39;s quite important if you want to tweak som simulation
parameters, for instance. Using &lt;code&gt;pgfplots&lt;/code&gt; from within &lt;code&gt;pandoc&lt;/code&gt; can be done, but
the heavy syntax seems rather clumsy.&lt;/p&gt;

&lt;p&gt;So I started looking at what &lt;code&gt;gnuplot&lt;/code&gt; can do, and as it turns out, &lt;code&gt;gnuplot&lt;/code&gt; can do &lt;em&gt;a lot&lt;/em&gt;. Look at the &lt;a href=&quot;http://gnuplot.sourceforge.net/demo_cvs/&quot;&gt;demo gallery&lt;/a&gt; or the excellent &lt;a href=&quot;http://www.gnuplotting.org/&quot;&gt;gnuplotting&lt;/a&gt; if you want to see more. So anyway, I started looking for a way to make the whole process or generating data, getting them in figures, and then keeping the paper updated, as seemless as it &lt;em&gt;should&lt;/em&gt; be (because awesome technology should make our lives awesomely simple). Then I discovered &lt;code&gt;makefiles&lt;/code&gt;, and I think there&#39;s no coming back from that. The extremely impressive &lt;a href=&quot;http://bost.ocks.org/mike/make/&quot;&gt;Mike Bostock&lt;/a&gt; (if you are into data visualization, check his stuff out), gives good arguments about why you should use them. I spent a few minutes setting up an example, and I&#39;m deeply in love with the concept.&lt;/p&gt;

&lt;p&gt;Here it goes. Assume that you have a file for your paper, called &lt;code&gt;paper.md&lt;/code&gt;. You
need to get it into &lt;code&gt;paper.pdf&lt;/code&gt;. This &lt;code&gt;paper.md&lt;/code&gt; file needs a &lt;code&gt;fig1.png&lt;/code&gt; figure
to compile. &lt;code&gt;fig1.png&lt;/code&gt; is produced by &lt;code&gt;fig1.plt&lt;/code&gt;, a &lt;code&gt;gnuplot&lt;/code&gt; script, who will
read &lt;code&gt;data.txt&lt;/code&gt;, itself generated by &lt;code&gt;script.py&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;A pre-&lt;code&gt;make&lt;/code&gt; workflow would look like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;python script.py &amp;gt; data.txt
gnuplot fig1.plt
pandoc paper1.md -o paper1.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Incidentally, I used this type of files, usually called some variation of
&lt;code&gt;compile.sh&lt;/code&gt;, all the time. But as I discovered, you can make the whole process
&lt;em&gt;painless&lt;/em&gt;. and time saving, since you can only compile the parts that are
needed. How, you ask? Using a &lt;code&gt;makefile&lt;/code&gt;. For this simple example, the
&lt;code&gt;Makefile&lt;/code&gt; looks like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;makefile&quot;&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;paper.pdf&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;paper.pdf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;paper.md fig1.png script.py&lt;/span&gt;
  pandoc paper.md -o paper.pdf

&lt;span class=&quot;nf&quot;&gt;fig1.png&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;data.txt fig1.plt&lt;/span&gt;
  gnuplot fig1.plt

&lt;span class=&quot;nf&quot;&gt;data.txt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;script.py&lt;/span&gt;
  python script.py &amp;gt; data.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All &lt;code&gt;Makefile&lt;/code&gt;s look the same: on the first line, there is a &lt;em&gt;target&lt;/em&gt;, followed
by its &lt;em&gt;dependencies&lt;/em&gt;. Then, on the line below, are the &lt;em&gt;commands&lt;/em&gt;. Everytime
a dependency is also a target, then if the dependencies of this target have
changed, the dependency is rebuilt. OK that&#39;s not clear at all. If you change
&lt;code&gt;script.py&lt;/code&gt;, the next time you build &lt;code&gt;fig1.png&lt;/code&gt;, the files that &lt;code&gt;fig1.png&lt;/code&gt;
depend on that have &lt;code&gt;script.py&lt;/code&gt; as a dependency will be rebuilt. But see it the
other way around. If you just modified the text of your &lt;code&gt;paper.md&lt;/code&gt; file, then
there is no reason to re-build any of the figures or dataset. See? That&#39;s the
greatness of &lt;code&gt;make&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;all&lt;/code&gt; rule here is just having &lt;code&gt;paper.pdf&lt;/code&gt; as a dependency. So if I type
&lt;code&gt;make all&lt;/code&gt;, then if will go to the line starting by &lt;code&gt;paper.pdf&lt;/code&gt;, and work its
way from here. If I just need to see the figure to show it to a colleague, then
I have no need for the &lt;code&gt;pdf&lt;/code&gt;, and a simple &lt;code&gt;make fig1.png&lt;/code&gt; will do the job.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt; The command line is so great. &lt;code&gt;make&lt;/code&gt; is awesome. Being a nerd saves energy.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Steal my paper! (seriously, please, don't)</title>
     <link href="http://timotheepoisot.fr/2013/05/16/steal-my-paper/"/>
    <updated>2013-05-16T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;With Phil&#39;s &lt;a href=&quot;http://www.plosbiology.org/article/info%3Adoi%2F10.1371%2Fjournal.pbio.1001563&quot;&gt;paper&lt;/a&gt;
on preprints out, and the idea that writing manuscripts in the open
&lt;a href=&quot;http://www.scfbm.org/content/8/1/7/&quot;&gt;introduced&lt;/a&gt; by Karthik Ram, it&#39;s almost not
completely crazy to write research papers in an entirely open space, like
&lt;em&gt;github&lt;/em&gt; or &lt;em&gt;Google Docs&lt;/em&gt;. I&#39;m currently &lt;a href=&quot;https://github.com/tpoisot/&quot;&gt;doing it&lt;/a&gt;
(everything with &lt;code&gt;paper&lt;/code&gt; or &lt;code&gt;ms&lt;/code&gt; in the title of the repository is something not
yet published), and so are a few other people. And it&#39;s a good thing. It might
actually be the better way to disseminate research fast. Not to mention that
version controlling will help people studying scientists a great deal: you can
now have a real-time analysis of how a paper is made. It also increases
accountability, but see Karthik&#39;s paper for that.&lt;/p&gt;

&lt;p&gt;There is another benefit which has not been highlighted quite enough in my
opinion. Putting your papers in the open is a good way to attract comments, and
possibly collaborators. People can see what you are working on, and they&#39;ll be
able to assist if they feel like they will make a contribution. This has been
a major strength of the whole open source software movement, and there is no
reason that it will have opposite consequences in science (that&#39;s, again, my
sligthly idealistic opinion). Clearly I don&#39;t expect that any paper I put
out there will result in new, surprizing collaborations, with people I had no
previous connexions with (though it happened exactly this way for our &lt;a href=&quot;https://github.com/tpoisot/DataSharingPaper&quot;&gt;data sharing MS&lt;/a&gt;.
But the point is that it &lt;em&gt;can&lt;/em&gt; happen, and that would be really great.&lt;/p&gt;

&lt;p&gt;When I brought that up to some people, I&#39;ve had a common question in return:
what about cheaters? That&#39;s a legitimate question, and I hadn&#39;t thought much
about it before. There are two ways people could try to abuse this new, more
open system. The first one is outright theft. I fork your repository, remove
your name from the author list, put it in the acknowledgements, and submit the
paper somewhere. I&#39;m not sure how strongly it would be breaking the terms of the
&lt;code&gt;CC-BY&lt;/code&gt; licence. But it would break almost all of the unwritten conventions of
the academic word, and I don&#39;t think anyone will be foolish enough to destroy
its carreer in such a specatcular way. I&#39;m not sure that editors would
appreciate the move, either.&lt;/p&gt;

&lt;p&gt;Another form of cheating is more indirect: what if some people try to get
themselves involved in a majority of open papers, to inflate their publication
list? What if some poeple contribute to open papers, but keep their own papers
closed? Well, again, I&#39;m sure these people will be promtply identified, and
everyone will just ignore them. So clearly, I&#39;m not too worried about people
gaming the system (please don&#39;t prove me wrong). Will some people try? Probably.
Will they risk being alienated by the rest of their field for doing so? Almost
certainly. Does the risk of people cheating outweighs the benefits of more
openness? I don&#39;t think so. Plus, we barely have enough time to work on our own
papers anyway...&lt;/p&gt;

&lt;p&gt;Interstingly enough, a point I never heard is: what if &lt;em&gt;I&#39;m&lt;/em&gt; the bad guy? What
if I put my paper on &lt;em&gt;GitHub&lt;/em&gt;, people write me a nice paragraph of discussion,
and I don&#39;t give them (enoguh) credit? That&#39;s a problematic (and quite
interesting point). As much as the development of altmetrics, and the
opportunity to track the impact of datasets, is changing the way we think
about what is a scientific contribution, we still have aboslutely no rules
regarding authorship in an entirely open ecosystem. Do you think the same rules
than before should apply (assuming that, you know, we had these rules to begin
with...)? Is it OK to jump in a paper, make edits, and expect authorship if
these edits are significant enough? And what is &quot;significant enough&quot;? That&#39;s
some of the questions we&#39;ll have to think about along the way...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A C version of the Nicholson-Bailey model</title>
     <link href="http://timotheepoisot.fr/2013/05/06/nicholson-bailey-c/"/>
    <updated>2013-05-06T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;The Nicholson-Bailey model is a &lt;a href=&quot;http://en.wikipedia.org/wiki/Nicholson%E2%80%93Bailey_model&quot;&gt;well known&lt;/a&gt; model of host and parasitoid population dynamics.  It assumes that parasitoids will search a fraction of their habitat for hosts, and then kill them. Yes, it&#39;s brutal like that. There are a few fun things with this model. It&#39;s light in parameters (the single-patch version requires only three parameters), it&#39;s in discrete time (so it&#39;s easy to program), and it&#39;s classical put on a lattice (so it&#39;s a good way to program these kind of things).&lt;/p&gt;

&lt;p&gt;I wanted to test a few things, so I had to re-implement this model in space. My &lt;a href=&quot;https://gist.github.com/tpoisot/5528745&quot;&gt;first version&lt;/a&gt; uses python, but it&#39;s remarkably slow. So I decided to write the &lt;a href=&quot;&quot;&gt;model in C&lt;/a&gt;. Either the model is really easy to program, or I&#39;m getting good (I vote for the other solution, because I&#39;m sure my code is full of horrible things), but it was relatively easy to do. &lt;a href=&quot;https://gist.github.com/tpoisot/5528759&quot;&gt;Go get it&lt;/a&gt; and play around. The &lt;code&gt;GSL&lt;/code&gt; is required. To get it to run, you&#39;ll need to:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;mkdir grids
mkdir png
clang nb.c -o nb -lgsl -lgslcblas -O3 -DHAVE_INLINE
chmod +x nb
./nb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The parameter names are relatively easy to understand. &lt;code&gt;Lh&lt;/code&gt; and &lt;code&gt;Lp&lt;/code&gt; are the rate of increase of the host and parasite, &lt;code&gt;a&lt;/code&gt; is the proportion of space searched, and &lt;code&gt;dh&lt;/code&gt; and &lt;code&gt;dp&lt;/code&gt; are the dispersal rates. &lt;span class=&#39;margin&#39;&gt;I&#39;ve never quite understood the relevance of reflective boundaries for lattices of small sizes, unless you model what happens in your garden...&lt;/span&gt;Note, by the way, that the world is spherical, so if you reach the edge of the lattice, you emerge on the other side. Other than that, dispersal is strictly local: you disperse to your 8 neighboring cells, and you receive migrants from them as well, with equal probability for each neighboring cell. There is no long-range dispersal either.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;png&lt;/code&gt; folder is used by another script, reproduced below, whose job it is to (i) read the output files, and (ii) do a plot using &lt;code&gt;matplotlib&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sp&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;progressbar&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;uniq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Read all text file in grids/&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Output them all in png/&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;grid_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;./grids/&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;png_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;./png/&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grid_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;pbar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProgressBar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dirList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Update of the progressbar&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Timestep&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;SimTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Get the filenames&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;h_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grid_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;h_&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;.txt&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grid_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;p_&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;.txt&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Read the grids&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;h_grid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadtxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p_grid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadtxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prev_grid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p_grid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_grid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Output it as a png (host)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_grid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Greys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;nearest&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;h_&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;.png&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbox_inches&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tight&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Output it as a png (parasite)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_grid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Greys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;nearest&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;p_&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;.png&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbox_inches&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tight&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Output it as a png (prevalence)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Greys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;nearest&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;prev_&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;.png&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bbox_inches&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tight&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Save the aggregated infos&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SimTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SimTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p_grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savetxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;dynamics.txt&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;An example result would look something like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/nb-static.png&quot; title=&quot;output&quot; alt=&quot;Figure1&quot; /&gt;
But the fun part is that, with a few extra steps, you can have cool looking videos. I used &lt;code&gt;ffmpeg&lt;/code&gt; to do it. It&#39;s as simple as getting all of the files in the &lt;code&gt;png&lt;/code&gt; folder, and putting them together to have an animated, step-by-step output of the model:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
ffmpeg -qscale 5 -r 20 -b 9600 -i png/h_%05d.png host.mp4
ffmpeg -qscale 5 -r 20 -b 9600 -i png/p_%05d.png para.mp4
ffmpeg -qscale 5 -r 20 -b 9600 -i png/prev_%05d.png prev.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The C program is quite fast (500 steps with a 100x100 lattice can be done in just a few seconds), but the script to convert the text files in images is really slow. I&#39;m talking tens of minutes slow, so go make yourself a coffee. It&#39;s also extremely hungry in terms of memory, and as with all things Python, will eat up a whole CPU. But it&#39;s worth it! I&#39;ve uploaded an &lt;a href=&quot;http://www.youtube.com/embed/wE3x5QABBug&quot;&gt;example video&lt;/a&gt; if you want to see.&lt;/p&gt;

&lt;p&gt;And now... Back to doing whatever I had in mind with this model!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Data sharing and preprints in ecology</title>
     <link href="http://timotheepoisot.fr/2013/04/30/data-sharing-ecology/"/>
    <updated>2013-04-30T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m glad to announce that we (I, &lt;a href=&quot;http://rossmounce.co.uk/aboutme/&quot;&gt;Ross Mounce&lt;/a&gt;, and Dom Gravel), have put up a &lt;a href=&quot;http://figshare.com/articles/Moving_toward_a_sustainable_ecological_science_don_t_let_data_go_to_waste_/693745&quot;&gt;preprint about data sharing in ecology&lt;/a&gt; on &lt;em&gt;fig&lt;strong&gt;share&lt;/strong&gt;&lt;/em&gt;. The manuscript is under consideration at &lt;em&gt;Ideas in Ecology &amp;amp; Evolution&lt;/em&gt;. We try to make a valid point about why ecologists should share their data, how we can do it in practice, and the role that funding agencies and journals can play.&lt;/p&gt;

&lt;p&gt;And speaking of preprints, but also sure to check out Philippe&#39;s opinion piece on &lt;a href=&quot;http://figshare.com/articles/The_case_for_open_preprints_in_biology/655710&quot;&gt;preprints in biology&lt;/a&gt;, which should appear shortly in &lt;em&gt;PLoS Biology&lt;/em&gt;. We try to understand why biologists have not adopted the preprint culture as widely as other fields (though this is changing, fortunately).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Learning how to code (in ecology)</title>
     <link href="http://timotheepoisot.fr/2013/04/12/learn-code-ecology/"/>
    <updated>2013-04-12T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;A few days ago, I received an email asking about pointers on how to program in
ecology. I&#39;m not sure I&#39;m the best person to ask, but writing the answer, I
realized that there might be potential to share tips with other people. Now, a
little bit of foreword. I come from a very empirical background. My undergrad
studies are in genetics and immunology, and up until the end of my Masters, I
have been spending time either in the field or in the lab. So learning how to
program came rather late in my studies. It all started when my PhD advisor gave
me a PDF of a paper by &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/15976021&quot;&gt;Weitz and colleagues&lt;/a&gt;, and asked me to reprogram the model to use as a basis for &lt;a href=&quot;http://rspb.royalsocietypublishing.org/content/early/2011/06/02/rspb.2011.0826.full&quot;&gt;a future paper&lt;/a&gt;. All of a sudden, I had no choice but to learn how to program. Prior to that point, my experience with R was mostly limited to doing statistical analysis and figures. I had a little bit of experience with PERL and bioinformatics, but no knowledge relatable to programming in ecology. I was, all in all, fairly illiterate (idem for maths, but that will be left to another post eventually). So a few years down the road, there are a few pieces of advice I can share with those wanting to start programming.&lt;/p&gt;

&lt;h1&gt;Practice&lt;/h1&gt;

&lt;p&gt;Whenever I have (or want) to learn a new language, I always try to start writing. As when learning a new language (the kind people, not machines, use to communicate), immersion is probably the best way to go. As an ecologist, Lotka-Volterra models are my favorite. I also try to do some spatial things, like metacommunities. The good thing with these models are that you know the results. So you can check whether your code is giving you the expected results. And you&#39;ll learn the bases as you go.&lt;/p&gt;

&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;Maynard Smith, J. &lt;a href=&quot;http://linkinghub.elsevier.com/retrieve/pii/S0169534702025545&quot;&gt;Evolutionary Genetics&lt;/a&gt;. Oxford University Press, 2002.&lt;/span&gt;A &lt;em&gt;really&lt;/em&gt; good book to do this is &lt;em&gt;Evolutionary genetics&lt;/em&gt; by John Maynard-Smith. Not only is it a good introductory book for evolutionary biology, but each chapter comes with a variety of problems that you can solve by hand and through programming. I used these to learn R, Python, and C. I plan to go back at them whenever I have to learn a new language (also because it&#39;s a good excuse to re-read through the book!). Of course any book with problems will work in the same way.&lt;/p&gt;

&lt;p&gt;I&#39;ve also greatly benefited from teaching a class in Population and Community Biology this fall. I wrote the models for each class in Python, from scratch, every week. It was a really good practice, because I had to write things differently from what I do in research. Trying to set some time apart every week to write simple things did get me a long way. Also, it will help you generate a large base of code, which you&#39;ll re-use over time.&lt;/p&gt;

&lt;h1&gt;Read some code&lt;/h1&gt;

&lt;p&gt;Writing is good, but I also learned a lot by reading through code by other people. I was lucky enough to have people send me complete code to reproduce their papers, which was really interesting when I was trying to change their model. Do not hesitate to ask people in your department to have a look at their code. Chances are, they are working on subjects relatively close to yours, and they will be able to show you some interesting things.&lt;/p&gt;

&lt;p&gt;Now, &lt;a href=&quot;http://timotheepoisot.fr/2012/01/06/science-age-social-coding/&quot;&gt;as I mentioned before&lt;/a&gt;, with the increased use of &lt;em&gt;GitHub&lt;/em&gt; and other social coding sites, you&#39;ll have access to a lot of code. Want to know one way to do Lotka-Volterra predator-prey in Python? &lt;a href=&quot;https://github.com/dmedvinsky/lotka-volterra/blob/master/lotka-volterra.py&quot;&gt;Just ask&lt;/a&gt;. You can get different examples, see what you understand, what seems natural for you, and start adapting from there. Social coding will help you, do it!&lt;/p&gt;

&lt;h1&gt;Have people read your code&lt;/h1&gt;

&lt;p&gt;Do not be ashamed of your code. You can show it around to your colleagues or to your advisor. At this point, it&#39;s time to make a short parenthesis. &lt;em&gt;Which language should you choose&lt;/em&gt;? There are two things I considered. First, how many people &lt;em&gt;around you&lt;/em&gt; use it? How many meters do you have to walk until you reach the office of someone good enough to help you with the problems you will run into? Alternatively, how big is the user base overall, and in your field? R and Python tend to score high on these two points among ecologists and evolutionary biologists, so you may be able to get help. The second point is, how suited is the language to what you are doing. Mostly statistics? Keep with R. Mostly simulations? Go C! And so on. Try to &lt;em&gt;ask&lt;/em&gt; people what they are using. The more languages you know, the easier it seems to pick up a new one. But if you want to start programming with very little background, there is a learning curve, and you will want to maximize (i) the opportunities to get help and (ii) the fit of the language to your needs.&lt;/p&gt;

&lt;p&gt;Back on tracks: have people read your code. You can send them by email, but you can also meet in person and discuss it line by line. If you are lucky enough to have a skilled programmer around, you will receive great feedback on how to do things faster, more efficiently, and how to use little tricks that only your language of choice has. You will learn a lot, and you will benefit a lot from the experience. Don&#39;t worry about your code looking bad, we all were there at some point; and frankly I might still be there, and I don&#39;t care because I&#39;m an ecologist, not a programmer.&lt;/p&gt;

&lt;h1&gt;Read some books&lt;/h1&gt;

&lt;p&gt;I have a bookshelf dedicated to programming literature. Some language references, some practical textbooks, some devoted to really particular examples, and not all of them are in languages I use. It&#39;s a good thing to have a few books at hands, because you&#39;ll be able to see how (sometimes even why, but don&#39;t get your hopes up...) things are done. And you&#39;ll see how a particular problem can be tackled, even though the code is not in a language you use.&lt;/p&gt;

&lt;p&gt;I started reading only after I was done experimenting. Truth be told, I never read an Introduction to R type of book, same for Python. I have a few of them at home, and I open them once in a while to check things. Whether to read a lot or not is a matter of personal taste, but I found that overtime, practice has more benefits than reading. If you do want to read, be sure to actually type the code at the same time, and experiment with it. It helped me a lot, because I learned how to adapt general knowledge to my particular needs.&lt;/p&gt;

&lt;h1&gt;Get a good editor&lt;/h1&gt;

&lt;p&gt;OK, so now you&#39;re done learning how to code. One of the most important points is, &lt;em&gt;get yourself a kick-ass code editor&lt;/em&gt;. I absolutely hate Eclipse, RStudio, and other big, bloated environment for serious development. I am currently trying to learn &lt;code&gt;vim&lt;/code&gt;, but be serious, who has time for that? I suspect I only want to learn it for the additional nerd credibility, because I&#39;m not into comic books enough, so I have to compensate somehow. I use &lt;a href=&quot;http://timotheepoisot.fr/2013/01/22/selection-sublime-plugins/&quot;&gt;&lt;em&gt;Sublime Text 2&lt;/em&gt;&lt;/a&gt; and a lot of packages, and I&#39;m really happy with it. The point is, get something you are comfortable with. Chances are you&#39;ll be spending a lot of time looking at a screen with a blinking cursor, so you might as well want to call it home. Whoah, that almost sounds sad, does it? And an additional advice. Become extremely familiar with your terminal. The little matrix thingy that Windows people don&#39;t know exist? Turns out it&#39;s important. The more you use code, the more you&#39;ll make your editor and terminal work together, and that will increase your productivity.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Elsevier acquired Mendeley. It's not as bad as I thought.</title>
     <link href="http://timotheepoisot.fr/2013/04/09/mendelsevier/"/>
    <updated>2013-04-09T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Mendeley was &lt;a href=&quot;http://blog.mendeley.com/start-up-life/team-mendeley-is-joining-elsevier/&quot;&gt;recently acquired by public enemy Elsevier&lt;/a&gt; in a puzzling move. Some of you may remember that I&#39;ve announced that, &lt;a href=&quot;http://timotheepoisot.fr/2013/01/19/elsevier-mendeley-out/&quot;&gt;should this acquisition happen, I&#39;ll be out of here&lt;/a&gt;. Actually, I&#39;ve switched to Zotero a while back and never ever looked back. But still. &lt;a href=&quot;http://timotheepoisot.fr/2013/01/19/elsevier-mendeley-out/#comment-857798908&quot;&gt;Mr. Will Gunn himself&lt;/a&gt; asked me to do a follow-up post, on the basis that it&#39;s not as bad as I feared. And as much as I am pained to admit it, that is entirely correct. The acquisition of Mendeley by Elsevier is not as bad as I thought.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;It&#39;s way worse&lt;/strong&gt;. Hey Mendeley, do you seriously expect that we are going to take the sale of our usage data to Elsevier with a smile, because of some PR speak, and an attempt to mitigate the reactions on twitter? Do you think &lt;em&gt;anyone&lt;/em&gt; will be fooled by the same usual litany of &quot;But we are bringing value to the user&quot;? Let&#39;s face it, if you sold out to Elsevier, you are also going to turn a profit on the user data. It takes a lot of nerve to go on twitter and the blogs, and say that everything is fine, after that.&lt;/p&gt;

&lt;p&gt;I stand by my initial reaction on twitter:&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p&gt;Oh fuck you! Fuck you! &lt;a href=&quot;http://t.co/ewGmbYp3yG&quot; title=&quot;http://blog.mendeley.com/start-up-life/team-mendeley-is-joining-elsevier/&quot;&gt;blog.mendeley.com/start-up-life/…&lt;/a&gt;&lt;/p&gt;&amp;mdash; Tim (@tpoi) &lt;a href=&quot;https://twitter.com/tpoi/status/321432025691197440&quot;&gt;April 9, 2013&lt;/a&gt;&lt;/blockquote&gt;


&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;


&lt;p&gt;Seriously, Mendeley. Selling out to Elsevier is bad. Don&#39;t make it worse than it is by thinking that your userbase will fall for your PR speech. Most of the people  talked to this morning will not fall for that, and felt really insulted by your constant reinsurance that you will change the world for the better now. Not everything is shiny. But thanks for the reminder of a harsh reality. In the business of science, scientists are the only one still not making a profit. I thought we were the smart guys...&lt;/p&gt;

&lt;p&gt;PS: If you want to leave Mendeley for good, just go &lt;a href=&quot;https://www.mendeley.com/account/details/&quot;&gt;here&lt;/a&gt;, and click on the link at the very bottom, called &lt;em&gt;Delete my account&lt;/em&gt;. Don&#39;t forget to tell them why.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Is E.O. Wilson wrong about maths?</title>
     <link href="http://timotheepoisot.fr/2013/04/07/wilson-maths/"/>
    <updated>2013-04-07T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;E.O. Wilson recently published an editorial entitled &lt;a href=&quot;http://online.wsj.com/article/SB10001424127887323611604578398943650327184.html&quot;&gt;&quot;Great scientists don&#39;t need math&quot;&lt;/a&gt; in the &lt;em&gt;Wall Street Journal&lt;/em&gt;. Jeremy Fox wrote &lt;a href=&quot;https://dynamicecology.wordpress.com/2013/04/07/e-o-wilson-vs-math/&quot;&gt;a great rebuttal&lt;/a&gt; of it, which you should certainly read as well.&lt;/p&gt;

&lt;p&gt;In short, Wilson&#39;s argument is that most of great science is the work of intuition. In Jean Cocteau&#39;s words, science is the confirmation of instinct&#39;s discoveries. And in this perspective, math literacy is not needed, because it&#39;s only a boring formality, to confirm what the &quot;great minds&quot; have been thinking. To some extent, the point is valid - the point that intuition is important, that is. Feyerabend emphasized that instinct is important, and that no great breakthrough comes from blindly following the scientific method (which is certainly debatable). But for Descartes (probably in the &lt;em&gt;Rules for the direction of mind&lt;/em&gt;), there is the &quot;obvious intuition and the necessary deduction&quot;. Given the importance he gives to &quot;obvious intuition&quot;, Wilson writes that a good level of mathematical literacy is not needed, and going in the field, checking stuff out, and developing an &quot;intuition&quot; for it should be enough.&lt;/p&gt;

&lt;p&gt;Reading this text, I was immediately reminded of this piece by &lt;a href=&quot;http://timotheepoisot.fr/2012/08/13/models-are-useless/&quot;&gt;Ferdinando Boero&lt;/a&gt;, about the uselessness of models in ecology. Coming from Wilson, which is a clear authority figure, this point of view can be much more damaging.&lt;/p&gt;

&lt;p&gt;First, I&#39;m even surprised this text was written by Wilson. He&#39;s an outstanding scientist, no doubt. And he reached this reputation because of its intuition, in part, but also because they have been mathematical expressed. &lt;span class=&#39;margin&#39;&gt;MacArthur, R.H. &amp;amp; Wilson, E.O. (2001). The Theory of Island Biogeography. Princeton University Press.&lt;/span&gt;As far as I can tell, Mac Arthur and Wilson&#39;s &lt;em&gt;Theory of Island Biogeography&lt;/em&gt; was so successful because its mathematical expression allows one to do a lot of work with it. This mathematical formulation is not purely a technical comment on the theory. It&#39;s part of it, and has no less value than the intuition giving rise to it. Would the TIB be so successful today if not for the ability to (i) test and (ii) expand it &lt;em&gt;because it can be mathematically expressed&lt;/em&gt;? I guess not. Would this theory even had a impact &lt;em&gt;at all&lt;/em&gt; if ecologists stopped, all of sudden, caring about understanding math?&lt;/p&gt;

&lt;p&gt;Second, this text can do a lot of damage to students. They now have an authority figure to back up their animosity with maths. I spent the fall session teaching an intro to population biology class, and it was obviously based on a mathematical understanding of population dynamics. The students were not happy with it, because they see ecology as an essentially field-based science. Perhaps it&#39;s a local sampling bias, but the students in my class enjoyed going outdoors looking at stuff much more than understanding Lotka-Volterra equations, and (I suspect) viewed it as a higher form of science. The last thing needed is a formidable scientist like Wilson entertaining their illusion that it&#39;s OK to be mathematically illiterate, and that mathematically expressing your intuition is a technical point best left to the egg-heads in the math department. It&#39;s even more insulting that Wilson exhorts students with a poor math background to go specifically in biology or ecology. It&#39;s just appalling.&lt;/p&gt;

&lt;p&gt;Third, the title of the piece is misleading. If you were a great scientist, would you not have to use maths? That&#39;s a really bold claim to do, especially in ecology. Field work and data are important, and people with the knowledge (and yes, intuition) to explain these data &lt;em&gt;are&lt;/em&gt; important, that much is certain. But having the ability to either express these intuitions as models, or to manipulate these models to &lt;em&gt;test hypotheses&lt;/em&gt; is not minor-league science. &lt;span class=&#39;margin&#39;&gt;Lawton, J. (1999). Oikos, 84, 177–192.&lt;/span&gt;Ecology has been criticized as a science of examples, a collection of anecdotes with no discernible laws or patterns. The last thing we need is to reinforce the idea that it&#39;s more important to just have the intuition of processes.&lt;/p&gt;

&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;Levin, S.A. (2012). Interface Focus, 2, 141–143. &lt;a href=&quot;http://dx.doi.org/10.1098/rsfs.2012.0006&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt;It&#39;s sad that within six months, we can have a great piece by Simon Levin calling for a tighter integration between theory and data, and this opinion. I&#39;m hoping that the students will not read too much into this text. The level of mathematical literacy needed now is not high. High-school mathematics should be enough to make you able to read your way through 90% of ecological models (it won&#39;t be easy, but it&#39;s doable). I&#39;ve actually managed to become a theoretician of sorts, after a decade being a straight C student in maths. Developing the ability to go from your intuition to a formal expression of it, through mathematics or algorithmic, is an invaluable competence to have. The level of math literacy needed is not high. It&#39;s not too much. It&#39;s nothing to complain about.&lt;/p&gt;

&lt;p&gt;A while back, Fred Barraquand and some other INNGE members conducted a survey of &lt;a href=&quot;http://www.innge.net/?q=node/158&quot;&gt;the opinion of ecologists about their quantitative training&lt;/a&gt;. The paper is on its way, so I&#39;ll have more to share about it later (hopefully!). But without spoiling too much: ecologists (practising, professional ecologists, &lt;em&gt;i.e.&lt;/em&gt; faculty, post-doc, and grad students) are not happy with their math background. They would like to have more of it, both in terms of modelling and statistical analysis. So don&#39;t give Wilson&#39;s piece too much credit. It&#39;s just its own personal opinion, and from what we&#39;ve learned surveying the field, it&#39;s an outdated opinion, people now see math and quantitative work as a key tool in our science.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>High-throughput sequencing and community ecology</title>
     <link href="http://timotheepoisot.fr/2013/03/12/ngs-community-ecology/"/>
    <updated>2013-03-12T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;High-throughput sequencing (let&#39;s abbreviate it as HTS), the ability to generate millions of sequences for a relatively low cost and effort, can make a huge difference in community ecology and biogeography. Think about it this way: for a few days of work, you can get a really exhaustive sampling of the diversity, with measures of relative abundance. I&#39;m currently using 454 pyrosequencing in a project, and when I started reviewing the literature, I was stricken by the fact that there is a huge gap between what HTS &lt;em&gt;could&lt;/em&gt; do, and what it&#39;s used for.&lt;/p&gt;

&lt;p&gt;These methods are massively used in microbial ecology, but surprisingly they have been confined to very broad topics, like &lt;em&gt;biodiversity&lt;/em&gt; or &lt;em&gt;ecology&lt;/em&gt;. Indeed, a quick bibliometric analysis using different fields of ecological research, in association with 454 pyrosequencing, gave interesting results:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/hts-bibliometrics.png&quot; title=&quot;Bibliometric analysis&quot; alt=&quot;Figure1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Clearly, there is some potential to look at exciting research questions in community ecology and biogeography, but except for &lt;em&gt;biodiversity&lt;/em&gt; and &lt;em&gt;ecology&lt;/em&gt;, most ecological subjects seem to be relatively confidential in the HTS literature. At the same time, we were discussing various papers related to the subject, about how we can increase our knowledge of diversity with various molecular methods. So it seems that there is an interest in ecologists using these methods, but we can&#39;t still feel it in the literature. Why?&lt;/p&gt;

&lt;p&gt;Well, the environmental microbiology literature can be difficult to get into if you&#39;re not familiar with the field. In part because it&#39;s really technical, and in part because some things are called differently by different peoples. On the other hand, most of the ecological theory was not developped with microbes in mind. And there&#39;s &lt;a href=&quot;http://oikosjournal.wordpress.com/2011/06/10/objections-to-microcosms-in-ecology-and-their-answers/&quot;&gt;still a stigma about doing ecology with anything smaller than a &lt;em&gt;Daphnia&lt;/em&gt;&lt;/a&gt;. So in short, there is a communication problem between two fields. And that&#39;s too bad, because in the overlap between these fields, there is some truely exciting science to be done.&lt;/p&gt;

&lt;p&gt;So we (meaning me, my beloved wife and my boss) set our minds on writing a paper, whose goal was to present high-throughput sequencing in a way that would be appealing to ecologists. &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1002/ece3.508/abstract&quot;&gt;It is now online at &lt;em&gt;Ecology &amp;amp; Evolution&lt;/em&gt;&lt;/a&gt;. The structure of it, and to some extent the tone, was greatly inspired by &lt;a href=&quot;http://doi.wiley.com/10.1111/j.1600-0706.2009.17557.x&quot;&gt;an earlier paper by Jerald Johnson&lt;/a&gt;, berating molecular ecologists for their lack of attention to ecological ideas. Not that we think that blame should be attributed to anyone in the fact that HTS is not widely used by ecologists, but the structure of the paper was brilliant: let&#39;s present &lt;em&gt;ecological questions&lt;/em&gt;, and then discuss how the method brings us closer to an asnwer.&lt;/p&gt;

&lt;p&gt;I think we did a good job of this. Rather than focusing on the methodological details, we provide a &lt;em&gt;conceptual&lt;/em&gt; approach to the use of HTS in community ecology and biogeography. This paper is intended to be a gentle introduction to the field. If you are familiar with the litterature, then you probably won&#39;t learn anything new. But if you are interested by the methods, and want to use them, then there might be things for you in the paper. Here is the abstract:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;High-throughput sequencing is becoming increasingly important in microbial ecology, yet it is surprisingly under-used to generate or test biogeographical hypotheses. In this contribution, we highlight how adding these methods to the ecologist toolbox will allow the detection of new patterns, and will help our understanding of the structure and dynamics of diversity. Starting with a review of ecological questions that can be addressed, we move on to the technical and analytical issues that will benefit from an increased collaboration between different disciplines.&lt;/p&gt;&lt;/blockquote&gt;
</content>
  </entry>
  
  <entry>
     <title>A d3.js alternative to stacked bar charts</title>
     <link href="http://timotheepoisot.fr/2013/02/18/stacked-barcharts-d3/"/>
    <updated>2013-02-18T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Following yesterday&#39;s post on &lt;a href=&quot;http://timotheepoisot.fr/2013/02/17/stacked-barcharts/&quot;&gt;an alternative to barcharts&lt;/a&gt;, I decided to write an implementation of this graph in &lt;code&gt;D3.js&lt;/code&gt;. The more I play around with it, the more I like it. As it turned out, it was fairly easy, so I&#39;ll &lt;a href=&quot;https://gist.github.com/anonymous/4982438&quot;&gt;share the code as a gist&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For this particular example, I assume that the data are in a matrix, in &lt;code&gt;csv&lt;/code&gt; format, with sites as the first row, and species abundances in columns. I also assume that the abudances were normalized between 0 and 1. The file I used to generate the example below is:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;site , spa  , spb  , spc  , spd , spe 
a    , 1    , 0.4  , 0.2  , 1.0 , 0.2 
b    , 0.9  , 0.7  , 0.1  , 0.4 , 0.1 
c    , 0.2  , 0.8  , 0.05 , 0.7 , 0.05
d    , 0.1  , 0.81 , 0.07 , 0.1 , 0.12
e    , 0.01 , 0.82 , 0.09 , 0.6 , 0.15
f    , 0.01 , 0.75 , 0.23 , 0.3 , 0.25
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The end result is as follows:&lt;/p&gt;

&lt;div class=&#39;stackbardemo barplot d3&#39;&gt;&lt;/div&gt;


&lt;!-- stackbardemo.csv --&gt;


&lt;script type=&quot;text/javascript&quot; src=&quot;/data/stackbardemo.js&quot;&gt;&lt;/script&gt;


&lt;p&gt;Generating the small axes on the left was the most tricky part, and I used a probably sub-optimal way to do it:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
       &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;temp_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;linear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;rangeRound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;YMax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;YMax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;YMax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;OffSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;temp_yAxis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;temp_y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;orient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;left&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ticks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tickFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;.1s&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;g&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;class&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;y axis&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;temp_yAxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So if any one here is more knowledgeable in &lt;code&gt;javascript&lt;/code&gt; than I am, I&#39;d be really interested in finding a way to do without the &lt;code&gt;forEach&lt;/code&gt; part.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>An alternative to stacked bar charts</title>
     <link href="http://timotheepoisot.fr/2013/02/17/stacked-barcharts/"/>
    <updated>2013-02-17T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I hate stacked bar charts. I see them in so many papers, using the awful Excel default options, and I hate them. I feel them visually unappealing, confusing, and extremely inefficient at displaying information. It&#39;s almost impossible to compare the size of two bars without measuring them, which means that they carry less information than a good old table. So I was looking for alternatives to them. Here is the code I ended up with.&lt;/p&gt;

&lt;p&gt;First let&#39;s load a few packages, and generate some random abundance data. Let&#39;s imagine that we have 10 sites, and we sample 20 species.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;RColorBrewer&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

Abund &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; round&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;matrix&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;runif&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;nc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
Abund &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Abund&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;max&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; LETTERS&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;nrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt;
colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; letters&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;ncol&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt;

pal &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; colorRampPalette&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;brewer.pal&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Paired&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))(&lt;/span&gt;nrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will give us a site/abundance matrix. The next step is to create a plot with nothing in it:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;par&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;las&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
X &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;nrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
Y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;ncol&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
image&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;Y&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;white&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;axes&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;bty&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;It&#39;s easy to make it so that the width of each sub-plot is proportional to the relative abundance of each species.&lt;/span&gt;Then, for each row/line (and I&#39;m aware this is not optimized at all), we will draw a vertical bar. Each taxon (&lt;em&gt;i.e.&lt;/em&gt; each column in our graph) will have its own sub-plot. The size can be fixed, or equal. But this allows comparison of species abundances across dates.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;&lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ro &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;nrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)){&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;co &lt;span class=&quot;kr&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;ncol&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)){&lt;/span&gt;
        rect&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ro&lt;span class=&quot;m&quot;&gt;-0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; co&lt;span class=&quot;m&quot;&gt;-0.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ro&lt;span class=&quot;m&quot;&gt;-0.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;ro&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;co&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; co&lt;span class=&quot;m&quot;&gt;+0.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;border&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;pal&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;ro&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, let&#39;s add reference lines for each species, and the site/species names on axes:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;abline&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;X&lt;span class=&quot;m&quot;&gt;-0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;darkgrey&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;lwd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
axis&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;at&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;ncol&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;labels&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
axis&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;at&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;nrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;labels&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Abund&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;col&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This gives the final result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/stackedbar.png&quot; title=&quot;bar chart&quot; alt=&quot;Figure1 - grouped bar chart&quot; /&gt;
I find it much easier to eyeball the variation of species abundance across sites. And if instead of sites you have dates, then by reading each column, you can get and idea of the population dynamics (which is usually impossible to do for stacked bar charts, except for the bottom series). This is far from perfect, but that will do the job for exploratory work.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Estimating edges contribution to network properties</title>
     <link href="http://timotheepoisot.fr/2013/02/13/edges-contribution-modularity/"/>
    <updated>2013-02-13T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I had so much fun writing the previous post about how it is possible to measure &lt;a href=&quot;2013/02/12/species-contribution-modularity/&quot;&gt;nodes contribution to network properties&lt;/a&gt; that I wanted to see what happens when you remove edges. Also, I spent two hours this afternoon playing with &lt;a href=&quot;http://d3js.org/&quot;&gt;&lt;code&gt;D3.js&lt;/code&gt;&lt;/a&gt;, and I wanted to put what I&#39;ve learnt in practice.&lt;/p&gt;

&lt;p&gt;What I want to do is remove each &lt;em&gt;edge&lt;/em&gt;, and see how it affects modularity. This is, once again, really easy to do in &lt;code&gt;networkx&lt;/code&gt;. We&#39;ll just write a function similar to &lt;code&gt;removeNode&lt;/code&gt;, and add the possibility to keep the nodes with no links, or to remove them. By default, I&#39;ll consider that any node with no remaining edge is removed.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;removeEdge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nozero&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DiGraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_nodes_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_edges_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove_edges_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nozero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Isolated&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;degree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove_nodes_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Isolated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To get the contribution of each edge to modularity, it&#39;s simple to just adapt the one-liner from the previous post into:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;delta_mod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getModularity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;removeEdge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;The ranking method I use (&lt;code&gt;rankdata&lt;/code&gt; in &lt;code&gt;scipy&lt;/code&gt;) averages the rank of tied elements. So that explains why the points are not evely spaced.&lt;/span&gt;OK, so let&#39;s see what it looks like:&lt;/p&gt;

&lt;div class=&#39;edgecontrib scatterplot d3&#39;&gt;&lt;/div&gt;


&lt;!-- edgecontrib-rank.tsv --&gt;


&lt;script type=&quot;text/javascript&quot; src=&quot;/data/edgecontrib-scatter.js&quot;&gt;&lt;/script&gt;


&lt;p&gt;The values of &amp;Delta; are low, but the message is simple: most edges, when removed, make modularity &lt;em&gt;decrease&lt;/em&gt;. For the next step, it can be cool to visualize &lt;em&gt;where&lt;/em&gt; in the networks these nodes are. &lt;code&gt;D3.js&lt;/code&gt; is able to read &lt;code&gt;JSON&lt;/code&gt; files to plot them as networks. So we just need to write a quick and dirty converter from , &lt;code&gt;networkx&lt;/code&gt; to &lt;code&gt;JSON&lt;/code&gt;, and tweak &lt;a href=&quot;http://bl.ocks.org/4062045&quot;&gt;this example&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;And it&#39;s &lt;a href=&quot;2012/11/23/how-to-represent-networks/&quot;&gt;a good idea&lt;/a&gt; to use &lt;code&gt;JSON&lt;/code&gt; to represent networks...&lt;/span&gt;This is so quick and dirty that I won&#39;t reproduce it here, but I ended up with a &lt;code&gt;JSON&lt;/code&gt; file containing the edges, and the nodes. For each node, the module it belongs to is known. For each edge, its contribution to modularity is known. What remains to do is to plot everything, thanks to the power of &lt;code&gt;D3.js&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&#39;edgecolor network d3&#39;&gt;&lt;/div&gt;


&lt;!-- edgecontrib-rank.tsv --&gt;


&lt;script type=&quot;text/javascript&quot; src=&quot;/data/edgecontrib-network.js&quot;&gt;&lt;/script&gt;


&lt;p&gt;In this plot (move the nodes around!), the red links decrease modularity when removed, and the blue links increase it. The color of the nodes reflect which module they belong to. A quick eyeballing of the graph shows that blue links are established between nodes sharing different modules. Which makes sense, as if you disconnect modules, you further increase modularity. It may look good, but it&#39;s not rocket science!&lt;/p&gt;

&lt;p&gt;In any case, I&#39;m quite happy about the whole thing. First, it&#39;s super straightforward to remove edges/nodes with &lt;code&gt;networkx&lt;/code&gt;, and to measure how it affects network structure. Second, it&#39;s fast enough even on networks of a respectable size. And finally, this is perhaps the biggest revelation of the day: it&#39;s &lt;em&gt;easy&lt;/em&gt; to use &lt;code&gt;D3.js&lt;/code&gt;. It may not seem like much, but the two figures in this blog post are generated &lt;em&gt;from the original data&lt;/em&gt;. So if I want to re-generate the data, the figures will change as well. There is even more potential when creating webpages for projects, so I&#39;ll look more into that.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Estimating node contribution to network properties</title>
     <link href="http://timotheepoisot.fr/2013/02/12/species-contribution-modularity/"/>
    <updated>2013-02-12T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m currently exploring a large network dataset for a project, and one of the things I want to do is estimate the contribution of each node to emerging networks properties. For example, if your network has an important modularity, which nodes are the most responsible for it? I&#39;ll just detail how it possible to get this information quickly using &lt;code&gt;networkx&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;h4&gt;Warning!&lt;/h4&gt;
I&#39;m just using this post to take notes on code I&#39;m currently working on.
&lt;/div&gt;


&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;Saavedra et al. &lt;em&gt;Nature&lt;/em&gt; &lt;strong&gt;478&lt;/strong&gt; &lt;a href=&quot;http://dx.doi.org/10.1038/nature10433&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt;Saavedra and colleagues proposed a method which is based on the randomization of the interactions of each species in the network. In a nutshell, to measure the contribution of a node to a network metric, you need to shuffle its interactions, and measure the difference between the original and shuffled network. This makes a whole lot of sense, and has the advantage of keeping size and connectance constant. But in my particular case, I&#39;m more interested in measuring what happens when a node is lost, and how it affects the structure of the network. I&#39;ll show how to do that in &lt;code&gt;python&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Let&#39;s set up our environment. We need &lt;code&gt;networkx&lt;/code&gt; and &lt;code&gt;numpy&lt;/code&gt;, but let&#39;s also load &lt;code&gt;matplotlib&lt;/code&gt; for the visualization.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;networkx&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;nx&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sp&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;The Louvain method is used by &lt;em&gt;Gephi&lt;/em&gt;. It&#39;s extremely fast on large graphs, and give results comparable to simulated annealing methods.&lt;/span&gt;I&#39;ll use modularity as an example metric. For large graphs, the &lt;a href=&quot;https://sites.google.com/site/findcommunities/&quot;&gt;&lt;em&gt;Louvain&lt;/em&gt; method&lt;/a&gt; works well, and by chance there is &lt;a href=&quot;http://perso.crans.org/aynaud/communities/&quot;&gt;a &lt;code&gt;networkx&lt;/code&gt; implementation of it&lt;/a&gt;. So let&#39;s download it and place it in the folder with the rest of the files, then load it with&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;community&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The next step is to create a function which will remove each node in sequence, from the network, and return a copy of it. There is a &lt;code&gt;remove_nodes_from&lt;/code&gt; method of graph objects, but it modifies the original copy. Fortunately we don&#39;t need to be very elegant here, and so the basic function is:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;removeNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DiGraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_nodes_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_edges_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove_nodes_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tempWeb&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The hardest work is done! Now, we need to go through the following steps. &lt;br/&gt;
&lt;strong&gt;1.&lt;/strong&gt; Get the original value of modularity &lt;br/&gt;
&lt;strong&gt;2.&lt;/strong&gt; Loop through each node, and calculate the delta of modularity&lt;/p&gt;

&lt;p&gt;So let&#39;s write a function returning only the modularity value. The &lt;code&gt;community&lt;/code&gt; package does more than that, of course, but for the purposes of this simple example, this will be enough.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getModularity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;D&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_undirected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dendo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;community&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generate_dendogram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;partition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;community&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;partition_at_level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dendo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dendo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;community&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modularity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;partition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With that in hands, we can start the analysis. Assuming that we have an edgelist representation of our network, it&#39;s easy to load it and get its modularity:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_edgelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;network.txt&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;orig_mod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getModularity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The final step is to compare every possible network with one species removed to the original one. And this is why I love &lt;code&gt;python&lt;/code&gt;, because as &lt;code&gt;networkx&lt;/code&gt; objects are &lt;a href=&quot;http://networkx.github.com/documentation/latest/reference/classes.digraph.html&quot;&gt;iterable&lt;/a&gt;, this is a one-liner:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;delta_mod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getModularity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;removeNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span class=&#39;margin&#39;&gt;It&#39;s just as easy to iterate on the &lt;em&gt;edges&lt;/em&gt; rather than the &lt;em&gt;nodes&lt;/em&gt;. Which actually makes more sense for modularity...&lt;/span&gt;In clear, for each node called &lt;code&gt;n&lt;/code&gt; in the network &lt;code&gt;G&lt;/code&gt;, we substract the modularity of the network &lt;code&gt;G&lt;/code&gt; with &lt;code&gt;n&lt;/code&gt; removed from the original modularity. So what does it looks like?&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delta_mod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;ok&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will generate the following output:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/nodcontr-s1.png&quot; title=&quot;Sorted contribution of each species to modularity&quot; alt=&quot;Figure1&quot; /&gt;
Nodes with a value of &amp;Delta; lower than 0 &lt;em&gt;increase&lt;/em&gt; modularity when remove. As you can see, in this particular example, all but 3 nodes &lt;em&gt;decrease&lt;/em&gt; modularity when removed. As a final twist, let&#39;s plot the network with the nodes color-coded according to the impact on modularity:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spring_layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iterations&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw_networkx_edges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.07&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw_networkx_nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node_color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delta_mod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Spectral&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linewidths&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sci&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorbar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This provides a nice visualization:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/nodimpact-gr.png&quot; title=&quot;Graph&quot; alt=&quot;Figure2&quot; /&gt;
&lt;span class=&#39;margin&#39;&gt;The whole code is available as a &lt;a href=&quot;https://gist.github.com/tpoisot/4942162&quot;&gt;Gist&lt;/a&gt;&lt;/span&gt;The redmost nodes are actually well connected to all modules, and it makes sense that removing them will reinforce modularity. In short, it&#39;s easy to run this analysis with &lt;code&gt;networkx&lt;/code&gt;, because the graph objects are iterable. And the other good news is that it&#39;s fast (at least on reasonably sized networks), and in all cases faster than the permutation method I mentioned in the first paragraphs. Now to see how the two correlates (or not)...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>COinS metadata in Jekyll blogposts</title>
     <link href="http://timotheepoisot.fr/2013/02/08/coins-metadata-blogposts/"/>
    <updated>2013-02-08T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;&lt;a href=&quot;http://ocoins.info/&quot;&gt;COinS&lt;/a&gt; is a specification to embed metadata in web pages. In short, when these data are present, most bibliography software are able to add the resource to your library. Having these data in blog posts can be good, because you can keep track of blog posts with your other references, but you can also formally cite blog posts in your papers (if some people can turn &lt;a href=&quot;http://dynamicecology.wordpress.com/2011/06/17/zombie-ideas-in-ecology/&quot;&gt;blog posts into &lt;em&gt;TREE&lt;/em&gt; papers&lt;/a&gt;, citing blog posts might not be so far away).&lt;/p&gt;

&lt;p&gt;Adding &lt;code&gt;COinS&lt;/code&gt; data to your blog is usually done through plug-ins. A short googling revealed that there is no plug-in to generate these data for blogs running &lt;code&gt;jekyll&lt;/code&gt;. Having 5 minutes to lose, I decided to just go ahead and write one. Here it goes:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;span&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Z3988&amp;quot;&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ctx_ver=Z39.88-2004&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;    &amp;amp;amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;    &amp;amp;amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;    &amp;amp;amp;rft.title={{ page.title}}&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;    &amp;amp;amp;rft.creator={{site.author.name}}&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;    &amp;amp;amp;rft.date={{ page.date | date: &amp;quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Y-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;m-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}}&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amp&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rft&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;language=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;EN&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amp&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rft&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rights=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CC-BY-SA&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amp&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rft_id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;{{site.production_url}}{{page.url}}&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As usual, if you want to use it (and there might be some tweaking to do, if you don&#39;t use &lt;em&gt;Jekyll bootstrap&lt;/em&gt;), just place it in the &lt;code&gt;_includes&lt;/code&gt; directory, and somewhere in your blog layout&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;{% include coins.html %}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So right now, if you are using Zotero, you might see a little reference icon in your address bar. Mendeley is also able to detect &lt;code&gt;COinS&lt;/code&gt; data, and so might be other programs.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Article introductions and the reinvention of the ecological wheel</title>
     <link href="http://timotheepoisot.fr/2013/01/28/introductions-reinventing-ecological-wheel/"/>
    <updated>2013-01-28T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Caroline Tucker and Marc Cadotte recently had a great blog post discussing the &lt;a href=&quot;http://evol-eco.blogspot.ca/2013/01/reinventing-ecological-wheel-why-do-we.html&quot;&gt;reinvention of the ecological wheel&lt;/a&gt;, with special mention of the biodiversity-ecosystem-functioning (BEF) literature. I read this blog post with &lt;em&gt;a lot&lt;/em&gt; of interest, for reasons that I will mention in a later post. The basic issue was that:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Some of the findings in the BEF literature could be criticized as simply being rediscoveries of classical theory and experimental evidence already in existence.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&#39;ll keep my opinion about whether I agree or not with this, and whether or not I think some rediscoveries are useful, for later. Caroline &amp;amp; Marc propose two reasons for which ecologists are so prompt at reinventing the wheel, despite ecology being a young field. Either &lt;em&gt;the foundation of ecological knowledge is to blame&lt;/em&gt;, because it is incomplete, or &lt;em&gt;we forgot too quickly the classic literature&lt;/em&gt;. At first I thought it was two perfectly valid reasons, and both can act. But this afternoon, I was reading a paper about BEF, and came across a sentence saying, roughly, &lt;em&gt;&quot;the role of biodiversity in ecosystem functioning is still controversial&quot;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The paper in question was published in 2002. It&#39;s ten years ago, but it&#39;s still at a time when there was no shortage of broad papers &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/11679658&quot;&gt;outlining the mechanisms involved in the BEF&lt;/a&gt;, and the expected patterns. And it&#39;s not that the authors of this particular paper are to blame. Looking at a lot of introductions from this period, I found very similar sentences, sometimes the first of the abstract, often in high-impact journals. Meaning that the idea that &lt;em&gt;the role of biodiversity in ecosystem functioning is still controversial&lt;/em&gt; can possibly be your first impression of the BEF literature.&lt;/p&gt;

&lt;p&gt;Part of the problem is that we need to sell our papers, often to the referees insistence. We need to create a problem, which our paper will address. Saying that &lt;em&gt;the BEF theory is already well developed, but let&#39;s fill in some gaps&lt;/em&gt; will be less appealing that saying &lt;em&gt;everything you know is wrong&lt;/em&gt;. It&#39;s not a bad thing at all, because as an author, it forces you to be clear about what is new in your work. But it can give a sense of controversy, whereas in fact we&#39;re making good progress in gaining finer knowledge about things we already intuitively knew, or showing that the overlap is strong between two disconnected disciplines. And it is &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.1461-0248.2004.00698.x/full&quot;&gt;perhaps nowhere as true as in BEF studies&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So this is a third cause of re-inventions of the ecological wheel: &lt;em&gt;we need to sell our papers&lt;/em&gt;, and put a lot of emphasis on novelty, for fear of being rejected if we don&#39;t. I&#39;ve had some recent experiences with a paper being declined without review, and sent out for review, in journals of equal impact and reputation. The only difference being the &lt;em&gt;aggressiveness&lt;/em&gt; of the cover letter. As much as I&#39;d like not to be cynical on this point, I think your ability to cast a light of novelty on your work will make a great difference. And that is, of course, regardless of whether your work is really novel or not.&lt;/p&gt;

&lt;p&gt;Even worse, the rhythm of publication is increasing. The paper I mentioned earlier was published in 2002. Perhaps it&#39;s just the imperfect ways our brains works, but I have trouble realizing that it was &lt;em&gt;a long time ago&lt;/em&gt; (I was still in high school at this time). Incidentally, this is why I love when journals change their layouts - I keep track of what is &lt;em&gt;old&lt;/em&gt; this way. More seriously, given the increase in the number of papers, and the time needed to go from the idea to the publication (around one year in my limited experience), then what &lt;em&gt;was&lt;/em&gt; controversial when you started can be less so when you submit.&lt;/p&gt;

&lt;p&gt;And it definitely won&#39;t be controversial or new ten years down the road. Which is a problem. Introductions are written so as to give the paper a timeliness, and a relevance &lt;em&gt;in the current state of the field&lt;/em&gt;. The results are supposed to last. The discussion is somewhere in between. This is what I&#39;m getting at: how long does it takes for the average introduction to be obsolete? If the paper is well done, it should happen &lt;em&gt;by the end of the discussion&lt;/em&gt;. So in one hand, we need to show how novel our stuff is, and in the other, we should make it not novel by the end of the paper.&lt;/p&gt;

&lt;p&gt;Should we stop writing entire paragraphs to prove novelty? Should we stop reading the introductions entirely? And if we do so, will it help with the impression that we are re-inventing the wheel? I admit I have no ideas, but I&#39;d like to see what you think about these points!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Using forums to communicate with students</title>
     <link href="http://timotheepoisot.fr/2013/01/26/using-forums-communicate-students/"/>
    <updated>2013-01-26T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;This fall, I gave a series of lectures in Population and Community Biology, for a group of 52 undergrads. I really love teaching, and having my own course to give all by myself is a blast. But it&#39;s a lecture, and as a student, I was not a big fan of them. Not enough interaction. You learn more by interacting than by listening, and even though it&#39;s possible to do participative lectures, it&#39;s hard; at least I think it is, perhaps I still need to find the good recipe. There are a few reasons for which it&#39;s difficult to get students to participate (and by participation, I mean, talk to you, and talk between them). Some of them did not choose the course, and so they don&#39;t feel really involved in it (I think this argument is rubbish; they did chose the major, so I expect that they will have at least some interest in the subject). Some of them are really shy, or more generally, peer-pressure is strong. It might be a strong observational bias on my side, but I have the feeling that students in Québec perceive a higher competition between them that what is the case in France, and don&#39;t want to give a bad impression. Finally, it might be that the students see you, and you only as an authority figure, and see no interest in discussing course material during the class (see also, competition).&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;h4&gt;Warning!&lt;/h4&gt;
This post was written over the course of six months. I have plans to write more about teaching in the future, because there is some trauma I need to share with you, but let&#39;s start by the basics!
&lt;/div&gt;


&lt;p&gt;As far as I&#39;m concerned, I value communication in less formal setups and smaller groups over the shut-up-and-take-notes approach. Lectures are good at conveying the basic informations, but it&#39;s only (my rough estimate) 15% of the course material. Just enough material to highlight what you need to learn, and a list of books to help you locate the information. But even that is somewhat passive, and it&#39;s no secret that you retain more information when you go through the reflection yourself, rather than copying the proof, demonstration, or story hidden in the data. The French word for student is *étudiant&lt;em&gt;, or literally &lt;/em&gt;he who studies*.&lt;/p&gt;

&lt;p&gt;So, before the class started, I brew myself some tea, and brainstormed about how I can realistically make students participate. Not only with me, but also together. Ideally, by coming up with their problems, they would receive input from the others, and things will be solved themselves. My only duty would be to moderate the discussions, and ask some questions so that they go in the &quot;right&quot; way. &lt;a href=&quot;http://www.claroline.net/&quot;&gt;Claroline&lt;/a&gt;, our clumsy, ugly, antiquated &lt;a href=&quot;http://en.wikipedia.org/wiki/Learning_management_system&quot;&gt;LMS&lt;/a&gt;, allows the creation of forums. Hey, good memories of high school, I thought, it&#39;s not like the technology evolved since 2002, so let&#39;s give it a try! Thinly veiled sarcasm apart, each lecture had its own forum, and there were only three rules. First, I would not give an answer before other students tried (and if they found the right answer, I&#39;d only confirm, or make comments). Second, what happens in the forums is part of the course material (another way to say that yes, it can end up in an exam sometime). Third, I will not reply to &lt;em&gt;any&lt;/em&gt; email asking questions about the lectures: everything should go to the forum, so that all students receive the same quantity of information. Also because I don&#39;t want to give the same information ten times in a row to ten different students.&lt;/p&gt;

&lt;p&gt;Now, we have reached the end of the session, and I thought it was time to take a (qualitative) look back at how things went. In short: it&#39;s not as exciting as I thought it would be, but it&#39;s not a total failure either. First and foremost, the ready-made forums the university gives us absolutely, positively suck, and have no redeeming qualities. It&#39;s clumsy, probably only runs with Nestcape, and is generally ugly and un-friendly. Next time, I&#39;ll get rid of this and open a wiki. I&#39;m sure GitHub can be used as a class management system, that&#39;s one thing I&#39;m eager to try. Or I&#39;ll just have a blog with the lecture notes, and ask the students to comment. I don&#39;t know what or when it will be, but it will be high-tech and awesome.&lt;/p&gt;

&lt;p&gt;As far as participation went, some interesting things happened. I kind of expected it, but a few students were responsible for most of the discussions. Discussions, which, I noted, went as expected: most of the times, problems were solved by another student, in a relatively short time frame. It was a good thing for me, because I was able to see the faults in the students replies. So I was able to say where they got it wrong (or rather, to ask questions so that they understand themselves why they got it wrong). So if the participation is high enough, there is a possibility that such tools will allow you to evaluate the level of students in your groups, which is hard to do in large groups.&lt;/p&gt;

&lt;p&gt;The funny thing is that there was no discernible pattern of forum use according to the lecture topic. The first, and easiest lecture [in one equation: N(t+1) = rN(t)], was discussed a lot. After that, it was mostly random noise. Another interesting phenomenon is that most of the discussions focused on reproducing examples from the course, &lt;em&gt;i.e.&lt;/em&gt; working out the mathematics, and calculations. It was kind of unexpected, but I think there is a simple reason behind this: maths are hostile, and especially to biologists. There is also a strong local contingency on this particular point - a good proportion of the students have only high-school level mathematics (although I think it is more than enough for an undegrad level course in population biology). What I think happened is that students focused on the math, and invested less time in the mechanisms they represent. It&#39;s arguably the hardest thing to get (that an equation represents an idealized ecological reality, and that the form of the equation is an hypothesis on the mechanisms), and students got better at it near the end of the term. I don&#39;t care if you can&#39;t work out the equilibrium population density, or get the leading eigenvalue of the Leslie matrix. For one thing, this is not population biology, it won&#39;t be on the tests, and you certainly won&#39;t do it by hand in real life (I almost never do it, I have &lt;em&gt;Mathematica&lt;/em&gt; for this). I ended my intro to the class with this comic from &lt;a href=&quot;http://abstrusegoose.com&quot;&gt;&lt;em&gt;Abstruse Goose&lt;/em&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/fightmaths.png&quot; title=&quot;The only way&quot; alt=&quot;Figure1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I&#39;m glad to see that students did fight with the metaphorical dragon. I&#39;ll be sure to spend more time explaining that you should stop the fight once your understanding of maths is &quot;good enough&quot; to start thinking about biology.&lt;/p&gt;

&lt;p&gt;But to get back to the topic of using forums, here&#39;s the list of pros and cons I ended up with.&lt;/p&gt;

&lt;h1&gt;Pros&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;The students interact with themselves, so it can lead to a good group dynamic&lt;/li&gt;
&lt;li&gt;You can keep an eye on the discussions, and get a feeling about how well the material is understood&lt;/li&gt;
&lt;li&gt;The material is available to all, and the students can read through it at any time&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;Cons&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;It&#39;s difficult to have the students participate&lt;/li&gt;
&lt;li&gt;The choice of the platform is important - this can explain the previous point&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So here it is. I anticipate to use something similar again in the future, because the pros (mostly the fact that all students have the same information, and can help one another) outweighs the cons. The students were not too enthusiastic about it, for different reasons. One of which is that it&#39;s not the way other lecturers and professors do it, so it felt outside their comfort zone. But those who participated in it, got something out of the exercise, and I still think it can be a good support tool for a course (though, perhaps, not the only one).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Where to submit your paper?</title>
     <link href="http://timotheepoisot.fr/2013/01/24/where-to-submit/"/>
    <updated>2013-01-24T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Jeremy Fox offers some advice about &lt;a href=&quot;http://dynamicecology.wordpress.com/2013/01/24/advice-how-to-decide-where-to-submit-your-paper/&quot;&gt;&lt;em&gt;how to decide where to submit your paper&lt;/em&gt;&lt;/a&gt;. Also, read the response by &lt;a href=&quot;http://jabberwocky.weecology.org/2013/01/24/some-alternative-advice-on-how-to-decide-where-to-submit-your-paper/&quot;&gt;Ethan White&lt;/a&gt;. There are possibly as many perspectives on this are there are researchers, which I&#39;ll definitely take as an excuse to present mine.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Aim as high as you reasonably can.&lt;/strong&gt; Then submit a step higher than that. I&#39;ve had really good surprizes with papers being accepted in journals I would have considered &lt;em&gt;too high&lt;/em&gt; (speaking purely in term of impact factor). The worth you risk is being rejected (which is short, so you don&#39;t lose anything), or going into review. Which means receving comments, which will better your paper.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Don’t just go by journal prestige; consider “fit”.&lt;/strong&gt; I don&#39;t really believe in this one. As I&#39;ve mentionned before, I believe &lt;a href=&quot;http://timotheepoisot.fr/2012/05/11/ecological-journal-of-the-future/&quot;&gt;much more in &lt;em&gt;papers&lt;/em&gt; than in &lt;em&gt;journals&lt;/em&gt;&lt;/a&gt;. Being published in a &lt;em&gt;good&lt;/em&gt; journal does not makes your paper good. Being published in a &lt;em&gt;bad&lt;/em&gt; journal does not decrease the worth of your paper. I also think that the way we survey the literature changed a lot, with social networks and RSS; perhaps I&#39;m wrong on this point, but I think that (at least for the younger generation) our view of the litterature focuses much more on papers than journals. In this perspective, the &quot;fit&quot; of the journal do not really matter. Elaborating a little bit more, initiatives like &lt;em&gt;F1000Research&lt;/em&gt; or &lt;em&gt;eLife&lt;/em&gt; are designed to be paper repositories. Where &lt;em&gt;fit&lt;/em&gt; do not matter. Then, it&#39;s your job to advertize your paper, and make sure people are aware of it.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;How much will it cost?&lt;/strong&gt; I&#39;m sure that most of the time, people are happy to pay the costs associated to a publication. And waivers are relatively easy to obtain.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;How likely is the journal to send your paper out for external review?&lt;/strong&gt; I have really no opinion about this. I used to think it matters, but I&#39;ve had weird experiences this past year. I think it boils downs to &lt;em&gt;&quot;How good are you at writing cover letters?&quot;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Is the journal open access?&lt;/strong&gt; This is a &lt;a href=&quot;http://en.wikipedia.org/wiki/False_dilemma&quot;&gt;false dilemna&lt;/a&gt;, in my opinion. Journals can not be open access, yet have open access mandates for some articles. &lt;em&gt;Ecology Letters&lt;/em&gt; does, most of the &lt;em&gt;Springer&lt;/em&gt; journals do as well. I think the question should be: &lt;em&gt;&quot;How open is the journal to new practices?&quot;&lt;/em&gt;. This includes &lt;em&gt;ArXiV&lt;/em&gt;, putting data online in the open, and so forth. My feeling is that the younger people are really aware of these issues. My opinion is that &lt;em&gt;open access&lt;/em&gt; is the tree (badly) hiding the forest, and we should do more than fighting for the access to the papers.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Does the journal evaluate papers only on technical soundness?&lt;/strong&gt; Surprizingly, I don&#39;t care much about this. I thought &lt;em&gt;PLoS One&lt;/em&gt; worked this way, and in my experience, it is not the case. Probably because the academic editors don&#39;t follow the rule. Also my research is wonderful and innovative, of course.&lt;/p&gt;

&lt;p class=&#39;margin&#39;&gt;Rohr &amp; Martin (2012) &lt;em&gt;Tr Ecol Evol&lt;/em&gt; 27(4)&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;Is the journal part of a review cascade?&lt;/strong&gt; This can be important, but again, this is not ambitious enough. Why not &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22341497&quot;&gt;systematizing the process of review transfer&lt;/a&gt;? First, it will reduce the feeling that there are sinks and sources in journals (not saying it&#39;s not true, but there is a stigma on some journals because they are essentially perceived as &lt;em&gt;Not good enough for [other journal]&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Is it a society journal?&lt;/strong&gt; Frankly my dear, I don&#39;t give a damn.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Have you had good experiences with the journal in the past?&lt;/strong&gt; Sure. But I&#39;ve also had terrible experiences with some journals, and I&#39;m still considering submitting something to them in the future. Ironically enough, because &lt;em&gt;they fit&lt;/em&gt;. And I&#39;ve had really good experiences with some journals, even though they keep rejecting everything I submit to them; but they do it with class? I honestly don&#39;t know.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Is there anyone on the editorial board who’d be a good person to handle your paper?&lt;/strong&gt; I try to see which editors can be a good fit. But it&#39;s not really a decision-making or decision-breaking factor.&lt;/p&gt;

&lt;p&gt;So in a few words, I think we should focus less on the journals. Papers will end somewhere eventually, even if it&#39;s on &lt;em&gt;FigShare&lt;/em&gt;. But I think the exerice is interesting, and actually I&#39;d like to see other people share their opinions. There is much to learn about how we make our decisions, and probably a lot of potential to see which areas need improving as well.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A selection of Sublime Text 2 packages</title>
     <link href="http://timotheepoisot.fr/2013/01/22/selection-sublime-plugins/"/>
    <updated>2013-01-22T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;&lt;a href=&quot;http://www.sublimetext.com/2&quot;&gt;&lt;em&gt;Sublime Text 2&lt;/em&gt;&lt;/a&gt; is an awesome multi-purpose text editor, working on all major platforms, and generally being &lt;code&gt;vim&lt;/code&gt; with a nice GUI, and some &lt;code&gt;emacs&lt;/code&gt; thrown in for good measure. Over the last year, it has become my daily weapon of choice. As it offers a complete API, many people developed &lt;em&gt;Python&lt;/em&gt; packages for it, and I use a few of them almost daily. Following some discussions we&#39;ve had on twitter, I figured I&#39;d share them with everyone. The first one to install is &lt;a href=&quot;http://wbond.net/sublime_packages/package_control&quot;&gt;&lt;em&gt;Sublime Package Control&lt;/em&gt;&lt;/a&gt;. It allows you to open the command palette, and manage your packages. Notably, you can use the &lt;code&gt;Install packages&lt;/code&gt; command to get a drop-down list of &lt;em&gt;all&lt;/em&gt; possible packages available. They are also listed &lt;a href=&quot;http://wbond.net/sublime_packages/community&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So which packages do I use? I made a list of those I find the more useful, ranked by use frequency.&lt;/p&gt;

&lt;p&gt;The first one is &lt;strong&gt;LaTeX Tools&lt;/strong&gt;. It&#39;s plain awesome. You work on a LaTeX document, hit &lt;code&gt;Ctrl-B&lt;/code&gt;, and it uses &lt;code&gt;latexmk&lt;/code&gt; to take care of &lt;em&gt;all&lt;/em&gt; the necessary compilation steps for you. And it implements &lt;code&gt;synctex&lt;/code&gt; as well, so you can use &lt;code&gt;Ctrl-L J&lt;/code&gt; to jump to the PDF, and right click on the PDF to jump to the text. Add a few other &lt;a href=&quot;https://github.com/SublimeText/LaTeXTools&quot;&gt;great shortcuts&lt;/a&gt; (transform a word in an environment with &lt;code&gt;Ctrl-L E&lt;/code&gt;, or in a command with &lt;code&gt;Ctrl-L C&lt;/code&gt;, for example), a very extensive auto-completion, and you have one of the best LaTeX editors available. Also, when using this package, do not forget that pressing &lt;code&gt;alt-q&lt;/code&gt; anywhere in a line will hard wrap the paragraph. It&#39;s almost impossible to live without this function when you use git.&lt;/p&gt;

&lt;p&gt;A really good companion to the above package is &lt;strong&gt;WordCount&lt;/strong&gt;. It does what the name says: add a word and character count in the status bar. It updates the word count in real time, and when you mostly write using &lt;em&gt;Markdown&lt;/em&gt; or plain text, it&#39;s extremely useful. To write in &lt;em&gt;Markdown&lt;/em&gt;, which includes this blog, and most of the drafts of my papers, all the replies to referees, my meeting notes, and general note taking, I rely on &lt;strong&gt;MarkdownBuild&lt;/strong&gt;, which allows to &lt;a href=&quot;https://github.com/erinata/SublimeMarkdownBuild&quot;&gt;quickly visualize&lt;/a&gt; the content of the file. A simple &lt;code&gt;Ctrl-B&lt;/code&gt; brings up a browser windows with a HTML/CSS rendition of my file. When the documents are ready, I use &lt;code&gt;pandoc&lt;/code&gt; to compile them. There are two packages for this, &lt;strong&gt;Pandoc&lt;/strong&gt;, which provides a lot of output formats, and &lt;strong&gt;Pandoc Academic&lt;/strong&gt;, which provides less formats, but is reachable in less keystrokes. Both also have some complementary snippets, so I keep both.&lt;/p&gt;

&lt;p&gt;There are some plugins for &lt;code&gt;git&lt;/code&gt;, but I don&#39;t use them, as I do my commits from the command line. Speaking of command line, though, the &lt;strong&gt;Sublime REPL&lt;/strong&gt; package is difficult to avoid. It allows you to &lt;a href=&quot;https://github.com/wuub/SublimeREPL&quot;&gt;run a variety of shells from within a tab in Sublime Text 2&lt;/a&gt;. Among the included languages are Python (including iPython), R, and a few others. You can also run a system shell, which I use to do my commits.&lt;/p&gt;

&lt;p&gt;I also like &lt;strong&gt;Align Tab&lt;/strong&gt; a lot. If you write in LaTeX, or use &lt;code&gt;csv&lt;/code&gt; data, you know what this one is doing. Select a block of text, open the command palette and choose &lt;code&gt;Align tabular&lt;/code&gt;, give the separator string, and &lt;em&gt;bam!&lt;/em&gt;, a perfectly aligned table.&lt;/p&gt;

&lt;p&gt;Going from this&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;a b c d
1 2 21 3
abc dd e 456
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to this&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;a    b   c   d 
1    2   21  3  
abc  dd  e   456
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;means a whole lot in terms of readability.&lt;/p&gt;

&lt;p&gt;And while we&#39;re at readability, let&#39;s talk about color schemes. The defaults are good, but not impressive. My favorites are by far from &lt;a href=&quot;https://github.com/chriskempson/base16&quot;&gt;the &lt;strong&gt;base16&lt;/strong&gt; project&lt;/a&gt;. I&#39;m fond of &lt;code&gt;Tomorrow Light&lt;/code&gt; and &lt;code&gt;Railscasts Dark&lt;/code&gt;, but many, many others are impressive as well.&lt;/p&gt;

&lt;p&gt;When coding, I use &lt;strong&gt;AndyPython&lt;/strong&gt; and &lt;strong&gt;SublimeCodeIntel&lt;/strong&gt;. They provide some good auto-completion, and code intelligence. So it means that I don&#39;t need to remember the methods I put in my classes! And any technology allowing me to get progressively lazier is good (probably, I&#39;d check it, but it would involve some efforts). All jokes aside, when working with large python libraries (&lt;code&gt;networkx&lt;/code&gt; or &lt;code&gt;scipy&lt;/code&gt; come to mind), it&#39;s almost impossible to do without these packages.&lt;/p&gt;

&lt;p&gt;So be sure to check &lt;em&gt;Sublime Text 2&lt;/em&gt; out. It&#39;s not free (but not too expensive either), and even if you don&#39;t pay, you can use the full feature set (and it is really, really impressive). Think of it as a &lt;em&gt;Photoshop&lt;/em&gt; of text editing. After a year of using it, I realize I am probably exploiting less than 10% of its potential. It&#39;s one of the best pieces of software I&#39;ve came across! And if you want to know more, &lt;a href=&quot;http://nature.berkeley.edu/~kram/&quot;&gt;Karthik Ram&lt;/a&gt; has a list of &lt;a href=&quot;http://pinboard.in/u:karthik/t:sublimetext&quot;&gt;bookmarks&lt;/a&gt; about it, which I encourage you to browse.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>If Elsevier acquires Mendeley, I'm out (and you should be too)</title>
     <link href="http://timotheepoisot.fr/2013/01/19/elsevier-mendeley-out/"/>
    <updated>2013-01-19T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Two days ago, &lt;em&gt;TechCrunch&lt;/em&gt; published an article saying that &lt;a href=&quot;http://techcrunch.com/2013/01/17/elsevier-mendeley-education/&quot;&gt;&lt;em&gt;Elsevier&lt;/em&gt; was in &quot;advanced talks&quot; to acquire &lt;em&gt;Mendeley&lt;/em&gt;&lt;/a&gt;. Why a company (&lt;em&gt;Mendeley&lt;/em&gt;) whose goal is to help scientist work, and faciliate access to papers, would associate with a company so despised by so many researchers that they are actively and publicly &lt;a href=&quot;http://thecostofknowledge.com/&quot;&gt;boycotting it&lt;/a&gt; (&lt;em&gt;Elsevier&lt;/em&gt;) makes absolutely no sense.&lt;/p&gt;

&lt;p&gt;Some people on the &lt;em&gt;Mendeley advisors group&lt;/em&gt; wanted to know more, and here is the reply we got:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/mendeley-advisors-elsevier.png&quot; title=&quot;Mendeley advisors group&quot; alt=&quot;Figure1&quot; /&gt;
So it seemed like there was nothing to worry about. All too happy to announce the good news on Twitter, here is the reply I got:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/mendeley-twitter-rumors.png&quot; title=&quot;Mendeley twitter&quot; alt=&quot;Figure2&quot; /&gt;
Well, reading this, I&#39;m not sure anymore I don&#39;t need to worry. Now, this corporate talk when discussing the possible acquisition is not surprizing (&lt;em&gt;Mendeley&lt;/em&gt; is, after all, a company), coming from the very people who &lt;a href=&quot;http://blog.mendeley.com/open-access/support-free-access-to-scientific-journal-articles-arising-from-taxpayer-funded-research-oamonday/&quot;&gt;were so supportive of open access&lt;/a&gt; (though, &lt;a href=&quot;https://twitter.com/mrgunn/status/292479547079794688&quot;&gt;contrary to what William Gunn said on &lt;em&gt;Twitter&lt;/em&gt;&lt;/a&gt;, I was unable to find mentions of &lt;em&gt;Elsevier&lt;/em&gt; on the &lt;em&gt;Mendeley&lt;/em&gt; blog).&lt;/p&gt;

&lt;p&gt;I&#39;m a &lt;em&gt;Mendeley&lt;/em&gt; advisor. I&#39;ve used the tool over the last two years, and I&#39;ve been converting people to it, and helping them, and for the most part, it&#39;s been fun. &lt;em&gt;Mendeley&lt;/em&gt; is still the only non-open source tool on my laptop, except for &lt;em&gt;Sublime Text&lt;/em&gt;. That&#39;s how big of a concession I&#39;m making, because the software is good. But the second &lt;em&gt;Elsevier&lt;/em&gt; acquires &lt;em&gt;Mendeley&lt;/em&gt;, or the two start walking hand in hand? I&#39;m out.&lt;/p&gt;

&lt;p&gt;First, I&#39;ve signed the &lt;a href=&quot;http://thecostofknowledge.com/&quot;&gt;&lt;em&gt;Cost of Knowledge&lt;/em&gt;&lt;/a&gt; petition, and I don&#39;t want to be involved with &lt;em&gt;Elsevier&lt;/em&gt;. I won&#39;t review for them, or submit to their journals. Second, I don&#39;t want them to use the data I generate. This is why I&#39;ll be leaving, and this is why I think other &lt;em&gt;Mendeley&lt;/em&gt; users should too, if this acquisition happens. The position of &lt;em&gt;Elsevier&lt;/em&gt; on text mining is &lt;a href=&quot;http://researchremix.wordpress.com/2012/04/13/elsevier-response/&quot;&gt;well known&lt;/a&gt;, and in part responsible for their bad reputation with scientists and the open-access movement.&lt;/p&gt;

&lt;p&gt;When you add a paper on &lt;em&gt;Mendeley&lt;/em&gt;, you generate data. What do you read? Who do you read? Who send you papers, from which journals? These are important informations, that &lt;em&gt;Elsevier&lt;/em&gt; will perhaps be able to use to turn a profit, and I don&#39;t want that. &lt;a href=&quot;http://blog.findings.com/post/20527246081/how-we-will-read-clay-shirky&quot;&gt;Publishing is not a job, it&#39;s a &lt;em&gt;button&lt;/em&gt;&lt;/a&gt;; we pay enough for people to press this button, although other solutions (&lt;a href=&quot;http://innge.net/?q=node/327&quot;&gt;&lt;em&gt;Scholastica&lt;/em&gt;&lt;/a&gt;, &lt;a href=&quot;http://innge.net/?q=node/330&quot;&gt;preprints servers&lt;/a&gt;) exists. The web &lt;em&gt;was (in part) designed&lt;/em&gt; to &lt;a href=&quot;http://scholarlykitchen.sspnet.org/2010/01/04/why-hasnt-scientific-publishing-been-disrupted-already/&quot;&gt;disrupt scholarly publishing&lt;/a&gt;, but failed. Let&#39;s not then let scientific publishers use the data we, scientists, generate for free, &lt;a href=&quot;http://www.guardian.co.uk/commentisfree/2011/aug/29/academic-publishers-murdoch-socialist&quot;&gt;to continue increasing their profits&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Did I say &quot;for free&quot;? Sorry, I meant &lt;a href=&quot;http://www.mendeley.com/upgrade/storage/&quot;&gt;$4.99 a month&lt;/a&gt; (although, full disclosure, as a &lt;em&gt;Mendeley advisor&lt;/em&gt;, I get free hosting). And call me an extremist, but I don&#39;t want anything to do with a company that makes you pay to generate data, which will be used by another company which is the poster child of a domain who replaced Paul Feyerabend as &lt;a href=&quot;http://www.guardian.co.uk/science/2012/jan/16/academic-publishers-enemies-science&quot;&gt;&lt;em&gt;the worst enemy of science&lt;/em&gt;&lt;/a&gt;. So I&#39;m hoping that this is indeed just a rumor, and that &lt;em&gt;Mendeley&lt;/em&gt; is attentive enough to what scientists think, and will not associate with &lt;em&gt;Elsevier&lt;/em&gt;. But if this is not the case, I&#39;ll cancel my subscription; and I think you should too.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A quick way to get good figures for your web pages</title>
     <link href="http://timotheepoisot.fr/2013/01/10/free-workflow-figures/"/>
    <updated>2013-01-10T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m a huge fan of the &lt;code&gt;pgfplots&lt;/code&gt; package for LaTeX, as it offers the possibility to include the source code of the figures directly within the document. It changed the way I organize my paper writing, as I now tipically have three sub-folders: &lt;code&gt;notes&lt;/code&gt;, &lt;code&gt;MS&lt;/code&gt;, and &lt;code&gt;code&lt;/code&gt;. The results of what happens in &lt;code&gt;code&lt;/code&gt; (usually a huge mess of R, C and Python) go directly into &lt;code&gt;MS&lt;/code&gt; as tab-delimited files, and the &lt;code&gt;.tex&lt;/code&gt; document has all the commands needed to transform this in figures. I&#39;ve notably used this workflow for the &lt;code&gt;beamer&lt;/code&gt; slides of my lectures in population biology, and it was really easy to re-use and re-contextualized material across lessons.&lt;/p&gt;

&lt;p&gt;I&#39;m &lt;em&gt;really&lt;/em&gt; happy with this setup, and &lt;code&gt;pgfplots&lt;/code&gt; is a wonderful tool. It does look really &lt;em&gt;LaTeX-y&lt;/em&gt; (&lt;code&gt;s/LaTeX-/ugl/&lt;/code&gt;) by default, but you can get good results with minor tweakings. Given that I am familiar around this system, I was thinking about how I can use it to produce good graphics to put in blog posts, when needed. As it turned out, it&#39;s remarkably easy, and it requires almost no user input.&lt;/p&gt;

&lt;p&gt;Doing so requires almost nothing, except an install of &lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;&lt;code&gt;imagemagick&lt;/code&gt;&lt;/a&gt; should it not ship with your operating system. Of course you need LaTeX, and (relatively) up-to-date versions of the &lt;code&gt;tikz&lt;/code&gt; and &lt;code&gt;pgfplots&lt;/code&gt; packages installed. By the end of this walkthrough, you&#39;ll be able to generate figures like the one just below, with almost no effort.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ex-pgf-blog.png&quot; title=&quot;An example of what can be done&quot; alt=&quot;Figure1&quot; /&gt;&lt;/p&gt;

&lt;h1&gt;Getting the figures from LaTeX&lt;/h1&gt;

&lt;p&gt;To start, we need a &lt;code&gt;.tex&lt;/code&gt; document, who will act as a template for all the figures we want to produce. A minimal preamble will be more than enough:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\documentclass&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;minimal&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[T1]&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fontenc&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[utf8]&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;inputenc&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[default,scale=0.95]&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;opensans&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;mathastext&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;pgfplots&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\usepgfplotslibrary&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;external&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\tikzexternalize&lt;/span&gt; 

&lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;document&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;document&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The important line is &lt;code&gt;\tikzexternalize&lt;/code&gt;. This command tells the &lt;code&gt;tikz&lt;/code&gt; library to generate a separate file for each figure, compile it in a PDF, then include this PDF file in the document. The consequence of it is that, in your working folder, you know have a list of files:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;-rw-r--r-- 1 tpoisot tpoisot      0 jan 10 15:21 pgf-figure3.dpth
-rw-r--r-- 1 tpoisot tpoisot  31494 jan 10 15:21 pgf-figure3.log
-rw-r--r-- 1 tpoisot tpoisot  22409 jan 10 15:21 pgf-figure3.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There is only one drawback with the use of the &lt;code&gt;\tikzexternalize&lt;/code&gt; command: as long as the corresponding PDF files are found in your working directory, &lt;code&gt;tikz&lt;/code&gt; will not recompile them. This is essentially because drawing a &lt;code&gt;tikz&lt;/code&gt; figure can be a relatively time-consuming process, especially if your graph has a lot of points. And so unless you are satisfy with your figure, comment the &lt;code&gt;%\tikzexternalize&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;Once you are happy with your figure, and have re-activated the &lt;code&gt;\tikzexternalize&lt;/code&gt; command, the last step is to convert these PDF files in a format that you can put in a webpage, like PDF. This is where &lt;code&gt;imagemagick&lt;/code&gt;, and specifically the &lt;code&gt;convert&lt;/code&gt; utility, comes into play. I have this simple bash script in my working directory, to automate the process. You can read &lt;a href=&quot;http://robfelty.com/2008/03/11/convert-pdf-to-png-with-imagemagick&quot;&gt;here&lt;/a&gt; about the options used.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;file in *figure*.pdf; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt;;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
convert -density 600x600 -resize 1204x986 -quality 90 &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt;|cut -f1 -d&lt;span class=&quot;s1&quot;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;.png;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;-resize 1204x986&lt;/code&gt; flag esnure that the output is approximately of the size I want, to have a good resolution. Now, if you want to use these images in a website, it&#39;s better to ensure that the images will not overflow your layout, so just specificy a maximal width in your CSS file. For example, mine looks like:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.pbody&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;rgb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;9px&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;rgb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shadow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2px&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rgba&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;max-width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;742px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0px&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;margin-bottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1em&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;OK, let&#39;s do it!&lt;/h1&gt;

&lt;p&gt;In your LaTeX file, between the &lt;code&gt;\begin{document}&lt;/code&gt; and &lt;code&gt;\end{document}&lt;/code&gt; commands, just put the code for your figure (see the &lt;a href=&quot;http://pgfplots.sourceforge.net/&quot;&gt;&lt;code&gt;pgfplots&lt;/code&gt;&lt;/a&gt; website for details on the syntax, the &lt;em&gt;Gallery&lt;/em&gt; page has a lot of examples).&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;axis&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;[xlabel=Time (weeks),ylabel=Individuals,
            width=12cm,height=6cm
            ]
        &lt;span class=&quot;k&quot;&gt;\addplot&lt;/span&gt; coordinates &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;(1,8) (2,9) (4,7) (5,13)
        (6,12) (8,18) (9,17) (10,22) (11,41) (12,32)
        (13,24) (14,21) (16,21.5) (21,19.4) (25,21.02)&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[coordinate,pin={below:{Control}}]&lt;/span&gt; at (axis cs:16,21.5) &lt;span class=&quot;nb&quot;&gt;{}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\addplot&lt;/span&gt; coordinates &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;(1,4) (2,3) (4,5) (5,7)
        (6,9) (7,8) (8,12) (9,23) (10,38) (11,34)
        (12,35) (13,33.2) (14,27) (16,25) (21,24.4) (25,24.9)&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[coordinate,pin={above:{Treatment}}]&lt;/span&gt; at (axis cs:21,24.4) &lt;span class=&quot;nb&quot;&gt;{}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;axis&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In a terminal, make executable, and run the &lt;code&gt;convert.sh&lt;/code&gt; script:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;tpoisot@tp002 ~/Bureau/PGFclean &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;chmod +x convert.sh
tpoisot@tp002 ~/Bureau/PGFclean &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./convert.sh
pgf-figure0.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You will now have a PNG file, which looks like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ex-pgf-default.png&quot; title=&quot;The default PGFplots settings&quot; alt=&quot;Figure2&quot; /&gt;
It&#39;s cool, but I strongly encourage you to play around with the various opitons. Defining two colors in the preamble of your LaTeX file,&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;GR&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;60,170,70&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;C1&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;170,70,60&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;, and using them (along with other options) to make your figure less LaTeX-y, can make a substantial difference. For example, the first figure in this entry was produced with the following code:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;axis&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;[xlabel=Time (weeks),ylabel=Individuals,
            width=12cm,height=6cm, ymin = 0, ymax = 50,
            xmin = -0.05, xmax=26.05,
            ymajorgrids, ytick=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;10,20,30,40&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,
            axis y line*=left, axis x line*=bottom,
            tick align=outside,
            axis background/.style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;shade,top color=GR!5!white,bottom color=white&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,
            y axis line style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;white, line width = 0.0001pt&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,
            x axis line style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;black!60!white&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
            ]
        &lt;span class=&quot;k&quot;&gt;\addplot&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[color=GR,mark=none,ultra thick]&lt;/span&gt; coordinates &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;(1,8) (2,9) (4,7) (5,13)
        (6,12) (8,18) (9,17) (10,22) (11,41)
        (12,32) (13,24) (14,21) (16,21.5) (21,19.4) (25,21.02)&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[coordinate,pin={[pin edge={GR,thick,densely dotted}]&lt;/span&gt;
            below:&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\color&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;GR&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;Control&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;]
            at (axis cs:16,21.5) &lt;span class=&quot;nb&quot;&gt;{}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[coordinate,pin={[pin edge={black,thick,densely dotted}]&lt;/span&gt;
            45:&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;bloom&lt;span class=&quot;nb&quot;&gt;}}}&lt;/span&gt;]
            at (axis cs:11,41) &lt;span class=&quot;nb&quot;&gt;{}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\addplot&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[color=C1,mark=none,ultra thick]&lt;/span&gt; coordinates &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;(1,4) (2,3) (4,5) (5,7) (6,9)
        (7,8) (8,12) (9,23) (10,38)
        (11,34) (12,35) (13,33.2) (14,27) (16,25) (21,24.4) (25,24.9)&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
        &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[coordinate,pin={[pin edge={C1,thick,densely dotted}]&lt;/span&gt;
            above:&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\color&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;C1&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;Treatment&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;]
            at (axis cs:21,24.4) &lt;span class=&quot;nb&quot;&gt;{}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;axis&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;In conclusion&lt;/h1&gt;

&lt;p&gt;It&#39;s remarkably easy, with this setup, to produce really good quality graphics to put on web pages, I originally wanted to learm something like &lt;code&gt;D3&lt;/code&gt;, but realized I have no time to invest in this at the moment. Plus, the advantage of using a LaTeX-based system is that (in addition to the geek cred) you will be able to easily re-use material from different sources. For example, I can now easily tweak a figure I made for a paper, and put it online, just by changing the &lt;code&gt;axis&lt;/code&gt; parameters. And given that everything is command-line based, you can really automate the whole process (just write a shell script taking care of LaTeX compilation, &lt;code&gt;imagemagick&lt;/code&gt; conversion, and copying the figure at the appropriate place in your website folder).&lt;/p&gt;

&lt;p&gt;The inconveninent is that this system is not dynamics, &lt;em&gt;i.e.&lt;/em&gt; if you want to re-draw a figure because the data changed, you have to do it by hand, where &lt;code&gt;D3&lt;/code&gt; will automatically take care of it. But for now, I&#39;m happy enough with this system.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>INNGE announces EcoBloggers</title>
     <link href="http://timotheepoisot.fr/2013/01/07/ecobloggers/"/>
    <updated>2013-01-07T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;It all started with a rather enigmatic tweet, two weeks ago:&lt;/p&gt;

&lt;blockquote class=&quot;twitter-tweet tw-align-center&quot;&gt;&lt;p&gt;Any ecologist with a blog, can you send me a message? @&lt;a href=&quot;https://twitter.com/inngecologist&quot;&gt;inngecologist&lt;/a&gt; is starting a cool project!&lt;/p&gt;&amp;mdash; Tim (@tpoi) &lt;a href=&quot;https://twitter.com/tpoi/status/279596822895419392&quot; data-datetime=&quot;2012-12-14T14:40:51+00:00&quot;&gt;December 14, 2012&lt;/a&gt;&lt;/blockquote&gt;


&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;


&lt;p&gt;Thanks to &lt;a href=&quot;http://www.stanford.edu/~naupaka/&quot;&gt;Naupaka Zimmerman&lt;/a&gt; today is an important day, as &lt;a href=&quot;http://www.innge.net/&quot;&gt;INNGE&lt;/a&gt; launches &lt;a href=&quot;http://www.innge.net/?q=ecobloggers&quot;&gt;&lt;em&gt;EcoBloggers&lt;/em&gt;&lt;/a&gt;, a new platform to aggregate blog posts written by ecologists. Just this morning, there&#39;s been some discussion at &lt;a href=&quot;https://dynamicecology.wordpress.com/2013/01/07/trends-in-ecology-blogging/&quot;&gt;&lt;em&gt;Dynamic Ecology&lt;/em&gt;&lt;/a&gt; that ecological blogs may be fading away. One of the hypothesis was that the audience has not reached a critical mass, and there is not much incentive for posting. &lt;em&gt;EcoBloggers&lt;/em&gt; will aggregate all contents in a single place, much like &lt;a href=&quot;http://www.r-bloggers.com/&quot;&gt;&lt;em&gt;R-bloggers&lt;/em&gt;&lt;/a&gt; did with a tremendous success.&lt;/p&gt;

&lt;p&gt;For the moment, we aggregate the blogs of people who responded to the first tweet. We&#39;re obviously hoping that more and more people will follow, so feel free to contact &lt;a href=&quot;https://twitter.com/naupakaz/&quot;&gt;@naupakaz&lt;/a&gt; or &lt;a href=&quot;https://twitter.com/tpoi/&quot;&gt;@tpoi&lt;/a&gt; if you want to join us! We hope that, by putting all the content together in a single place, the readership of all bloggers will increase, and we can use this tool to engage in a great &lt;a href=&quot;http://chronicle.com/article/The-Blogosphere-as-a-Carnival/2674&quot;&gt;carnival of (ecological) ideas&lt;/a&gt;. And who knows, we might a well generate a few new vocations!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Writing grant applications can be fun</title>
     <link href="http://timotheepoisot.fr/2013/01/04/writing-grant-applications/"/>
    <updated>2013-01-04T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Most of my summer, and a substantial part of whatever time in fall was left after teaching, went into applying to various grants and positions. It&#39;s a frustrating experience, because it&#39;s time not spent doing research. But as I had no other possibility than doing it, I tried to make the experience enjoyable, and I even found myself learning a few things along the way. I&#39;ve done my PhD in a French university, and it&#39;s very different from what happens in the rest of the world. Most notably, as the time to completion is fixed to three years, you usually start with a well defined project (though I was able to modify mine as I went). The consequence is that you don&#39;t have to write your research proposal. So these last few months were (almost) the first time I had to invest a massive amount of time in trying to con(vince) someone into funding my research.&lt;/p&gt;

&lt;h1&gt;It forces you to understand your research&lt;/h1&gt;

&lt;p&gt;I try to show how my previous research accomplishments make me the best suited candidate for a grant or position. Doing so requires to show how these previous experiences are actually cohesive, and can be used as the foundation for a research program.  It&#39;s a good exercise, and a good feeling as well. Kind of like when all the terms in an equation begin to simplify, and you find the solution to be quite elegant. You know what your research achieved, and what you can do with it now.&lt;/p&gt;

&lt;p&gt;More importantly, perhaps, is that fact that you need to replace your different papers into the broader interests of your fellow scientists. What you&#39;ve produced, taken together with other researchers&#39; output, can open new perspectives. Showing that you have this broad overview is good, and the process of self-reflexion needed to acquire it was definitely helpful to me. It led me to re-emphasize some project, and put some others on the back-burner because I was not sure of where they stand in the landscape of current research ideas.&lt;/p&gt;

&lt;h1&gt;It&#39;s a good time to read a lot&lt;/h1&gt;

&lt;p&gt;Of course, getting the very broad overview of what is happening in your field requires to keep up to date with the literature. And if we all know our classics, it&#39;s always more difficult to keep an eye on every new empirical study, field data, and remotely related modeling paper that comes out. I used &lt;a href=&quot;http://www.google.com/reader/view/&quot;&gt;Google Reader&lt;/a&gt; to aggregate the RSS feeds of a lot of different journals, and &lt;a href=&quot;http://googlescholar.blogspot.ca/2012/08/scholar-updates-making-new-connections.html&quot;&gt;Google Scholar updates&lt;/a&gt; and &lt;a href=&quot;http://mystudiouslife.wordpress.com/2012/01/10/mendeley-v1-3-mendeley-suggest/&quot;&gt;Mendeley Suggest&lt;/a&gt; to get alerts about some papers related to my interests. Both tools are, by the way, extremely powerful, and I check them more and more often to get personalized suggestions about what to read.&lt;/p&gt;

&lt;p&gt;I found that reading a lot of papers is a good thing when presenting your research project. It can provide a good lead-in to your proposal, as you show some unexplained or unexpected patterns, and argue that your research can help understanding them. You will also find new examples, and use them to strengthen why your field need the answers you&#39;ll be able to bring. Even when writing review papers, I&#39;ve read mostly on very focused topics. Trying to generate several research axes forced me to diversify my readings. I&#39;ve discovered new questions, new authors, and it helped in re-focusing some of my current projects (and the projects I presented in the different proposals).&lt;/p&gt;

&lt;h1&gt;You need to reach a broad audience&lt;/h1&gt;

&lt;p&gt;Depending on the type of grant or proposal, the people evaluating your document can come from very various fields. In one instance, some of the people doing the first round of project selection were from fields far outside ecology and evolution. And you need to convince these people that your project is important. They are not expert reviewers who know the trending research questions and the methodology. They are, as far as the specifics of your field go, laymen and laywomen.&lt;/p&gt;

&lt;p&gt;But you&#39;ll also have to convince more specialized people, and you&#39;ll need to do so in the same text. I&#39;ve found that my experience in vulgarization helped a great deal for this exercise. But in any case, to be appealing to a wide audience, you need to take an extra step back, and show not only how your research is cohesive with what is happening in your field, but also why it is interesting &lt;em&gt;per se&lt;/em&gt;. When you&#39;ve managed to do it, you can say &quot;You know what? My research is actually kinda cool!&quot;.&lt;/p&gt;

&lt;h1&gt;You will get organized (whether you like it or not)&lt;/h1&gt;

&lt;p&gt;Most of the grants applications I&#39;ve had to write ended with something like a tentative schedule. At first I hated it, because I believe in serendipity. But then I realized that it&#39;s actually a good thing, and I wrote one such section even when it was not explicitly required. It forced me to ask myself a really important question: where do I think I&#39;ll be able to bring these ideas in the next 6 months, two years, five years? What kind of projects do I want to do, and what is the best (least costly, faster, and most risk-free) way to do what I propose?&lt;/p&gt;

&lt;p&gt;So yes, I&#39;ve learned a lot while writing grant applications, so some good will come out of it whether they are successful of not. But for all the fun I&#39;ve had, I can&#39;t wait to go back to actually &lt;em&gt;doing&lt;/em&gt; some science. Once I&#39;ve graded the undergrads papers. And replied to the referees for papers needing revisions. And applied to money to get me to workshops. So, perhaps someday...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Bacteria-phage networks</title>
     <link href="http://timotheepoisot.fr/2012/12/19/bacteria-phage-networks/"/>
    <updated>2012-12-19T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m really glad to announce that the review paper we have been working on with Joshua Weitz, Justin Meyer, Cesar Flores, Sergi Valverde, Matthew Sullivan and Mike Hochberg is now &lt;a href=&quot;http://linkinghub.elsevier.com/retrieve/pii/S0966842X12002004&quot;&gt;online at &lt;em&gt;Trends in Microbiology&lt;/em&gt;&lt;/a&gt; (PDF, as always, available by clicking &lt;em&gt;Papers&lt;/em&gt; on the sidebar). It&#39;s a great and exciting paper, in which we propose that bacteria-phage interactions should be studied as networks, rather than just pairs of interactions. Because the goal of the paper is to interest more people into the network methodology, the figure are really interesting. If you want a crash course in nestedness or modularity, then you should definitely have a read.&lt;/p&gt;

&lt;p&gt;I&#39;ll cite from the concluding remarks:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We have synthesized and reviewed the study of complex patterns of infection between phages and bacteria via the unifying concept of a PBIN. We find that non-random patterns, in particular, nestedness and modularity are repeatedly observed. &lt;strong&gt;Although genetic models of coevolution exist to explain both classes of patterns in simple, low-diversity communities, there is no unified theory of coevolution that can explain the emergence of complex interaction patterns in diverse communities.&lt;/strong&gt; In this review, we have focused on the antagonistic mode of interaction between phages and bacteria. Looking forward, there is a need to extend network methodologies and tools to the study of viruses of currently underrepresented bacterial hosts, viruses of algae and of archaea, as well as viruses with alternate infection strategies (&lt;em&gt;e.g.&lt;/em&gt;, lysogeny). Novel culture-independent methods and novel computational tools will be essential to connect genomic, functional, and ecological information in predicting cross-infection at the community scale. Improving the ability to quantify and predict viral infection of hosts constitutes a key challenge in assessing the functional effects of viruses in the environment.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Emphasis is mine, and I think that simple experiments with bacteria and phages can (will) provide interesting insights about how coevolution can be appreciated as a driver of change in networks. This is a subject I&#39;ve &lt;a href=&quot;http://rspb.royalsocietypublishing.org/content/early/2011/06/02/rspb.2011.0826.full&quot;&gt;discussed during my doctorate&lt;/a&gt;, and I&#39;d really like to keep on doing things on it.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The friends of my friends (are on twitter)</title>
     <link href="http://timotheepoisot.fr/2012/12/15/face-of-twitter/"/>
    <updated>2012-12-15T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Twitter is cool for science, because it can &lt;a href=&quot;http://timotheepoisot.fr/2011/11/19/get-your-lab-on-twitter/&quot;&gt;help you spread your ideas&lt;/a&gt;. And when you work with networks, Twitter is cool because it means a huge amount of data. With virtually no sampling effort. What has been said on the dynamics of, &lt;em&gt;e.g.&lt;/em&gt;, the Arab Spring, using social networks, was amazing, and I started developping a curiosity about what can be said about them with an ecological eye.&lt;/p&gt;

&lt;p&gt;I&#39;m running pilots for a cool side project involving this kind of things, so I spent some time playing around with various metrics. One I liked a lot come from a paper by &lt;a href=&quot;http://www.pubmedcentral.nih.gov/articlerender.fcgi?artid=2148393&amp;amp;tool=pmcentrez&amp;amp;rendertype=abstract&quot;&gt;Olesen and colleagues&lt;/a&gt; about the modularity of mutualistics interactions. In a few words, you can measure, for each species, its contribution to its own module (&lt;em&gt;z&lt;/em&gt;), and to other modules (&lt;em&gt;c&lt;/em&gt;). The relative values of &lt;em&gt;c&lt;/em&gt; and &lt;em&gt;z&lt;/em&gt;  allows then to classify a node as &quot;peripherals&quot; (just hanging around), &quot;connectors&quot; (not really involved locally, but really involved in other groups), &quot;module hubs&quot; (highly involved locally, but not really involved globally), and &quot;network hubs&quot; (connected both within their group, and globally). Doing so requires to have cutoffs, the rationale for which is still not clear to me (but I&#39;ll go read the original paper). Nonetheless, high values of &lt;em&gt;c&lt;/em&gt; indicate that a node is strongly connected outside its community, and high values of &lt;em&gt;z&lt;/em&gt; indicates that it his highly connected within its community.&lt;/p&gt;

&lt;p&gt;This is an ecological tool that I can understand, and it makes sense in a social perspective, so I decided to see what these values look like in a twitter network. The data I&#39;m working on are all of my followers, and all of my friends, and all of the interactions between them. Getting these data, with a bunch of &lt;a href=&quot;https://github.com/bear/python-twitter&quot;&gt;python programming&lt;/a&gt;, is quite easy (although terribly long, because the number of requests per hour is limited). I ended up with 18505 edges, and 505 nodes. Not that high, but hey, still &lt;a href=&quot;http://www.nceas.ucsb.edu/interactionweb/resources.html&quot;&gt;larger than most food webs we know&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/twittzoom.png&quot; title=&quot;Twitter network&quot; alt=&quot;Figure1 - twitter zoom&quot; /&gt;
The first (striking) thing is that my network is less modular than I would have expected. You see a few cliques, the more remote (purple) one being my french contacts, and the green and red nodes are other people related to science and the environment in various ways. What about the &lt;em&gt;c&lt;/em&gt; and &lt;em&gt;z&lt;/em&gt; values? I&#39;m coming to it. The question I decided to play with is the following. On twitter, you can follow, and be followed. Assuming that information travels from the follower to the followee, this is a benefit for the later, who receives new informations. A mutualistic relationship is then defined as a bi-directional interaction (i.e. reciprocal following). So, who are the people with the most mutualistic behavior?&lt;/p&gt;

&lt;p&gt;To start, let&#39;s define a metric of cooperativeness, which would tell us how many of the people who follow me I follow back. Let&#39;s call &lt;em&gt;Di&lt;/em&gt; the number of incoming links, and &lt;em&gt;Do&lt;/em&gt; the number of outgoing links. Then we&#39;ll call &lt;em&gt;S&lt;/em&gt; the number of outgoing links to someone with an incoming link to me. Let&#39;s finally call &lt;em&gt;U&lt;/em&gt; the number of people who follow me, but who I don&#39;t follow. We want an expression of all these terms, which is close to 1 when &lt;em&gt;U&lt;/em&gt; is close to 0, and close to 0 when &lt;em&gt;S&lt;/em&gt; becomes smaller than &lt;em&gt;U&lt;/em&gt;. It&#39;s not too difficult to find an expression, such as&lt;/p&gt;

&lt;p&gt;$$R = \frac{S}{S+U}$$&lt;/p&gt;

&lt;p&gt;As we can express &lt;em&gt;U = Di - S&lt;/em&gt;, I fixed the &quot;reciprocity coefficient&quot; as:&lt;/p&gt;

&lt;p&gt;$$R = \frac{S}{D_i}$$&lt;/p&gt;

&lt;p&gt;And assumed that the higher it is, the more mutualistic people are. The two biggest correlates of &lt;em&gt;R&lt;/em&gt; are the number of people you follow (&lt;em&gt;Do&lt;/em&gt;, r = 0.49), and your contribution to your own module (&lt;em&gt;z&lt;/em&gt;, r = 0.47). Surprizingly, there was no correlation between your ability to connect different modules (&lt;em&gt;c&lt;/em&gt;) and your likelihood of friending people who friend you. At this point, note that, given that the network is directional, all the algorithms used account for this. A node with incoming links from all modules (&lt;em&gt;i.e.&lt;/em&gt; getting information from all), but no outcoming link (&lt;em&gt;i.e.&lt;/em&gt; giving information to none) has a low value of &lt;em&gt;c&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;So there it is. People active in their community are more likely to return your friendship, and people active across all communities are less likely to do so. There are now a few things I would like to do with this network (more details about the modules, and things related to null models). One of the most exciting potential is to go through the second degree of separation, &lt;em&gt;i.e.&lt;/em&gt; the friends of my friends, and all of their interactions. Last time I checked, it resulted in several &lt;em&gt;millions&lt;/em&gt; nodes, and a lot more interactions. Scalability issues become key, and the only solution is to have a brutally huge amount of RAM to run things on (because network algorithms get dirty really fast). I do have that -- though what I don&#39;t have is that time to implement new code.&lt;/p&gt;

&lt;p&gt;Network ecologists should probably pay attention to what happens in social network analysis. It&#39;s becoming a science dealing with large amounts of data. This means that they are developping efficient data structures (you &lt;a href=&quot;http://timotheepoisot.fr/2012/11/23/how-to-represent-networks/&quot;&gt;know where I stand on this point&lt;/a&gt;), and efficient algorithms to deal with them. As we can safely expect that we&#39;ll have access to both more networks, and more species and interactions in these networks, we should not pass the opportunity to develop tools, and train ourelves to their use, on the data already out there. Complementarily, there are some questions which could definitely benefit from some ecological tools. Playing with this network, I understood what Newman mentionned in &lt;em&gt;Networks&lt;/em&gt;: the problem of network analysis is that so many people use the tools for so many different things, that the methodology and the litterature are bound to form isolated clusters.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;P.S.:&lt;/strong&gt; For those interested, I used &lt;a href=&quot;https://gephi.org/&quot;&gt;gephi&lt;/a&gt; and &lt;a href=&quot;http://networkx.lanl.gov/&quot;&gt;networkx&lt;/a&gt; for all the analyses. &lt;em&gt;Gephi&lt;/em&gt; is wonderful for plotting, and &lt;em&gt;networkx&lt;/em&gt; is just wonderful. I&#39;ve also tried the R and Python version of the &lt;em&gt;igraph&lt;/em&gt; library, but I prefer the syntax in &lt;em&gt;networkx&lt;/em&gt;.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>How to represent networks</title>
     <link href="http://timotheepoisot.fr/2012/11/23/how-to-represent-networks/"/>
    <updated>2012-11-23T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;One big problem to people working with ecological networks is that most of the time, the data are not easy to get. Collections of food webs or mutualistic networks are passed from researcher to researcher, and it can be difficult to get your hands on a large database. Even if you have the data, you still have to put them in a &quot;good&quot; format, and it&#39;s not always an easy task. It implies looping through text files, putting the webs in good shape, looking for species names, and so forth.&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;h4&gt;Warning!&lt;/h4&gt;
This is a long entry, with code, and geeky considerations about data format. It&#39;s mostly for my personnal reference, so you may want to find &lt;a href=&#39;http://www.theuselessweb.com/&#39;&gt;a better way to waste your time&lt;/a&gt;.
&lt;/div&gt;


&lt;h1&gt;The problem&lt;/h1&gt;

&lt;p&gt;As an example, look at what is available on the &lt;a href=&quot;http://www.nceas.ucsb.edu/interactionweb/&quot;&gt;InteractionWeb Database&lt;/a&gt;. For our &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00174.x/abstract&quot;&gt;&lt;em&gt;Methods in Ecology &amp;amp; Evolution&lt;/em&gt; paper&lt;/a&gt; on estimators of species specificity, I had to fetch all of the networks, then look on the main page the number of top and bottom level species, then check that they were always in the same configuration. To make a long story short: they were not. It did not took me this long to get it right, but it was frustrating. I had to open an Excel file, with the network &quot;code&quot;, the text file path, the number of top and bottom level species, and finally the type of interaction. Difficult? No. Boring? Yes.&lt;/p&gt;

&lt;p&gt;Keep in mind that &lt;em&gt;IWDB&lt;/em&gt; is the only resource for people wanting to download networks to, &lt;em&gt;e.g.&lt;/em&gt; test algorithms, or check the distribution of some properties. And it involved a lot of groundwork before you even get to do the basic stuff. This is frustrating, and this should not be. Which brings me to a question that has been floating in my mind for a few months now: how should interaction networks be coded, from a data management point of view? This is an important question, because our ability to develop networks as a predictive tool will be as good as our ability to do data-mining on these networks. And in 2012, looking through text files is not the solution (it should not even be considered &lt;em&gt;a&lt;/em&gt; solution). And yes, I&#39;m ashamed to be part of the problem, because when I recently released data about &lt;a href=&quot;http://figshare.com/articles/Bacteria-phage_adjacency_matrix_along_an_environmental_gradient/97583&quot;&gt;bacteria-phage interactions&lt;/a&gt;, I put three text files in a zip archive, and called it a day. Then, while I was thinking about why &lt;a href=&quot;http://timotheepoisot.fr/2012/10/29/species-interaction-networks/&quot;&gt;populations matter more than species&lt;/a&gt; in the context of networks, I started to develop a feeling about a data structure.&lt;/p&gt;

&lt;p&gt;It starts with a simple question: &lt;em&gt;what&#39;s in a network&lt;/em&gt;? One way networks are usually represented is as a matrix (the &lt;em&gt;IWDB&lt;/em&gt; will give informations this way):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;0 1 1 0
0 0 0 1
0 0 0 1
0 0 0 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Alternatively, we can write them as an edge list:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;a b
a c
c d
b d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Both notation represent the same &quot;diamond&quot; food web, and can also convey some information about link strength, species biomass, &lt;em&gt;etc&lt;/em&gt;. But do they convey a lot of &lt;em&gt;ecological meaning&lt;/em&gt;? I&#39;m not really sure. So instead of having all the network at one big entity, let&#39;s break it down in several smaller chunks. A network is a collection of interactions, so let&#39;s start by representing an interaction.&lt;/p&gt;

&lt;h1&gt;A solution?&lt;/h1&gt;

&lt;p&gt;In the most basic sense, an interaction is the union of two populations. This should be the building bloc of our network database:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;ID&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyDB_I_00001&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;from&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyDB_P_00001&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;to&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyDB_P_00002&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;info&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;binary&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;directional&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;strength&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;predation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;notes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is a simple &lt;a href=&quot;http://en.wikipedia.org/wiki/JSON&quot;&gt;JSON&lt;/a&gt; object, with three central informations: a unique indentifer (&lt;code&gt;ID&lt;/code&gt;), two species (&lt;code&gt;from&lt;/code&gt; and &lt;code&gt;to&lt;/code&gt;), and a series of informations (&lt;code&gt;info&lt;/code&gt;). Within &lt;code&gt;info&lt;/code&gt;, you have two booleans; &lt;code&gt;binary&lt;/code&gt; tells you if this is a presence/absence or quantitative measure, &lt;code&gt;directional&lt;/code&gt; tells you if the interactions is, well, directional (in which case &lt;code&gt;from&lt;/code&gt; and &lt;code&gt;to&lt;/code&gt; are important), and &lt;code&gt;strength&lt;/code&gt; is the interaction strength. Finally, the &lt;code&gt;type&lt;/code&gt; property can tell which kind of interaction this is. Not rocket science so far.&lt;/p&gt;

&lt;p&gt;Note that the identifier for species and interactions I used have some structure to them: name of the database, type of object, object identifier. This ensure that every group can maintain its own database (&lt;em&gt;e.g.&lt;/em&gt; my test one on the university servers can use the prefix &lt;code&gt;uqar_&lt;/code&gt;), and if you choose to clone databases from other people, then you still know where the information come from. The second part is &lt;code&gt;I&lt;/code&gt; if the object is an interaction, and &lt;code&gt;P&lt;/code&gt; if it is a population. The last part is a unique identifier. All of this can be automatically filed when interactions are deposited into the database.&lt;/p&gt;

&lt;p&gt;Poincarré said that you make a science with facts as you make a house with bricks, but a pile of facts is not a science anymore than a pile of bricks is a house. Just like a collection of interactions is not a network. The first thing we need to do is to define another object, for networks. It&#39;s not really complicated. The edge list I&#39;ve mentionned above is interesting because it sortes informations quite efficiently (there are much more non-interactions than they are interactions, so a matrix is a waste of space). Let&#39;s have our network be a list of interactions:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;ID&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyDB_N_0001&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;links&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;MyDB_I_&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00001&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;MyDB_I_&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00002&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;MyDB_I_&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00003&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;date&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;2012_14_11&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;GPS&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;48_28_14_n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;68_31_17_o&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;env_type&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;microcosm&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;notes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This should be relatively straigthforward. There is, again, an &lt;code&gt;ID&lt;/code&gt;. The &lt;code&gt;links&lt;/code&gt; component is a list of interactions, &lt;em&gt;i.e.&lt;/em&gt; the list of &lt;code&gt;ID&lt;/code&gt; of interactions. The other fields are a minimum set of informations, namely the time, place, and type of environment.&lt;/p&gt;

&lt;p&gt;This may seem like a lot of brackets for basically the same result as the edge list. But the interesting point is that, by having an object for populations, we can start adding &lt;em&gt;a lot&lt;/em&gt; of ecological context to these data. As an example:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;ID&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyDB_P_00001&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;tax&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;MyBD_S_00001&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;pop&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;units&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;individuals&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;traits&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;body_size&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;measure&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;mean&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;units&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;cm&amp;quot;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;body_mass&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;measure&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;mean&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;362.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;quot;units&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;g&amp;quot;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;notes&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is probably where most of the action will happen. The interesting property here is &lt;code&gt;tax&lt;/code&gt;, which can be linked to another type of objects in the databse. Without going into more details, the &lt;code&gt;tax&lt;/code&gt; field will tell you which species or group of organism this population belongs to. For example, you can use a &lt;a href=&quot;http://bioportal.bioontology.org/ontologies/45846?p=terms&amp;amp;conceptid=EDAM%3A0001179&quot;&gt;NCBI Taxonomy ID&lt;/a&gt;. This, in turn, will allow you to go dig into &lt;a href=&quot;http://treebase.org/treebase-web/home.html&quot;&gt;TreeBase&lt;/a&gt;, using one of the &lt;a href=&quot;http://ropensci.org/&quot;&gt;ROpenSci packages&lt;/a&gt; designed to do so.&lt;/p&gt;

&lt;h1&gt;What next?&lt;/h1&gt;

&lt;p&gt;I&#39;m really interested in putting together a database to see how feasible this is. Having a robust data format, and access to all these data in a programmatic way, will greatly increase our ability to understand and compare networks. I don&#39;t think there is any chance that we&#39;ll be able to make important breakthrough, especially as far as biogeography is concerned, without a centralized database.&lt;/p&gt;

&lt;p&gt;I&#39;m still thinking about some other informations we need (bibliographic context, for example). I have a set of data from an almost-succesfull experiment, which I&#39;ll probably release as a data paper. It will be the occasion to go the extra mile, and put together something useful. And in case anybody has suggestions, I&#39;m happy to hear them.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Data sharing and the bagel effect</title>
     <link href="http://timotheepoisot.fr/2012/11/09/data-sharing-and-the-bagel-effect/"/>
    <updated>2012-11-09T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m starting to organize a collection of notes and ideas I&#39;ve had over the last year into an opinion paper about data sharing in ecology. In a word, we should share our data, and we should do it in a technically sound way - I&#39;ll tell more about these points later on. I was trying to illustrate the point that not sharing data is an absurdity, and to do so in a way that would be appealing to people.&lt;/p&gt;

&lt;p&gt;Let&#39;s imagine that you go to your local coffee shop, and order a bagel. A tasty, garnished, bagel, with bacon, eggs, and all. You order it, you pay for it. The barista makes it, and it looks delicious. As you are already imagining yourself biting into the thing, the guy behind the counter calls you, and say &quot;Hey, look, I made you a bagel!&quot;. He then takes your money, put the bagel behind the counter, and walk away. Were this situation to happen, it&#39;s likely that you&#39;ll ask for you bagel, or your money back.&lt;/p&gt;

&lt;p&gt;But as far as papers go, we are living this situation (the &lt;em&gt;bagel effect&lt;/em&gt;) every day. When you see a paper, when you read it, you have to take the author&#39;s word for it. You can &lt;em&gt;see&lt;/em&gt; the data, presented as figures, tables, and text, but you can&#39;t &lt;em&gt;taste&lt;/em&gt; them. You can&#39;t reproduce the results, and you can&#39;t certainly use these data to do &lt;em&gt;some more, new, exciting science&lt;/em&gt;, because the data are not yours.&lt;/p&gt;

&lt;p&gt;This is the core of the problem: some people still feel like &lt;em&gt;their&lt;/em&gt; data belong to &lt;em&gt;them&lt;/em&gt;. Not so long ago I asked a bunch of people (whose identity do not matter at all) to give me their data, which were published 15 years ago. Their reply was that they would be really happy to do so, &lt;em&gt;if I list them as co-authors in the paper whether they contributed or not&lt;/em&gt;. This was such an unrealistic expectation that I thought it was a clever joke. It was not. I didn&#39;t used the data.&lt;/p&gt;

&lt;p&gt;I&#39;m sure most people will have personal anecdotes like this to tell. I&#39;ve also had really positive ones. Someone saved me a lot of energy early in my PhD by giving away a few thousand lines of computer codes. I&#39;ve received an impressive dataset which resulted in a paper and a new collaboration (sadly I&#39;m still to convince my co-authors to fully release the data). One of my papers was made possible only &lt;em&gt;because&lt;/em&gt; the &lt;a href=&quot;http://www.nceas.ucsb.edu/interactionweb/resources.html&quot;&gt;IWDB&lt;/a&gt; exists. This reminded me of a sentence Claude Bernard quoted in its Introduction to the Study of Experimental Medicine &lt;em&gt;way&lt;/em&gt; back in the 1860s:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Art, is me; science, is us.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Anything less than a collaborative effort is an ego-trip, and if you refuse this collective effort to happen, then you are slowing down the scientific process. Because instead of looking at existing data, we are forced to invest time, money, and expertise into the collection of new ones. This is really wasteful process, and they are probably really good ideas that are left unexplored because some people hold on to their data so much.&lt;/p&gt;

&lt;p&gt;Now, the paper I&#39;m drafting will have a far better arguments / anecdotes ratio (hopefully). Meanwhile I&#39;d be happy to hear about how you would try to convince people to release their data, and if you had great success in doing so.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Should we care about species interaction networks?</title>
     <link href="http://timotheepoisot.fr/2012/10/29/species-interaction-networks/"/>
    <updated>2012-10-29T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;In June, I was invited to give a talk at the &lt;a href=&quot;http://www.weblife.univ-montp2.fr/&quot;&gt;&lt;em&gt;Web of Life&lt;/em&gt; meeting in Montpellier&lt;/a&gt;. It was a really exciting event, where we discussed recent results on species interaction networks, and how we can use these networks to address the impact of global changes on communities and ecosystems. I presented some (still unpublished) results about how co-evolution and meta-community processes can lead to networks having a really complex structure. In parallel, I was working on &lt;a href=&quot;http://timotheepoisot.fr/2012/09/20/beta-diversity-networks/&quot;&gt;our recent paper about the &amp;beta;-diversity of interaction networks&lt;/a&gt;, where we show that species and their interactions are locally sorted through different mechanisms.&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;h4&gt;Warning!&lt;/h4&gt;
This post is inspired by the introduction of an opinion/forum paper I&#39;m currently writing. Your impressions and comments are thus very welcome. The post is also quite probably boring if you&#39;re not into ecological networks.
&lt;/div&gt;


&lt;p&gt;I&#39;ve been discussing these results with a few people, and one of the questions that kept coming back is «but did you expect species and interactions to be sorted by the same mechanisms?». I did not. But perhaps we often imply this when working with species interaction networks, and perhaps this assumption leads us to study some processes at the wrong scale. A network (&lt;em&gt;e.g.&lt;/em&gt; food web) gives you, for a list of species, their interactions. To put this another way, it tells you that species &lt;em&gt;B&lt;/em&gt;, but not species &lt;em&gt;C&lt;/em&gt; is within the potential niche of species &lt;em&gt;A&lt;/em&gt;. In short, and especially if you infer the structure of this network from traits, or expert knowledge, you will describe interactions among species, which are &lt;em&gt;potential&lt;/em&gt; interactions. When you go in the field, and record interactions between populations of these species, you will sample the &lt;em&gt;realized&lt;/em&gt; interactions.&lt;/p&gt;

&lt;p&gt;Not making a difference between &lt;em&gt;species&lt;/em&gt;-level and &lt;em&gt;populations&lt;/em&gt;-level is what you can call an &lt;a href=&quot;http://en.wikipedia.org/wiki/Gaston_Bachelard&quot;&gt;epistemological obstacle&lt;/a&gt;. My opinion is that it&#39;s important to separate the two levels of organization, as they give us different informations. Let&#39;s start with the obvious: I&#39;ll quote straight from the introduction of &lt;a href=&quot;http://www.oup.com/us/catalog/general/subject/LifeSciences/EvolutionaryBiology/?view=usa&amp;amp;sf=toc&amp;amp;ci=9780195188165&quot;&gt;&lt;em&gt;Ecological networks: linking structure to dynamics in food webs&lt;/em&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The interactions between species on different trophic (feeding) levels underlie the flow of energy and biomass in ecosystems [...] (p. 3)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&#39;s hard to argue with this, and it should be noted that it&#39;s the basic idea behind papers linking food web structure to ecosystem functioning. And with a few minor alterations, this assertion also holds for other types of interactions. Let&#39;s put it another way: interactions between species affect their growth and persistance. I could have found something more precise, but you get the idea. And so, what is the problem? If you know that species &lt;em&gt;A&lt;/em&gt; consumes species &lt;em&gt;B&lt;/em&gt;, and you go in the field at site &lt;em&gt;1&lt;/em&gt;, observe populations &lt;em&gt;A1&lt;/em&gt; and &lt;em&gt;B1&lt;/em&gt;, what can you tell? Well, not much. What affects the &lt;em&gt;local&lt;/em&gt; flow of biomass, or growth, or whatever, is the &lt;em&gt;realized&lt;/em&gt; interaction between two &lt;em&gt;populations&lt;/em&gt;. The &lt;em&gt;potential&lt;/em&gt; interaction between two &lt;em&gt;species&lt;/em&gt; only tells you that this interaction can happen. See the epistemological obstacle right here? Because we know two species &lt;em&gt;can&lt;/em&gt; interact, do not mean they &lt;em&gt;will&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The point is, if we use networks to assess the robustness, stability, etc, of ecosystems, which information is required? Is it the potential network, or is the realized one? In the terms of our previous paper, do we care about the &lt;em&gt;metaweb&lt;/em&gt; or its &lt;em&gt;realizations&lt;/em&gt;? I have no answer to this question, but let&#39;s move on. In a perfect world, we would not care, because everything which is potential will become realized. In short, there will be no need to make a difference between species and population level networks, because interactions would be highly consistent. How perfect is the world? If you look at the data we presented in our &amp;beta;-link paper, not a lot. It was really rare to find a realization in which all potential interactions were found (the one for which it occured were of really small size). This really strongly implies that species and their interactions respond to different environmental filters.&lt;/p&gt;

&lt;p&gt;But is that a problem? Yes &amp;ndash; or rather, the fact that we don&#39;t know if it is a problem, is a problem in itself. Most of the data available (in terms of spatially replicated interaction networks) do not allow us to answer this question. Look at the Adirondack metaweb compiled by &lt;a href=&quot;http://www.sciencemag.org/content/257/5073/1107&quot;&gt;Karl Havens&lt;/a&gt;, for example. In this dataset, you have the potential interactions across all species, and a list of species for 50 lakes. In short, it describes a regional web, and we can extract the potential local webs. Not the realized ones, which would require much more sampling and direct observations, rather than litterature surveys. Can this affect the conclusions? Let&#39;s look at the final sentence of the abstract:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt; In contrast, the number of links per species increased fourfold over the range of species number, suggesting that the link-species scaling law, defined on the basis of aggregated webs, does not reflect a real ecological trend.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well... What if not all potential links are realized? What if there is a cap on the number of partners, &lt;em&gt;i.e.&lt;/em&gt; a maximum number of species you can interact with &lt;em&gt;locally&lt;/em&gt;? What if the number of effective prey items is inferior to the number of potential preys found localy? If each predator has a maximal number of prey items, at each site, then the result that the link-species scaling law is not a real trend may not hold. And for this reason, studies of networks looking only at the presence/absence of species, and infering links from previous knowledge, rather than sampling at each studied site, risk to be severaly misleading.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn%27t_read&quot;&gt;TL;DR&lt;/a&gt;: I&#39;m starting to develop the opinion that looking at &lt;em&gt;species&lt;/em&gt; interaction networks is risky when your interest is to explain local properties of the community. Switching from species to population level will require much more sampling effort, and will probably slow down the accumulation of data a bit, but on the other hand, it comes with several advantages. First, it will improve our ability to better understand network variation from place to place (or from time to time). Second, it will help making &lt;em&gt;explicit&lt;/em&gt; links between (local) interaction structure and (local) ecosystem properties. And last but not least, it&#39;s probably the only path to a biogeography of species interactions anyway...&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Presenting the results of networks null models</title>
     <link href="http://timotheepoisot.fr/2012/10/09/null-models-presentations/"/>
    <updated>2012-10-09T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m in the process of preparing a paper for submission, and I have been looking for a way to intuitively display the results of an analysis in which we compare deviation from expected nestedness and modularity of bipartite networks. In a recent paper, &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/21709225&quot;&gt;Cesar Flores and colleagues&lt;/a&gt; show rank-nestedness and rank-modularity curves, which is an interesting idea. But a point I really wanted to make is that a single network can deviate on both properties, and in both directions (which is to say, you can be more nested and less modular than expected, or less modular and equally nested, etc.).&lt;/p&gt;

&lt;p&gt;All in all, there are only nine possible states for a network, if you test nestedness and modularity. It&#39;s a simple combination of the network being possibly less, equally, or more nested/modular, so 3 times 3 states. The visualization I settled with is halfway between a table and a figure:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/nullmodels.png&quot; title=&quot;nullmodels&quot; alt=&quot;Figure1 - heatmap&quot; /&gt;
The number within each quadrant represent how many networks have this property (&lt;em&gt;e.g.&lt;/em&gt; for the leftmost dataset, 72 networks are both more nested and more modular than expected), and the shading is a measure of the proportion of networks falling within each quadrant. I quite like this method, because as illustrated above, you can easily compare different datasets at a glance, even when the number of networks differ. And you also get a sense of some interesting phenomenon: in the middle dataset, networks are clearly more nested, but equally less or more modular than expected.&lt;/p&gt;

&lt;p&gt;The figures were made in &lt;code&gt;tikz&lt;/code&gt;, and the code is really nothing complicated. If some of you are interested, it looks like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\tikzstyle&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;val&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt; = [minimum size=1cm, inner sep = 0pt, draw=black, thick]
&lt;span class=&quot;k&quot;&gt;\begin&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!9]&lt;/span&gt; (mpnn) at (0, 0) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;12&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!2, right of=mpnn]&lt;/span&gt; (mpne) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;8&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!57, right of=mpne]&lt;/span&gt; (mpnp) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;72&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!2, below of=mpnn]&lt;/span&gt; (menn) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;3&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!4, below of=mpne]&lt;/span&gt; (mene) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;6&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!9, below of=mpnp]&lt;/span&gt; (menp) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;12&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;

    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!1, below of=menn]&lt;/span&gt; (mnnn) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;2&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!0, below of=mene]&lt;/span&gt; (mnne) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;1&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[val, fill=black!7, below of=menp]&lt;/span&gt; (mnnp) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;9&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;

    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, left of=menn]&lt;/span&gt; (mQ) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Q_{bip}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, left of=mpnn]&lt;/span&gt; (mQp) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;+&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, left of=mnnn]&lt;/span&gt; (mQn) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;-&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, below of=mnne]&lt;/span&gt; (nodf) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, below of=mnnp]&lt;/span&gt; (nodfp) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;+&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, below of=mnnn]&lt;/span&gt; (nodfn) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;-&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;\node&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[draw=none, fill=none, above of=mpne]&lt;/span&gt; (lab) &lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;Panel title&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;;
&lt;span class=&quot;k&quot;&gt;\end&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;tikzpicture&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
  </entry>
  
  <entry>
     <title>Can phage increase bacterial growth?</title>
     <link href="http://timotheepoisot.fr/2012/10/02/bacterial-terminal-investment/"/>
    <updated>2012-10-02T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;In the early days of my PhD (I probably started a week or two before that), I attended the &lt;em&gt;BRIDGES&lt;/em&gt; workshop in &lt;a href=&quot;http://www.ceab.csic.es/&quot;&gt;Blanes&lt;/a&gt;. The goal of this workshop was to bring together microbial ecologists and general ecologists. Back in Montpellier, Mike Hochberg, Tom Bell and I discussed the classical results of &lt;a href=&quot;http://plankt.oxfordjournals.org/content/17/8/1661.short&quot;&gt;&lt;em&gt;Daphnia&lt;/em&gt; changing their behavior when exposed to predators&lt;/a&gt;, and wondered if we can get this cool result with bacteria and phages. Why? Because we were working on that system, and I was supposed to focus on stress responses (then I joined the dark side, and started doing ecology-related stuff).&lt;/p&gt;

&lt;p&gt;We&#39;ve been doing a lot of tests, including mechanical massaging of the bacteria with super-small silicate beads to see if it changed their growth rate. There was, actually, a rational discussion leading to «Yes, massaging bacteria with microscopic beads to find out if they behave like &lt;em&gt;Daphnias&lt;/em&gt; exposed to predators is a sound scientific idea». We had to order the beads from an aeronautic company. The first vesion of the paper was rejected with &lt;em&gt;extreme&lt;/em&gt; prejudice by the referees, but we were still confident in the surprizing effect we described: when exposed to bacteriophages, bacteria grow faster than alone. Which was cool, because it means like something similar to what Tim Clutton-Brock called &lt;a href=&quot;http://www.jstor.org/stable/2461034&quot;&gt;terminal investment&lt;/a&gt; was acting in bacteria. In short: when the chance of surviving is low because of predators, the best strategy is to put all your eggs in the reproductive basket. Can organisms as small as bacteria show this much foresight?&lt;/p&gt;

&lt;p&gt;We decided to start the experiment over, and desactivated phages with UV exposure. It was greatly simplified by the fact that our home-made primer to detect the bacteria also amplified a 250 bp region on the phage genome­, showing that (i) molecular biology is full of surprizes, and (ii) &lt;a href=&quot;http://abstrusegoose.com/494&quot;&gt;lucky is better than good&lt;/a&gt;. When bacteria were exposed to this mix, they grew faster (twice faster, to be precise, which is no small difference), but at the cost of individual cell size. Because they wait less between two division events, each bacterial cell decreases its size, which clearly goes in the sense of &lt;a href=&quot;http://www.imdb.com/title/tt0084726/quotes&quot;&gt;the needs of the many outweighing the needs of the few&lt;/a&gt; (because how much cooler would it have been if &lt;em&gt;terminal investment&lt;/em&gt; had been called &lt;em&gt;The Wrath of Kahn effect&lt;/em&gt;?). The effects almost disappeared 4 days after the first contact with the phages (which, in the case of bacteria, is already an evolutionary timescale), so it kind of suggests a plastic, transient response. It took us an incredibly high number of extremely frustrating trials to get it right (I&#39;d say we had to do it about 10 times before we were sure), it cost me a few nights of lab work in the first trials, but the result is so cool that it was worth it.&lt;/p&gt;

&lt;p&gt;Anyway, &lt;a href=&quot;http://f1000research.com/articles/terminal-investment-induced-by-a-bacteriophage-in-a-rhizosphere-bacterium/&quot;&gt;the paper is now available on F1000 Research&lt;/a&gt;, and the data are available on FigShare. Obviously there are more questions asked than answered by this paper. Do bacteria become smaller to avoid contact with phages? We found no really significant effect. Why do the growth rate increases, is this some form of altruism? What are the evolutionary implications of this response? Is it defense by the bacteria, or manipulation by the phage? Quoting from any book of algebra ever written, the answers are «left as an exercise to the reader».&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Measuring the beta-diversity of species interaction networks</title>
     <link href="http://timotheepoisot.fr/2012/09/24/measuring-beta-diversity-networks/"/>
    <updated>2012-09-24T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;To reproduce the analyses presented in &lt;a href=&quot;http://timotheepoisot.fr/2012/09/20/beta-diversity-networks/&quot;&gt;our latest paper&lt;/a&gt;, we wrote the &lt;a href=&quot;https://github.com/tpoisot/betalink&quot;&gt;&lt;code&gt;betalink&lt;/code&gt;&lt;/a&gt; R package. This post is a walkthrough for most of the analyses. The help is not fully completed yet, and in any case, seeing examples is more informative than reading the manual. First thing first, go to the previous link, and download the package. Unzip it, open a terminal, and type&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;R CMD INSTALL betalink
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you open &lt;code&gt;R&lt;/code&gt;, you can now load the package with&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;betalink&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Past this point, I&#39;m assuming you are familiar with our terminology, but if not, you can go &lt;a href=&quot;http://timotheepoisot.fr/2012/09/20/beta-diversity-networks/&quot;&gt;&lt;strong&gt;read the previous post&lt;/strong&gt;&lt;/a&gt; (or even better, the paper). The package will think about collection of networks, most of the time. So you absolutely need to have a &lt;code&gt;list&lt;/code&gt; of &lt;code&gt;matrix&lt;/code&gt; objects. It&#39;s obviously important that species are named, &lt;em&gt;i.e.&lt;/em&gt; set the &lt;code&gt;colnames&lt;/code&gt; and &lt;code&gt;rownames&lt;/code&gt; properties. The package do not care if you feed it unipartite or bipartite networks. This means that you can have the same names in rows ans columns (like you would in a food web), or you can have two distinct sets of names (like you would in a bipartite network).&lt;/p&gt;

&lt;p&gt;Let&#39;s start with a simple example: two hosts, two parasites, two realizations:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;w1 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; matrix&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; ncol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
w2 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; matrix&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; ncol&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;p1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;p2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;h1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;h2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; rownames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first step is to put these networks into a list:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;realizations &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; w2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, we cant ask about the metaweb. The package proposes the &lt;code&gt;aggregate.metaweb&lt;/code&gt; function:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;metaweb &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; aggregate.metaweb&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;realizations&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The object returned is a list with three elements, &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;template&lt;/code&gt;, and &lt;code&gt;cooc&lt;/code&gt;. All three objects are matrices, which correspond to different informations about the metaweb. &lt;code&gt;meta&lt;/code&gt; is the one you are most likely to use, as it is the adjacency matrix of the metaweb. &lt;code&gt;template&lt;/code&gt; is a matrix giving the frequency at which two species interacted (&lt;em&gt;i.e.&lt;/em&gt; the total number of realizations in which they interacted, over the total number of realizations in which they co-occured). Finally, &lt;code&gt;cooc&lt;/code&gt; gives the number of times two species co-occured, across all realizations. Note that most of the time, the &lt;code&gt;aggregate.metaweb&lt;/code&gt; function will be called internally, so except when you want to have a look at the metaweb itself, there are few reasons to call it.&lt;/p&gt;

&lt;p&gt;The next step is to measure the dissimilarity between your two networks. Once again, the process is mostly automated. Your need to pick a &amp;beta;-diversity measure, to start. We implemented the 23 listed by Koleff and colleagues in their 2003 paper. They are coded &lt;code&gt;B01&lt;/code&gt; to &lt;code&gt;B23&lt;/code&gt;. In all functions, the default is to use &lt;code&gt;B01&lt;/code&gt;. Note that if you want to use quantitative measures, the &lt;em&gt;framework&lt;/em&gt; allows it, but this is not currently implemented in the &lt;em&gt;package&lt;/em&gt; &amp;mdash; but this is really simple to do if you need.&lt;/p&gt;

&lt;p&gt;For any set of two networks, you can just call&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;betalink&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;w1&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; w2&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; bf&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;B01&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;However, if you have a lot more networks, then the process can be automated, and you will get a pairwise distance matrix, through&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;betalink.dist&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;realizations&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; bf&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;B01&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you look at the code for the &lt;code&gt;betalink.dist&lt;/code&gt; function, you will see that the last argument is actually the catch-all, &lt;code&gt;...&lt;/code&gt;. This means that if you want to modify the &lt;code&gt;betalink&lt;/code&gt; function, which &lt;code&gt;betalink.dist&lt;/code&gt; calls, you will be able to keep using &lt;code&gt;betalink.dist&lt;/code&gt;. The only difference between &lt;code&gt;betalink.dist&lt;/code&gt; and &lt;code&gt;betalink&lt;/code&gt; is that the later returns the species &amp;beta;-diversity for each side of the matrix separately (&lt;em&gt;i.e.&lt;/em&gt; for the upper and lower levels in bipartite networks). Other than that, you get all of the components of the network &amp;beta;-diversity, either as a list, or as a list of distance objects. Note that if your realizations are named, then the rows and columns of these distance matrices will be named as well.&lt;/p&gt;

&lt;p&gt;At this point, you might want to &lt;em&gt;see&lt;/em&gt; how things look, rather than just look at numbers. This option is nowhere in the paper, but I actually developed a way to plot network dissimilarity. You can use it through the &lt;code&gt;betalink.plot&lt;/code&gt; function, which takes two realizations as arguments. It will plot a matrix, when interactions are color-coded: interactions which are found in both networks and do not experience turnover are in grey; interactions between species unique to realization one or two are, respectively, in green and blue; finally, interactions which are established betwen shared species, but experience turnover, are in orange. The good thing with this visualisation, an example of which is given below, is that, by looking at the relative area of each color, you can guesstimate the values of the different components of &amp;beta;-diversity. A large grey/orange area means that most species are shared. More orange than grey means the turnover of interactions between shared species is high. And so on. The example below uses random networks, but you see the general idea.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/betaplot.png&quot; title=&quot;betaplot&quot; alt=&quot;Figure1 - the betaplot&quot; /&gt;
   &amp;nbsp;&lt;/p&gt;

&lt;p&gt;The last thing you may want to do is to measure the distance of each realization to the relevant portion of the metaweb (see Appendix 1 for the many reasons to do it). To do so, just use the &lt;code&gt;beta.os_prime&lt;/code&gt; function, whose argument are a list of webs, and a &amp;beta;-diversity measure.&lt;/p&gt;

&lt;p&gt;You&#39;re now good to go, feel free to fork the package if you have any improvements to do, and email me in case of problems, I&#39;ll be glad to help you!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The beta-diversity of species interaction networks</title>
     <link href="http://timotheepoisot.fr/2012/09/20/beta-diversity-networks/"/>
    <updated>2012-09-20T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Have you ever sampled interaction networks, and wished there were a good method to measure how dissimilar they are? Or have you ever thought about &amp;beta;-diversity of species interactions? Do you just love good science? If you answered yes to any of these questions, then &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/ele.12002/abstract&quot;&gt;you should read our &lt;em&gt;Ecology Letters&lt;/em&gt; paper, now online&lt;/a&gt;. We propose a way to measure the &amp;beta;-diversity of networks (any kind of network, unipartite, bipartite, quantitative, ...), and propose some ideas about what we can learn from thinking about these networks in a biogeographical perspective.&lt;/p&gt;

&lt;p&gt;When you think about networks over space, it is important to make a distinction between what occurs at the regional and the local level. In short, what happens at the regional level is potential, and the local observation is realized. Species sorting is hardly a groundbreaking idea in ecology, but perhaps we should think more about interactions sorting. Not because two species that can interact co-occur at one site mean that they will interact at this site. In our paper, we propose that the regional pool of species and their interactions be called a &lt;em&gt;metaweb&lt;/em&gt;, and what is effectively realized locally be called a &lt;em&gt;realization&lt;/em&gt;. These are two key levels of interpretation to understand the &amp;beta;-diversity of networks.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/metaweb.png&quot; title=&quot;metaweb&quot; alt=&quot;Figure1 - the metaweb&quot; /&gt;
What we propose in our paper is two-fold. First, we lay out a methodological framework to measure how realizations differ between them. Second, we think about what we can learn from these methods, in terms of networks biogeography. I&#39;ll go shortly over these two aspects in turn. There is an extensive litterature on &amp;beta;-diversity of species composition, which was begging to be adapted to networks. Formally, any set of interactions is a group of two objects, the nodes (species) and the edges (their interactions). Measuring species &amp;beta;-diversity is easy. Measuring &amp;beta;-diversity of interactions is not. The problem is that in order to have an interaction, you have to have two species present. So the &amp;beta;-diversity of interactions is really contingented by the species &amp;beta;-diversity.&lt;/p&gt;

&lt;p&gt;Let&#39;s be naïve for a moment. We can simply treat each interaction as an item, which can be shared, or unique, across two sites (we propose a multi-site extension in the paper, but more on that later). This will give us a &lt;em&gt;whole-network dissimilarity&lt;/em&gt;, &amp;beta;&lt;sub&gt;WN&lt;/sub&gt;. This, obviously is positively correlated with the &lt;em&gt;species dissimilarity&lt;/em&gt;, &amp;beta;&lt;sub&gt;S&lt;/sub&gt;. But because interactions for which not all species co-occur cannot be compared, we can extract the &quot;common denominator&quot; for both networks, &lt;em&gt;i.e.&lt;/em&gt; only the interactions between species present at both sites. We call this the &lt;em&gt;overlapping species dissimilarity&lt;/em&gt;, &amp;beta;&lt;sub&gt;OS&lt;/sub&gt;. If you want to measure this on your own data, go download the &lt;a href=&quot;https://github.com/tpoisot/betalink&quot;&gt;&lt;code&gt;betalink&lt;/code&gt;&lt;/a&gt; package for R (see the wiki for a quickstart, and use the Issues page for help). But this paper is not a methods paper, so I&#39;ll put another post online this week to explain how to do the analyses.&lt;/p&gt;

&lt;p&gt;The interesting point is that &amp;beta;&lt;sub&gt;S&lt;/sub&gt; and &amp;beta;&lt;sub&gt;OS&lt;/sub&gt; show no correlation. We can go into some details about what it means, but to be short: species and their interactions are locally sorted by different mechanisms. I will repeat the last slide of my &lt;a href=&quot;http://www.confersense.ca/Evolution2012/&quot;&gt;Evolution2012&lt;/a&gt; presentation: because we can measure a &amp;beta;-diversity of interactions means that we &lt;em&gt;can&lt;/em&gt; develop a biogeographic theory for their occurence; because the &amp;beta;-diversity of interactions is not the same that the &amp;beta;-diversity of species mean that we &lt;em&gt;should&lt;/em&gt; develop this theory. So how much closer does this paper leaves us from this theory?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/IntSpSorting.png&quot; title=&quot;Interactions and Species sorting&quot; alt=&quot;Figure2 - interactions and species sorting&quot; /&gt;
Quoting from the last paragraph:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;[F]urther understanding of the processes acting on network structure through space is contingent upon our ability to gather sufficient high-quality data. While it is now easy, and tempting, to build on recent theoretical studies to speculate about what a biogeographical theory of species interaction would look like, it is our opinion that this reasoning would be better grounded in data. [G]athering enough networks to adequately describe the metaweb is a difficult task, and assuming that species co-occurence is enough for an interaction to happen is not a sufficient sampling strategy. For this reason, we think it is time for the community of ecologists interested in interaction networks to engage in a discussion about the best way to gather data from the field, as this will pave the way to a biogeographical theory of species interactions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In short, and this was (kind of) the conclusion of my Ottawa talk, we need more data. At this point, it&#39;s easy to do models, and to further speculate on which mechanisms will act. But there are only few datasets on which we can &lt;em&gt;test&lt;/em&gt; this speculation, making it a little bit vain. More importantly, we need &lt;em&gt;better&lt;/em&gt; (more suited) data. Replication of the same metaweb in space, or time; rich information about the environmental conditions; actual measurement of wether populations locally interact or not; just to name a few. The excellent theoretical work that was done in the last few years is far from useless, but until we go back to the field (or design clever experiments in microcosms...), my impression is that it will not be as beneficial as it should be.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Notes on learning how to use sympy</title>
     <link href="http://timotheepoisot.fr/2012/08/15/notes-on-using-sympy/"/>
    <updated>2012-08-15T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m trying to move to &lt;code&gt;sympy&lt;/code&gt; for all my symbolic calculations. This post is just some notes taken during my first attempt, in which I&#39;m playing with a simple host-parasite model. I was reading the &lt;a href=&quot;http://docs.sympy.org/0.7.1/tutorial.html#first-steps-with-sympy&quot;&gt;&lt;em&gt;First steps with sympy&lt;/em&gt;&lt;/a&gt; section of the website when I was running my little tests, and it&#39;s relatively helpul.&lt;/p&gt;

&lt;p&gt;So let&#39;s assume we have a classical host-parasite duo, with intra-specific host competition, and intrinsic mortality in the parasite. Its instantaneous dynamics can be written as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dH}{dt} = H \times \left( r - q\times H - \beta \times P \right)&lt;/script&gt;


&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{dP}{dt} = P \times \left( \alpha \times H - \delta \right)&lt;/script&gt;


&lt;p&gt;The first step to get this into &lt;code&gt;sympy&lt;/code&gt; is to load the package (obviously), then declare parameters and population sizes as &lt;em&gt;symbols&lt;/em&gt;, and the equations as &lt;em&gt;Functions&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;You can do so this way:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Population densities&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;H P&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Model parameters&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;r q b a d&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Functions&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;dH dP&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once this is done, you can write up the equations&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;dH&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;P&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And solve with a &lt;em&gt;Mathematica&lt;/em&gt;-like syntax:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;solve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this point, you should get a list of tuples as the output:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[(0, 0), (d/a, -(-a*r + d*q)/(a*b)), (r/q, 0)]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The three possible outcomes were identified: either everything crashes, the parasite goes extinct (&lt;script type=&quot;math/tex&quot;&gt;H* = r/q&lt;/script&gt;), or the two populations persist and reach their equilibrium.&lt;/p&gt;

&lt;p&gt;At this point, let&#39;s assign these solutions to an object, and focus on the coexistence case:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;equil&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;solve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;coex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;equil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coex&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I naturally tried do find which sets of parameters allow the system to coexist &lt;em&gt;with positive densities&lt;/em&gt;, so I used&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;solve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Which gave the following error message:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NotImplementedError: only univariate inequalities are supported
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Well, so that does it for today. I&#39;ll be exploring &lt;em&gt;Maxima&lt;/em&gt; in the next weeks, because if &lt;code&gt;sympy&lt;/code&gt; is stuck on this common problem, there is no way you can use it to do some decent analysis. Oh, and in case you wonder: the maths are rendered with the &lt;a href=&quot;http://www.mathjax.org/&quot;&gt;&lt;em&gt;MathJax&lt;/em&gt;&lt;/a&gt; library.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Models are useless. Real ecologists should move on.</title>
     <link href="http://timotheepoisot.fr/2012/08/13/models-are-useless/"/>
    <updated>2012-08-13T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m spending more and more of my time doing theory related thing. Data analysis, model, drawing conceptual figures to make it seem like I have deep ideas about nature, life, and everything. Yet I &lt;em&gt;love&lt;/em&gt; ecology, biology, and the complexity of natural systems. At this point, I&#39;m sure most of you are familiar with the recent paper by &lt;a href=&quot;http://www.pnas.org/content/early/2012/06/22/1205259109.abstract&quot;&gt;Fawcett &amp;amp; Higginson in &lt;em&gt;PNAS&lt;/em&gt;&lt;/a&gt; - they conclude that the more equations are in a biology paper, the more its relative number of citation decreases. This result is equal part tragic and unsurprizing, and upon publication, the entire community of empiricists adressed a gigantic *«Told you so»* to the theoreticians. What I was not aware of until &lt;a href=&quot;http://phdp.github.com/&quot;&gt;Philippe&lt;/a&gt; sent it to me this morning is a critique of this paper published on F1000 (mostly because I didn&#39;t cared really much for that paper, and because I think the F1000 system is outdated, archaic, and deserves to be replaced by an open platform, so I don&#39;t read it).&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;http://f1000.com/717597856&quot;&gt;text&lt;/a&gt; (behind a paywall), written by &lt;a href=&quot;http://f1000.com/thefaculty/member/5244821872453101&quot;&gt;Ferdinando Boero&lt;/a&gt; is the most disappointing, infuriating thing I&#39;ve read this week (but it&#39;s only monday morning here, so you never know...). As I&#39;m quite sure it&#39;s heavily protected by copyright, &lt;a href=&quot;http://en.wikipedia.org/wiki/Fair_use&quot;&gt;I&#39;ll only reproduce the most relevant excerpts here&lt;/a&gt;. But go read it as soon as you have a chance. I&#39;ll sum it up for you beforehand: the only good ecology is autecology. This good ecology is a science of example so devoid of general laws that any mathematical approach is a waste of time, and cannot be considered serious biological science (but it can be sub-par mathematics). Throw away the classical &lt;a href=&quot;http://www.jstor.org/discover/10.2307/3546712?uid=3739464&amp;amp;uid=2129&amp;amp;uid=2&amp;amp;uid=70&amp;amp;uid=3737720&amp;amp;uid=4&amp;amp;sid=21101143468397&quot;&gt;Lawton&lt;/a&gt; paper, and throw away the recent and brilliant essay by &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/20565040&quot;&gt;Vellend&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The text starts with the following gem, «&lt;em&gt;Mathematical models may not present a true representation of what it is they are trying to study&lt;/em&gt;», which you may recognize as the first half of the famous George Box quote, «&lt;em&gt;Essentially, all models are wrong, but some are useful&lt;/em&gt;». I can go in the details of this sentence for hours, but I&#39;ll just point out that models &lt;em&gt;try&lt;/em&gt; to study, whereby it is implied they ultimately fail. And so the tone of the review is set. Modelling papers are not cited because real biologists and ecologists know better than to pay any attention to this second-class science. Why? Because models are simplified, and according to Boero, overly so. Let me quote:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Biodiversity is just a handful of species; predation and competition are not accurate at all. Parasitism is usually absent; species are just adults, and there are no life cycles and life histories. The mathematics is beautiful, but the natural history is not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&#39;m not sure what to do with this sentence. Models in ecology are not just Lotka-Volterra, and even if it were, it was proven times and times again that you can do kick-ass science with slight variations it (and by you, I mean mostly &lt;a href=&quot;http://www.eeb.utoronto.ca/people/d-faculty/abrams.htm&quot;&gt;Peter Abrams&lt;/a&gt;). Go open a basic textbook in modelling, like &lt;a href=&quot;http://press.princeton.edu/titles/8458.html&quot;&gt;Otto &amp;amp; Day&lt;/a&gt;, or even teaching material like &lt;a href=&quot;http://www.amazon.co.uk/Introduction-Mathematical-Evolution-Ecological-Concepts/dp/140517515X&quot;&gt;Gillman&lt;/a&gt;. Just skim through the table of contents, and it will be clear that the idea that models lack parasitism, or life cycles, or life histories, is unsubstantiated.&lt;/p&gt;

&lt;p&gt;Boero continues by illustrating its point, with the example of why models of phytoplankton dynamics are wrong.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I can find a beautiful correlation between nutrient availability and primary production, but does phytoplankton come out from nutrients? The presence of benthic resting stages developing then in planktonic organisms is rarely, if ever, introduced in equations describing plankton production. Phytoplankton comes out from nutrients! I do not have much interest in reading a paper that is based on these premises.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Funny he mentions it, though, because I have the feeling that &lt;a href=&quot;http://en.wikipedia.org/wiki/Ecological_stoichiometry&quot;&gt;Ecological Stochiometry&lt;/a&gt; gained equally from the empirical work of the likes of Redfield, and the theory which was developped later by people like Tilman, Pacala, and so on. It&#39;s hard for me not to be under the impression that most of this critique of theory is based on the fact that models representing ecological systems that Boero likes are not realistic enough for its taste. Besides, who cares about models? Darwin himself told us that «&lt;em&gt;we have better evidence on this subject than mere theoretical calculations, namely, the numerous recorded cases of the astonishingly rapid increase of various animals in a state of nature, when circumstances have been favourable to them for two or three following seasons&lt;/em&gt;». But what is the generality in these observations? How do you expand them to predict?&lt;/p&gt;

&lt;p&gt;Reading this, I had the impression that ecology should not go beyond natural history. We should stick to the word of Saint-Charles. This orthodoxy is unbearable, not only because it is insulting to people who made ecology advance through the integration of theory and data (and if you want to read something insightful about this merging, go read what &lt;a href=&quot;http://rsfs.royalsocietypublishing.org/content/2/2/141.full&quot;&gt;Simon Levin&lt;/a&gt; has to say about it), but because it is dangerous. Ecology needs to be predictive. We have to go out of the ivory tower and &lt;a href=&quot;http://www.innge.net/?q=node/11&quot;&gt;address real world problems&lt;/a&gt;. We have to &lt;a href=&quot;http://blogs.plos.org/toothandclaw/2012/08/09/to-sum-up-we-are-screwed-questions/&quot;&gt;find solutions&lt;/a&gt;, and it is not by being contempt with just counting animals over time and trying to describe it the best we can that we&#39;ll be in a position to do it. We&#39;ll need to find generality. We&#39;ll need predictive tools, and models.&lt;/p&gt;

&lt;p&gt;And of course no &lt;a href=&quot;http://en.wikipedia.org/wiki/Troll_%28Internet%29&quot;&gt;troll&lt;/a&gt; will be complete with the modern day Godwin-point equivalent: a reference to the economic crisis. Wait, what? Yes, you read that well:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The future of non-linear, complex systems cannot be predicted with equations. Economists tried, and we see the result; very nice economic equations that lead to disaster in the real world.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Beware of theoreticians, lest we trigger another catastrophe. This is populism in its worse form. This comes  from a paragraph in which Boero essentially claims that &lt;em&gt;ecological modelling is an epistemological mistake&lt;/em&gt;. There are so many wrong things in equating ecological modelling to the financial crisis that my copy of Descartes works spontaneously combusted when I read this paragraph out loud. So what is the message of this text?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So, yes, biologists do not like formula-filled papers dealing with biology. &lt;strong&gt;But maybe those who write these papers do not like biology so much&lt;/strong&gt;. They want to adapt biology to their mathematics, but it should be the other way around.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, I see. This was not an informative review of an interesting paper. This was a bigot, hatred-filled, uninformed rant about theory. If I had paid &lt;em&gt;F1000&lt;/em&gt; moneyto read this, I would have felt ripped off. There was so many potential to discuss the abusive and useful simplification of some common modeling frameworks. There was the opportunity to discuss how the pedagogy of modelling papers can be improved to better reach out to empiricists. There was, to say it, the potential for something interesting, rather than something infuriating. The last paragraph is the worse attack on modelling I&#39;ve read in a long time, and the worse thing is that there is no constructive side to it. The only message is: to do better science, stop wasting your time with theory, and do some real work like your elders used to do. This is frankly depressing. One thing is sure, though. In three weeks, I&#39;ll give an introductory class on population and community dynamics. The &lt;em&gt;PNAS&lt;/em&gt; paper and this critique will definitely be included in the reading material. I&#39;ll let the students discuss it, and I&#39;ll try to do a summary here. I can wait to see which side they&#39;ll pick...&lt;/p&gt;

&lt;p&gt;As an amusing side-note, I&#39;ve been reading through the &lt;a href=&quot;http://f1000.com/3425962&quot;&gt;F1000 recommandations&lt;/a&gt; for the Vellend paper I mentionned in the second paragraph. Ferdinando Boero wrote one, rating it 6 (recommended), and concluded it with «*I strongly advise all ecologists to read [The Origin of the Species] very carefully. The explanation of the process of evolution it provides needed much revision (there is no genetics), but the ecology is first class! &lt;strong&gt;And it also needs almost no amendments even today&lt;/strong&gt;. The tangled bank (the first description of a community) is a mess, so what? This is the world we live in. *». I rest my case.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Are student-friendly conferences worth it?</title>
     <link href="http://timotheepoisot.fr/2012/08/05/student-friendly-meetings/"/>
    <updated>2012-08-05T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Two recent posts by &lt;a href=&quot;http://dynamicecology.wordpress.com/2012/08/03/advice-students-shouldnt-bother-with-student-friendly-conferences/&quot;&gt;Jeremy Fox&lt;/a&gt; and &lt;a href=&quot;http://neurodojo.blogspot.ca/2012/07/student-friendly.html&quot;&gt;Zen Faulkes&lt;/a&gt; dealt with «students-friendly» conferences, and they do not seem too overtly enthusiastic about it, and prefer big meetings open to anyone. They have really valid points, which amount to the fact that there is no hierarchy in science, and anyone who wants to contribute a talk, or ask a question during a session, should feel free to do so. This is true. This is also not how things work.&lt;/p&gt;

&lt;p&gt;When teaching, I&#39;m always struggling to make students speak. And as far as I know, I&#39;m not the only one in this situation. This is less of a problem with masters students, but undergrad are often terrible at participation. Why? Peer pressure! When you are afraid of (real or imagined) consequences of being wrong, i.e. asking a «bad» question, or saying something «stupid» (quoted to say  that, except in some extremely pathological cases, there are no bad questions or stupid remarks), you tend to stay silent. This is only in the classroom context, so imagine the situation when you are an undergrad student, in a room full of big-shot professors that you respect for their work. Until you have a good enough guess on which side of the «Wow that young fellow is smart!» / «Is he retarded?» line you will fall, you tend to stay silent.&lt;/p&gt;

&lt;p&gt;To some extent, giving a talk is even worse. Some people are really shy, and tend to be overly impressed when more than two people stare at them. These can be really brilliant people, with exciting data, and good ideas about their field. But they will not carry this brilliance across because being looked at paralyze them. I have no problem talking in front of peoples. I used to play the violin in a few orchestras, and a string quartet, since I was 12, so being looked at while performing is not something that impresses me. When I gave my first talk in an international meeting, in the last year of my master, I was not really stressed. In his blog, &lt;a href=&quot;http://dynamicecology.wordpress.com/2012/08/03/advice-students-shouldnt-bother-with-student-friendly-conferences/&quot;&gt;Jeremy Fox says he was&lt;/a&gt;, and I&#39;ve heard people describe their first ESA talk as &lt;a href=&quot;http://en.wikipedia.org/wiki/Out-of-body_experience&quot;&gt;out of body experiences&lt;/a&gt;. So there are three types of people: those who usually don&#39;t stress (I realize how lucky I am to be part of them), thos who do but don&#39;t show it, and those who do but are not able to overcome it.&lt;/p&gt;

&lt;p&gt;What&#39;s with students-friendly conferences, you ask? Training. It&#39;s true that there is no hostily toward students in most scientific meetings, but it does not means that the environment of a conference cannot be perceived as &lt;em&gt;hostile&lt;/em&gt; or &lt;em&gt;unsafe&lt;/em&gt; by some. It can be a really stressful experience to be left to yourself in this context, and there is a big role for smaller, overtly student-friendly meetings, to provide a safer space for which to devleop your own presenting style. Everyone should be entitled to its own rythm of progression, and if someone needs a few stepping stones between presenting to five people and giving at talk at the ESA, there should be meetings of various sizes to allow it. If we say that these student-friendly meetings are useless, we take the risk of having only showmen and people with high confidence presenting, and science should not be about social skills. It&#39;s about your ability to make sense of the world around you; the ability to communicate through others should be trained, and small meetings for students are one of the best possible ways to do so.&lt;/p&gt;

&lt;p&gt;There are also other upsides to &lt;em&gt;organizing&lt;/em&gt; these smaller meetings. I&#39;ve been part of the organization committe of two or three so far, and I&#39;m working on another one. It&#39;s a good experience. You get to see what it takes to organize a scientific event, ranging from the most fundamental questions (what kind of science do we want to do), to the most applied (Crap, all the hotels are full, where are we going to put our faculty speakers? And why are plane tickets so expensive, we&#39;ll have to cut on the beer!). I think it&#39;s part of the training of a functioning member of the academia. As a matter of fact, organizing a scientific event was one way to get some of the credits required to defend your thesis in my graduate school.&lt;/p&gt;

&lt;p&gt;Finally, the with which I disagree the must, is the fact that «student-friendly» equates local and cheap. It may be that should you organize a one day symposium for people in your institution, it can be local, and appear cheap, but I think it&#39;s clear for everyone involved that you are not organizing a large scientific events. You put people together to discuss science, and &lt;em&gt;have fun&lt;/em&gt;. &lt;a href=&quot;http://www.empseb18.com/Start/Home.html&quot;&gt;EMPSEB&lt;/a&gt; is a massive success in that regard, as it scores really high on the «good science» and «bad hangovers» axes. And this is the poster-child of student friendly events, with paper discussions which I still remember vividly, because they were extremely stimulating.&lt;/p&gt;

&lt;p&gt;To conclude, I think we should not look down on student-friendly meetings. They provide a really good training opportunity, both for the people talikng that are given the opportunity to gain confidence, and for the people organizing them. And it is not because they are meant for students that the science will be bad, or the discussions unstimulating. It&#39;s a matter of finding the good people (faculties) to catalyze it, and it can be an extremely fun couple of days.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>My new linux setup</title>
     <link href="http://timotheepoisot.fr/2012/08/03/new-linux-setup/"/>
    <updated>2012-08-03T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I have a terrible confession to make. Two weeks ago, I installed &lt;a href=&quot;http://xkcd.com/528/&quot;&gt;Windows 7&lt;/a&gt;. Nobody was holding me at gunpoint. No member of my family was taken hostage by the IT people which were fed-up by our Mac rebellion. I took the rational, informed decision to install Windows 7 on a brand new machine. Why, oh why, do you ask?&lt;/p&gt;

&lt;p&gt;I made the switch from Mac to Linux, that&#39;s why. I needed to install Windows on my new machine before wiping it up and replacing it by Ubuntu (needless to say, I derived a great amount of pleasure in the process). I&#39;m really happy with it. The reason of the switch is quite simple. Over the last months, I&#39;ve been trying to use software that is as simple as possible, but not simpler. No more saying «Cool, I&#39;ve been working with Word for two hours, and it only crashed once!». I&#39;ve progressively moved all my text-editing duties to &lt;a href=&quot;http://www.latex-project.org/&quot;&gt;LaTeX&lt;/a&gt;, including using &lt;a href=&quot;https://bitbucket.org/rivanvx/beamer/wiki/Home&quot;&gt;beamer&lt;/a&gt; for slides and &lt;a href=&quot;http://ctan.org/pkg/biblatex&quot;&gt;biblatex&lt;/a&gt;/&lt;a href=&quot;http://www.mendeley.com/&quot;&gt;Mendeley&lt;/a&gt; for bibliography.&lt;/p&gt;

&lt;p&gt;I&#39;ve also discovered &lt;a href=&quot;http://sourceforge.net/projects/pgfplots/&quot;&gt;pgfplots&lt;/a&gt;, which is &lt;em&gt;incredibly&lt;/em&gt; powerful, and is perfectly integrated to LaTeX. Throw in some &lt;a href=&quot;http://www.texample.net/tikz/examples/&quot;&gt;PGF and Tikz&lt;/a&gt; for other graphics, and you have yourself a full-featured monster to produce any kind of science you want. While I still use R a lot, I&#39;m progressively moving to &lt;a href=&quot;http://www.python.org/&quot;&gt;Python&lt;/a&gt;, because of the amazing &lt;a href=&quot;http://networkx.lanl.gov/&quot;&gt;networkx&lt;/a&gt; package, which I&#39;ve already mentionned &lt;a href=&quot;http://timotheepoisot.fr/2012/05/18/networkx-metapopulations-python/&quot;&gt;a few times&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And of course, all of this is kept &lt;a href=&quot;http://timotheepoisot.fr/2012/01/06/science-age-social-coding/&quot;&gt;updated using git&lt;/a&gt;, which I&#39;m lucky to be able to use, thanks to my colleagues being huge nerds. By the way, the people at &lt;a href=&quot;https://github.com/&quot;&gt;GitHub&lt;/a&gt; are really nice, and if you send them an email saying you work in the academia, they&#39;ll give you free private repositories. You can set up a lab account, and be the happiest scientist ever.&lt;/p&gt;

&lt;p&gt;The common thread to all of these software is that they&#39;re free. So, I decided that overall, I was better of with a free operating syste, and thus without Mac OS X, which I felt was becoming more of a glorified iPad than a real computing device. In parallel, I used my laptop less and less for simulations, because we have a warbeast of a cluster in the lab, chokefull of CPUs and GPUs, and it was just getting ridiculous waiting two days for simulations that I could run in 5 minutes. So really, I realized that I needed a good machine to write text and produce papers on, with a processor decent enough to do some testing and data-crunching.&lt;/p&gt;

&lt;p&gt;And guess what? For half the price of a MacBook air (partly due to my impressive bargaining skills, but still), I found a laptop with everything I needed, &lt;em&gt;including&lt;/em&gt; a nvidia GPU which can run &lt;a href=&quot;http://en.wikipedia.org/wiki/Compute_Unified_Device_Architecture&quot;&gt;CUDA&lt;/a&gt;. It does everything I want, and working with &lt;a href=&quot;http://meldmerge.org/&quot;&gt;Meld&lt;/a&gt; and &lt;a href=&quot;http://projects.gnome.org/gedit/&quot;&gt;gedit&lt;/a&gt; is just great.&lt;/p&gt;

&lt;p&gt;But here is an appeal to my fellow geeks. I still miss two things. The first is a PDf annotator. I tried working with &lt;a href=&quot;http://xournal.sourceforge.net/&quot;&gt;Xournal&lt;/a&gt;, which is fun to use, and will probably be even funnier as soon as I will use it with my Wacom tablet, but other people have had issues with reading the annotations. The second thing I miss is Mathematica. I&#39;ll be looking into &lt;a href=&quot;http://simpy.sourceforge.net/&quot;&gt;simpy&lt;/a&gt; in the near future, but it seems to be kind of a hassle. So if you know a good PDF annotator, and a decent platform for symbolic computing (and sadly in my case, a pen and paper is not an option here...), I&#39;d be glad to hear about it.&lt;/p&gt;

&lt;p&gt;I&#39;ve been thinking about making the switch for the last few months (which was somehow facilitated by the fact that I&#39;ve been using Linux sporadically since I discovered &lt;a href=&quot;http://knoppix.net/&quot;&gt;Knoppix&lt;/a&gt; in 2006). Now that it&#39;s done, I couldn&#39;t be happier. Ubuntu is lean, responsive, and uncluttered - in the risk of offedning a lot of people at once, I&#39;d say that the interface is so OS X-like that I immediately felt at home. If you are tempted, you sould defintely try it!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A walk on the intertidal zone</title>
     <link href="http://timotheepoisot.fr/2012/07/15/what-is-trophic-complexity/"/>
    <updated>2012-07-15T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;m in the process of writing a big proposal about the complexity of species interaction networks, and how we need to account for multiple interaction types, spatial structure, and macro-ecology, to do better prediction of them. Then, yesterday, we went walking on the intertidal zone on the shore of the Saint-Lawrence. I saw this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/estran.png&quot; title=&quot;estran&quot; alt=&quot;Figure1&quot; /&gt;
What immediately came to my mind is: we don&#39;t know anything. It&#39;s one thing to look at species interaction networks, and have a feeling that we can, somehow, predict, forecast, and analyse the behavior of complex systems. It&#39;s another entirely different thing to actually see millions of individuals living on top of one another, being flushed every 6 hours, and starting all over again. I was amazed by the breadth of phylogenetic diversity concentrated in such a small space: bacterial mats on the bottom of the ponds, probably some plankton grazing them, a few larvae, crustaceans, algae, and quite a lot of birds.&lt;/p&gt;

&lt;p&gt;And looking at the food web, or just the parasitic relationships, will make us miss the big picture. There is some hope in the fact that some recent proposal provide us with a &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.1461-0248.2011.01732.x/abstract&quot;&gt;more integrated view of the complexity of interactions&lt;/a&gt;, but far too often we&#39;re happy claiming that we adress «trophic complexity» every time we add a trop predator over a Lotka-Voltera model. Perhaps is &lt;a href=&quot;http://www.jstor.org/discover/10.2307/3546712?uid=3739464&amp;amp;uid=2129&amp;amp;uid=2&amp;amp;uid=70&amp;amp;uid=3737720&amp;amp;uid=4&amp;amp;sid=56308801943&quot;&gt;community ecology a mess&lt;/a&gt; because ecological communities &lt;em&gt;are&lt;/em&gt; messy. Perhaps we&#39;ve focused so much on trophic species, functional groups, and whatnot, that we forgot about the Harvard law of animal behavior: «&lt;em&gt;an animal will behave as it damned well pleases&lt;/em&gt;». See, this is why theoreticians are better inside. Every time we take a look at the real world, it&#39;s a guaranteed existential crisis.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Using Color Brewer schemes in LaTeX pgfplots</title>
     <link href="http://timotheepoisot.fr/2012/07/03/colorbrewer-in-pgfplots/"/>
    <updated>2012-07-03T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;&lt;em&gt;Color Brewer&lt;/em&gt; is an awesome project in which you can select color scales according to three kind of data you want to represent (diverging, sequential, qualitative). I use it in R all the time with the &lt;code&gt;RColorBrewer&lt;/code&gt; package.&lt;/p&gt;

&lt;p&gt;Last week, I started using &lt;a href=&quot;http://pgfplots.sourceforge.net/&quot;&gt;&lt;code&gt;pgfplots&lt;/code&gt;&lt;/a&gt;, a &lt;a href=&quot;http://www.texample.net/&quot;&gt;&lt;code&gt;tikz&lt;/code&gt;&lt;/a&gt; extension for data visualization, to prepare slides for the upcoming &lt;a href=&quot;http://www.confersense.ca/Evolution2012/&quot;&gt;Evolution2012&lt;/a&gt; meeting in Ottawa. I thought it would be pretty cool to be able to use the &lt;em&gt;Color Brewer&lt;/em&gt; scales in my talk.&lt;/p&gt;

&lt;p&gt;Using &lt;code&gt;pgfplots&lt;/code&gt; , it&#39;s really easy to define color cycles (for different series of points), and color maps (for surface plots). Given that the &lt;a href=&quot;http://colorbrewer2.org/&quot;&gt;&lt;em&gt;Color Brewer&lt;/em&gt;&lt;/a&gt; website tells you the RGB values of each color when you select a scheme, it&#39;s really easy to re-implement the color schemes.&lt;/p&gt;

&lt;p&gt;For example, you can do a nice color map with the &lt;em&gt;spectral&lt;/em&gt; scheme:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\pgfplotsset&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;
    colormap=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;spectral&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;
        rgb255(0cm)=(158,1,66); 
        rgb255(1cm)=(213,62,79);
        rgb255(2cm)=(244,109,67);
        rgb255(3cm)=(253,174,97);
        rgb255(4cm)=(254,224,139);
        rgb255(5cm)=(255,255,191);
        rgb255(6cm)=(230,245,152);
        rgb255(7cm)=(171,221,164);
        rgb255(8cm)=(102,194,165);
        rgb255(9cm)=(50,136,189);
        rgb255(10cm)=(94,79,162);&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or you can do a color cycle with the &lt;em&gt;Set1&lt;/em&gt; scheme:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;s1&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;228, 26, 28&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;s2&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;55, 126, 184&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;s3&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;77, 175, 74&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;s4&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;152, 78, 163&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\definecolor&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;s5&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;RGB&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;255, 127, 0&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\pgfplotscreateplotcyclelist&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;set1&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;
  s1,every mark/.append style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fill=s1&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,mark=*&lt;span class=&quot;k&quot;&gt;\\&lt;/span&gt;
    s2,every mark/.append style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fill=s2&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,mark=*&lt;span class=&quot;k&quot;&gt;\\&lt;/span&gt;
    s3,every mark/.append style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fill=s3&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,mark=*&lt;span class=&quot;k&quot;&gt;\\&lt;/span&gt;
    s4,every mark/.append style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fill=s4&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,mark=*&lt;span class=&quot;k&quot;&gt;\\&lt;/span&gt;
    s5,every mark/.append style=&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;fill=s5&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;,mark=*&lt;span class=&quot;k&quot;&gt;\\&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now that I think of it, it would be really easy to provide all of the brewer schemes into color map and color cycle form as an additional package. This is a project best left to someone with time on their hands.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Using networkx to simulate metapopulations in Python</title>
     <link href="http://timotheepoisot.fr/2012/05/18/networkx-metapopulations-python/"/>
    <updated>2012-05-18T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;Python progressively replaced R for most of my daily simulations needs, because it&#39;s relatively fast, easy to write, and a pleasure to read. There are a lot of great packages for scientists, and since I started working on food webs seriously, I&#39;ve been using &lt;code&gt;networkx&lt;/code&gt; more and more. We&#39;ve been having discussions in the lab about spatial graphs, surrounding a recent paper by &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22155351&quot;&gt;Gilarranz and Bascompte&lt;/a&gt; and some of our own projects, and I thought that it will be fun to use &lt;code&gt;networkx&lt;/code&gt; to run a super simple metapopulation simulation. So without further ado, the recipe! Try to follow through the code, or get the final version as a &lt;a href=&quot;https://gist.github.com/2725839&quot;&gt;gist&lt;/a&gt;.&lt;/p&gt;

&lt;h1&gt;Setting things up&lt;/h1&gt;

&lt;p&gt;Before we start, we&#39;ll need a few things. Some modules are required: obviously &lt;code&gt;networkx&lt;/code&gt; to deal with the graph objects, &lt;code&gt;numpy&lt;/code&gt; to generate random numbers, and the &lt;code&gt;pyplot&lt;/code&gt; module to deal with the output. I&#39;d much rather do the output work using &lt;code&gt;pyx&lt;/code&gt;, but it would add a good 50 lines of code to get a good-looking output, so let&#39;s go the easy way.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;networkx&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;nx&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we&#39;ll set a few parameters:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Patches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# Number of patches&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;P_ext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.01&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# Probability of extinction (e)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;P_col&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.014&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# Probability of colonization (c)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;P_init&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.02&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# Probability that a patch will be occupied at the beginning&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.4&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# An arbitrary parameter to determine which patches are connected&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Create a node class&lt;/h1&gt;

&lt;p&gt;The first thing to do is to create a class for the patches, which will be the nodes of our spatial graph. This is relatively easy to do, and we call this new class &lt;code&gt;patch&lt;/code&gt;. Before writing up, let&#39;s think about what to put in. We need a simple parameter which we call &lt;code&gt;status&lt;/code&gt;, whose value can be either &lt;code&gt;0&lt;/code&gt; (the patch is empty) or &lt;code&gt;1&lt;/code&gt; (the patch is occupied).&lt;/p&gt;

&lt;p&gt;We&#39;ll also create a tuple called &lt;code&gt;pos&lt;/code&gt;, to store the position of the node in a two-dimensional space. The resulting class is:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__str__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I won&#39;t go into the detail of this notation, but you can read more &lt;a href=&quot;http://www.penzilla.net/tutorials/python/classes/&quot;&gt;here&lt;/a&gt; or &lt;a href=&quot;http://jhamrick.mit.edu/2011/05/18/an-introduction-to-classes-and-inheritance-in-python/&quot;&gt;here&lt;/a&gt; if you want. In any case, we now have a way to specify patches, with a spatial position and an occupancy. With this in hand, the next step is to create a network of patches, which will be the spatial landscape over which we simulate our metapopulation.&lt;/p&gt;

&lt;h1&gt;Create a spatially explicit graph&lt;/h1&gt;

&lt;p&gt;There are a lot of ways to create spatial graphs, but for the sake of simplicity, let us assume that we will use simples rules. Nodes (patches) have a position (&lt;em&gt;x,y&lt;/em&gt;), and two nodes are connected by an edge if the euclidean distance between them is inferior or equal to a fixed value. In other words, we can decide how close two patches should be to allow migration to occur.&lt;/p&gt;

&lt;p&gt;In &lt;code&gt;networkx&lt;/code&gt;, creating a graph is easy, and is done by&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Graph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We will now generate as many (&lt;code&gt;Patches&lt;/code&gt;) patches as needed, and put them on the landscape at random.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;xrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Patches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Stat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_init&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Pos&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This require at least Python 2.6, but you can easily rewrite the problematic first line as an &lt;code&gt;if/else&lt;/code&gt; block. Basically, this will generate random positions in space, and randomly decide if the patch is occupied or not. This is where &lt;code&gt;networkx&lt;/code&gt; is extremely powerful: nodes can be any Python objects. In the simplest cases, you may want to use only numbers or strings, but if you have to keep track of the nodes in more advanced ways, then this become extremely fun and convenient to work with.&lt;/p&gt;

&lt;p&gt;At this point, nodes are not connected by dispersal yet. To decide which patches are connected, we will loop through them all, and access their &lt;code&gt;pos&lt;/code&gt; attributes:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Dist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_edge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For all pairs of nodes, we check that their distance falls below the treshold for migration, and if so, we create an edge in the network.&lt;/p&gt;

&lt;p&gt;At this point, it&#39;s easy to visualize the network:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;occup&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node_color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;occup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;with_labels&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Greys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vmin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vmax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will open a Python plotting view looking like:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/metapop_step1.png&quot; title=&quot;Step 1&quot; alt=&quot;Figure1&quot; /&gt;
The black nodes are occupied patches, and the white ones are empty patches. If the landscape it too connected (or not connected enough), act on the &lt;code&gt;Distance&lt;/code&gt; parameter to fix it.&lt;/p&gt;

&lt;h1&gt;Start the simulation&lt;/h1&gt;

&lt;p&gt;So now, we have everything to start the simulation. We&#39;ll first do a loop to update the status of the nodes, starting with extinctions, and then colonization. Let&#39;s start with the extinction routine:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Simply put, for each node, if it is occupied and a random extinction event occurs, then its status is reverted to 0. Super easy. We can do something similar for the colonization routine. We assume that each occupied node will be able to colonize a single of its neighbouring nodes. This rquires to get a list of nodes adjacent to the node currently being evaluated.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;neighb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# That&amp;#39;s it, a list of the neighbors&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That&#39;s a lot of loops within loops, but it goes rougly as follows: for each of the nodes, if their is a population, we check the neighbors. For the non-occupied neighbors, we check if the colonization occurs, and if so, we break the loop.&lt;/p&gt;

&lt;p&gt;With these two blocks, it&#39;s easy to do the actual simulation:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timestep&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;xrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Check for extinctions&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Check for invasions&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;neighb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# That&amp;#39;s it, a list of the neighbors&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neighb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;nei&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We then plot the lanscape using the same command as before (I&#39;ve actually added the list of occupancies directly within the plot instruction, because one-liners looks cool):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node_color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;with_labels&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Greys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vmin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vmax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/images/metapop_final.png&quot; title=&quot;Final step&quot; alt=&quot;Figure2&quot; /&gt;
But of course you would like to follow the dynamics, which is extremely easy. We will just add, just before the beginning of the simulation loop, the lines&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Occupancy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Patches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And we will add infos at the end of each loop, i.e. immediately after the &lt;code&gt;break&lt;/code&gt; instruction (but in the main loop, not the colonization one):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timestep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Occupancy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Patches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And at the really end of the simulation, just add&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Occupancy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;g-&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Which will give you the following result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/metapop_dynamics.png&quot; title=&quot;Occupancy dynamics&quot; alt=&quot;Figure3&quot; /&gt;&lt;/p&gt;

&lt;h1&gt;Conclusions&lt;/h1&gt;

&lt;p&gt;And that&#39;s it! Using the ability of &lt;code&gt;networkx&lt;/code&gt; to make any arbitrary object into a node, it&#39;s possible to implement a metapopulation simulation in roughly 50 lines. The package is reasonably fast, so it&#39;s possible to run more complex simulations (I&#39;ve been playing with metacommunities with no problem, for example).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The ecological journal of the future</title>
     <link href="http://timotheepoisot.fr/2012/05/11/ecological-journal-of-the-future/"/>
    <updated>2012-05-11T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I&#39;ve been reading &lt;a href=&quot;http://gowers.wordpress.com/2012/01/29/whats-wrong-with-electronic-journals/&quot;&gt;Tim Gowers&#39;s fascinating blog&lt;/a&gt; following the call to boycott Elsevier, and stumbled upon a fascinating &lt;em&gt;gedankenexperiment&lt;/em&gt;. What would the electronic journal of the future look like in the field of Mathematics? Naturally, I found myself wondering, what would this next-generation journal look like in ecology, and how would it function on a daily basis?&lt;/p&gt;

&lt;p&gt;I have been thinking about this for the last few months (the earliest draft of this text dates back to early in february), and got great feedback from &lt;a href=&quot;http://www.innge.net/&quot;&gt;INNGE&lt;/a&gt; folks. New ides piled up, and this is now a rather long text. Just for the sake of clarity, I am not saying that this new hypothetical journal &lt;em&gt;should&lt;/em&gt; exist. I&#39;m trying to imagine how I would do it in a perfect world, or in more ecological terms, what would be its «ideal free distribution».&lt;/p&gt;

&lt;h1&gt;What&#39;s in a name?&lt;/h1&gt;

&lt;p&gt;If you want your journal to reflect a new paradigm, it should start with the way it&#39;s named. Phytologists have the &lt;em&gt;New Phytologist&lt;/em&gt;. A lot of disciplines have &lt;em&gt;Advances in a lot of disciplines&lt;/em&gt;. &lt;em&gt;Trends Ecol Evol&lt;/em&gt; and &lt;em&gt;Frontiers Ecol Env&lt;/em&gt; apart, the ecological journals are rather conservative in their naming. We have &lt;em&gt;Ecology&lt;/em&gt; declined in as many languages as possible, followed by, or following some variation of &lt;em&gt;Letters&lt;/em&gt;, &lt;em&gt;Journal of [prefix]&lt;/em&gt;, &lt;em&gt;Research&lt;/em&gt;, and so on. No &lt;em&gt;New&lt;/em&gt;, no &lt;em&gt;Advances&lt;/em&gt;. I&#39;m absolutely not saying that ecological research is opposed to progress, it&#39;s clearly a field being moved forward by people with ten new ideas a day. But the names of the journals do not reflect that. The two publications who do (&lt;em&gt;TREE&lt;/em&gt; and &lt;em&gt;FEE&lt;/em&gt;) have such a specific editorial line that they can&#39;t possibly contain all of the new, exciting stuff.&lt;/p&gt;

&lt;p&gt;By being clear about the fact that the journal seeks to explore new horizons, not only in terms of the science, but in terms of how it is managed on a daily basis (which forms the core of this modest proposal), a strong identity will be established, and people will come there knowing what to expect. I like Tim Gower&#39;s idea of &lt;em&gt;Breakthroughs in ...&lt;/em&gt;, which adds the notion that research reported here is timely, hot off the press results and ideas, which deserves to be spread rapidly to the community. That being said, most of the impact that next-gen practices can make are not related to the name of the journal, or the type of content published in its (web)pages, but to the way it is conceived — name it &lt;em&gt;Good ol&#39;Ecology&lt;/em&gt; if it pleases you, but bring fresh ideas about the way it works.&lt;/p&gt;

&lt;h1&gt;Paper-free papers&lt;/h1&gt;

&lt;p&gt;One of the main reason editors use when declining your paper is &quot;constraints on the number of pages&quot;. This just in: some journals are still printed on dead trees. But when is the last time you actually read one of those? I&#39;m not talking about taking a trip to the library to read a paper published in an obscure journal in the early 1950s. With the exception of free issues you collect at meetings, have you ever preferred the paper over the PDF version of an article? If my own habits are of any indication, I&#39;m guessing no.&lt;/p&gt;

&lt;p&gt;Note that switching to e-articles will not necessarily mean that constraints will be lifted. When reading the &lt;a href=&quot;http://www.jstor.org/page/journal/amernatu/forAuthor.html&quot;&gt;instructions for authors at &lt;em&gt;Am. Nat.&lt;/em&gt;&lt;/a&gt; - and in all likelihood, some other journals with an e-paper alternative are doing it as well, it just so happenned that I was submitting something to &lt;em&gt;Am Nat&lt;/em&gt; at the time - , I found this (emphasis mine):&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The choice of appearing as an open access e-article is available to all authors, &lt;strong&gt;though the number that can appear with each issue are limited&lt;/strong&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds an awful lot as &lt;a href=&quot;http://en.wikipedia.org/wiki/Artificial_scarcity&quot;&gt;artificial scarcity&lt;/a&gt; to me, and the reason for which to do it is immediately clear: if the number of papers is limited, you will reject average-to-good papers and publish only the &lt;em&gt;crème de la crème&lt;/em&gt; (french expression for super best - we rightfully consider cream to be one of the best things ever). Ergo, your impact factor, citation half-life, immediacy index, and all the others will all go up (or down - in any case, they&#39;ll go where you want them to). This is all fair and well (although I&#39;ll get back to why we should pay less and less attention to these metrics in the next section), but be upfront about it!&lt;/p&gt;

&lt;p&gt;I should note that for this point, we have the technology. It&#39;s possible to have a good experience reading an e-paper. We have large screens to read the papers in the lab, and we can carry a copy of our library at all time with us on various mobile devices. Annotations are easy to add and to share with a tool like &lt;em&gt;Mendeley&lt;/em&gt;, and &lt;a href=&quot;http://blog.readcube.com/post/12244190503/great-news-readcube-has-integrated&quot;&gt;the &lt;em&gt;Nature Publishing Group&lt;/em&gt; integrated with &lt;em&gt;ReadCube&lt;/em&gt;&lt;/a&gt; to annotate PDFs online. The later case delivers a particularly stunning experience. Paper-free journals are possible, &lt;a href=&quot;http://www.plosone.org/home.action&quot;&gt;some of them allow you to order reprints of a paper&lt;/a&gt;, and the next generation of ecological journals should definitely follow this path.&lt;/p&gt;

&lt;h1&gt;Quality, and surrogates of quality&lt;/h1&gt;

&lt;p&gt;Impact factors are a measure of the absolute success of a journal in its field. Yet we all know examples of papers published in really good journals that met a terrible fate (think arsenic in the DNA, the memory of water), or excellent papers that were consistently rejected by major journals (e.g. Leigh van Valen&#39;s &lt;a href=&quot;http://en.wikipedia.org/wiki/Red_Queen%27s_Hypothesis&quot;&gt;Red Queen&#39;s hypothesis&lt;/a&gt;). Some papers were also just completely ignored by their expected target community. Conversely, papers published in obscure journals can really be &lt;a href=&quot;http://f1000.com/rankings/hiddenjewels&quot;&gt;hidden jewels&lt;/a&gt;, that will either get highly cited, or be really influential for your research. And this is entirely different.&lt;/p&gt;

&lt;p&gt;For this reason, a next-generation journal should rely heavily on article-level metrics. &lt;a href=&quot;http://www.plosone.org/home.action&quot;&gt;&lt;em&gt;PLoS One&lt;/em&gt;&lt;/a&gt; does that, and to some extent so does &lt;a href=&quot;http://www.mendeley.com/&quot;&gt;Mendeley&lt;/a&gt; through &lt;a href=&quot;http://nitens.org/taraborelli/ReaderMeter&quot;&gt;ReaderMeter&lt;/a&gt;. What would these article-level metrics consist of? The number of downloads, or inclusions in Mendeley or similar services, and the number of citations. And much more importantly, the ratio between these two. With dead-trees publishing, you do not have access to this information, because what interest you is the number of people receiving a physical copy of a whole issue. Which paper they choose to read, and which they choose to ignore, is not something you can know and monitor. But with the transition to electronic publishing came the log file, and the number of times the link to a pdf was clicked is now readily available. On a side note, I&#39;m taking a wild guess here, but if we assume that the major publishing services keep their logs for a long time, we can actually measure this ratio for already published papers. But how to interpretate it? If two people download your paper, and they both cite it 3 times, then it can safely be assumed that it had a different kind of impact than a paper downloaded by 150 people, and cited only twice. Not only would it tell you the total impact of this paper, article level metrics would inform you about the kind of impact it achieved.&lt;/p&gt;

&lt;p&gt;Heather Piwowar and colleagues have been doing this analysis on &lt;em&gt;PLoS One&lt;/em&gt; articles published over the last five years, and not surprisingly, they found that the &lt;a href=&quot;http://blogs.lse.ac.uk/impactofsocialsciences/2012/04/04/31-flavours-research-impact/&quot;&gt;number of citation is a poor measure of the impact of a paper&lt;/a&gt;. Having the best possible metrics for impact and quality is a service to your readers, as it will help you crowd-source the evaluation paper; the referees (but more on that in a moment) will tell if the paper is sound, but the readers and other scientists will tell if it&#39;s &lt;em&gt;good&lt;/em&gt;. Or relevant. Oh, and by the way, you can stop putting your 10-years half-life forward. It means your journal was good, 10 years ago. In a world when 10 new papers relevant to your research are published each day, and the people evaluating you care about your current impact factor, not your potential one in a few years, I&#39;m wondering what the relevance of this metric is...&lt;/p&gt;

&lt;h1&gt;Avoid the tragedy of the commons&lt;/h1&gt;

&lt;p&gt;A lot of people talked about the &lt;a href=&quot;http://blogs.helsinki.fi/egru-blog/2008/12/20/the-tragedy-of-the-reviewer-commons/&quot;&gt;tragedy of the reviewer commons&lt;/a&gt;, including &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.1461-0248.2008.01276.x/abstract&quot;&gt;Mike Hochberg and colleagues&lt;/a&gt;, &lt;a href=&quot;http://www.esajournals.org/doi/pdf/10.1890/0012-9623-91.3.325&quot;&gt;Jeremy Fox &amp;amp; Owen Petchey&lt;/a&gt; and &lt;a href=&quot;http://library.queensu.ca/ojs/index.php/IEE/article/view/4219/4240&quot;&gt;Michael Donaldson&lt;/a&gt;, and I really cannot stress enough how reading these papers is important. Avoiding this &quot;tragedy&quot;, which &lt;a href=&quot;http://oikosjournal.wordpress.com/2012/03/19/may-the-odds-be-ever-in-your-favor-a-brief-comment-on-the-review-games-in-ecology/&quot;&gt;seems to affect women even more&lt;/a&gt;, can be quite easily done, if a new journal is ready to tap into an existing community of people &lt;em&gt;willing&lt;/em&gt; to conduct peer-reviews.&lt;/p&gt;

&lt;p&gt;For this reason, a next-generation journal should engage with &lt;a href=&quot;http://www.peerageofscience.org/&quot;&gt;Peerage of Science&lt;/a&gt;. As we discussed on &lt;a href=&quot;http://innge.net/?q=node/121&quot;&gt;the INNGE blog&lt;/a&gt;, they provide an easy way to obtain triple-blind peer-review in a way that is independent from the journal. I&#39;m not a quite fan of triple-blind (or any other n-blind, for that matters) review process, because I strongly believe that &lt;a href=&quot;http://timotheepoisot.fr/2012/01/29/sign-your-reviews/&quot;&gt;non-anonymous reviews can turn out to be beneficial&lt;/a&gt;, if properly done. In any case, turning to a system like &lt;em&gt;Peerage of Science&lt;/em&gt; allows the authors to seek reviews with no prejudice associated with rejection. In addition, members from the editorial board can look for papers with good reviews, and offer the authors to publish them if they think the subject fits.&lt;/p&gt;

&lt;p&gt;This can go even further by having a very flexible definition of what constitutes the editorial board. The process of looking for papers having recently recevied good reviews can very easily be crowd-sourced: any one should be able to propose/endorse a paper to the editors. This is the ultimate community-building of a journal, as the people who read it propose papers they would like to read! Think &lt;a href=&quot;http://pinterest.com/&quot;&gt;&lt;em&gt;Pinterest&lt;/em&gt;&lt;/a&gt; instead of editorial manager. A journal engaging in such practice would not seem parasitic to me: if people are volunteering time to review and improve great papers, it&#39;s too bad to start the process from scratch every time you change journal. Some people argued for &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22341497&quot;&gt;the recycling of reviews&lt;/a&gt;, and I think they are entirely right — not nearly enough journals are accepting review transfer in my opinion, further cluttering the system, and giving you the impression to start the fight over at each submission to a new journal. Gathering already reviewed papers would essentially push this logic to the maximum. It&#39;s time we review a paper for the science inside, not for the journal it will end up in; perhaps I&#39;m being naive, but it appears to me that this is an editorial decision, on which the reviewers should have a limited impact.&lt;/p&gt;

&lt;h1&gt;Be social and engage&lt;/h1&gt;

&lt;p&gt;I&#39;ve already called for more &lt;a href=&quot;http://timotheepoisot.fr/2011/11/19/get-your-lab-on-twitter/&quot;&gt;communication&lt;/a&gt; and &lt;a href=&quot;http://timotheepoisot.fr/2012/01/06/science-age-social-coding/&quot;&gt;diffusion of your code&lt;/a&gt;. I think that engaging with the community of authors, readers, and referees is important. &lt;em&gt;Methods in Ecology and Evolution&lt;/em&gt; is &lt;a href=&quot;http://methodsblog.wordpress.com/2012/04/04/omgwhathaveidone/&quot;&gt;doing a great job&lt;/a&gt; in this regard. More and more people are know able to navigate social networks quite well, and there is no reason for journals not to do it. And if possible, to do it genuinely, i.e. by actually engaging with the authors and the readership, like the folks running the &lt;a href=&quot;http://oikosjournal.wordpress.com/2012/04/16/why-shoot-yourself-in-the-foot/&quot;&gt;Oikos blog are doing when they ask authors to discuss recently accepted papers&lt;/a&gt;. Tweeting the title of your recently accepted articles is definitely a first step, but it&#39;s by no mean sufficient to be considered an engagement with the people reading your journal.&lt;/p&gt;

&lt;p&gt;This might also be the opportunity to see peer-review as a form of scientific discussion, by engaing in &lt;a href=&quot;http://en.wikipedia.org/wiki/Open_peer_review&quot;&gt;open peer-review&lt;/a&gt;. By having non-anonymous reviews published alongside the paper, the discussion will be started, and contradictory or complementary points of view will be available at once. Journals in &lt;a href=&quot;http://www.atmospheric-chemistry-and-physics.net/&quot;&gt;chemistry and physics&lt;/a&gt; or &lt;a href=&quot;http://www.nature.com/emboj/about/process.html&quot;&gt;molecular biology&lt;/a&gt; are already doing this. To some extent, the commenting features of &lt;em&gt;PLoS One&lt;/em&gt; were trying to achieve the same goal, but for looking at it over the last 4 years, I&#39;m yet to see a real, motivating discussion start. One could do a quantitative analysis of how big a failure this system is, but the &lt;a href=&quot;http://ploscomments.appspot.com/&quot;&gt;web app release by &lt;em&gt;Nature&lt;/em&gt; guys&lt;/a&gt; appears to be buggy. One good example, though, is the forum feature of &lt;em&gt;Trends Ecol. Evol.&lt;/em&gt;, were &lt;a href=&quot;http://news.cell.com/discussions/trends-in-ecology-and-evolution/ecological-neutral-theory-useful-model-or-statement-of-ignorance&quot;&gt;other people are invited to discuss a recent paper in a few paragraphs&lt;/a&gt;. This makes for a really interesting read, and is a good way to kickstart a discussion.&lt;/p&gt;

&lt;h1&gt;Be open&lt;/h1&gt;

&lt;p&gt;I&#39;ve ranted long enough already, so it&#39;s time to bring this essay to its term. The final point is of course, &lt;em&gt;be open&lt;/em&gt;.  Of course, this journal should be open-access. Using a platform like &lt;a href=&quot;http://innge.net/?q=node%2F327&quot;&gt;Scholastica&lt;/a&gt; would help in this regard: it&#39;s easy to create an on-line only, open access journal, for a minimal cost (both for the authors and the publishers). But open-access goes well beyond the text. Use &lt;a href=&quot;http://figshare.com/&quot;&gt;FigShare&lt;/a&gt;, &lt;a href=&quot;http://www.treebase.org/treebase-web/home.html&quot;&gt;TreeBase&lt;/a&gt; and &lt;a href=&quot;http://datadryad.org/&quot;&gt;DataDryad&lt;/a&gt;, and make sure the research you publish is open to all, and easily reproducible. It might be frightening to part with your data, but I&#39;m sure it will help the paper get cited in the long run; people will be able to reproduce what you do, the quality of meta-analyses will increase. And in addition, it will put an end to an hideous behavior: I&#39;ll give you my data from 15 years ago, if you put me as a co-author, me and all my chums. The challenge of ecology is probably not to deal with extremely large datasets — though my opinion on this point changed slightly since I&#39;ve had to deal with pyrosequencing data —, but to integrate a lot of small datasets to answer the big questions. We probably would have enough data to do a good decade of science, if these data were easy to access, well described with pertinent metadata, and not sitting on the hard drive of hundreds of researchers around the world (hence the importance of close work with something like &lt;a href=&quot;http://datadryad.org/&quot;&gt;DataDryad&lt;/a&gt;). Data sharing will also be encouraged if people have the opportunity to submit their manuscript in a way allowing reproducible research, i.e. using tools suchs as &lt;a href=&quot;http://yihui.name/knitr/&quot;&gt;&lt;code&gt;knitr&lt;/code&gt;&lt;/a&gt; or &lt;a href=&quot;http://en.wikipedia.org/wiki/Sweave&quot;&gt;&lt;code&gt;Sweave&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Finally, while an Open Access licence seems straigthforward, it begs the question of how to get the money to cover the publication fees — I&#39;m personally opposed to excessive OA charges, so preferably the journal shoudl function with a very small funding. My impression is that, by using the services mentionned above, there will be very little costs associated with the journal maintenance. Being supported by a society will definitely be a plus, as it might probably help to have one person in charge of the administrative tasks. The most important cost will probably be web hosting, and I&#39;m confident that it can be kickstarted by applying to fund-gathering projects in &lt;a href=&quot;http://www.petridish.org/&quot;&gt;PetriDish&lt;/a&gt; or &lt;a href=&quot;http://scifundchallenge.org/&quot;&gt;SciFund&lt;/a&gt;. Crowd-sourcing and crowd-funding, together at last!&lt;/p&gt;

&lt;h1&gt;Fight centralization&lt;/h1&gt;

&lt;p&gt;In summary, what I propose amounts to the crowd-sourcing of most of the tasks related to the publishing process. I was pleased that, during the time where I was writing this piece, there was a call for &lt;a href=&quot;http://life.biology.mcmaster.ca/~brian/evoldir/Other/Journal.Society.Coevolution&quot;&gt;ideas about the creation of a new journal on &lt;em&gt;EvolDir&lt;/em&gt;&lt;/a&gt; (I was also pleased that this journal, if it happens, will cover coevolution). The people behind this idea were actively asking other researchers for their input, because the «crowd» will be refereeing, submitting, and reading the papers.&lt;/p&gt;

&lt;p&gt;I think there is much to be gained by adopting an idealistic point of view about what a journal can be, now that a lot of great people have thought about new ways to do science in the electronic, open-access, next-gen era. Not only will it be fun to see what happen, it may even end up being a viable alternative to journals who inherited their publishing process from a hundred years ago.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Phylogeny without a sequencer</title>
     <link href="http://timotheepoisot.fr/2012/05/03/phylogeny-without-sequencer/"/>
    <updated>2012-05-03T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;In the last issue of &lt;em&gt;Trends Ecol. Evol.&lt;/em&gt;, &lt;a href=&quot;http://www.sciencedirect.com/science/article/pii/S0169534712000730&quot;&gt;Poole and colleagues&lt;/a&gt; talk about &lt;em&gt;Ecosystomics&lt;/em&gt;, or the use of molecular data in ecology. If the subject is interesting to you, I recommend the reading of &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22432924&quot;&gt;a recent paper by Nico Mouquet and colleagues&lt;/a&gt; about &lt;em&gt;Ecophylogenetics&lt;/em&gt;. But I&#39;m not going to discuss the science in these papers. Rather, I would like to share some methodological / technical insights related to these questions.&lt;/p&gt;

&lt;p&gt;At times, one would like to re-analyze old data and add the phylogeny. If you don&#39;t see why you would want to do this, go read the excellent paper in &lt;em&gt;Ecol. Lett.&lt;/em&gt; by &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.1461-0248.2012.01776.x/abstract&quot;&gt;Scott Chamberlain and colleagues&lt;/a&gt;, right now, I&#39;ll wait. Done? Great. The problem with old (meaning, coming from other people, from a previous study) data is that they may not have been taken in association with sequencing. Or they may date from a time were sequencing was not even a thing — which is perhaps a difficult concept to grasp for the young crowd, but I remember a time when publishing one new genome was actually an exciting event concretizing years of hard work. I disgress. The fact is that sometimes, you don&#39;t have these precious sequences on which to build a phylogeny, no access to the organisms, and no possibility to do the sequencing yourself.&lt;/p&gt;

&lt;p&gt;All hope is not lost, though, because you may be lucky enough to reconstruct a phylogeny. How? By getting every possible sequence for your organisms from &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/genbank/&quot;&gt;&lt;em&gt;GenBank&lt;/em&gt;&lt;/a&gt;. I&#39;m assuming everyone is familiar with GenBank, but in a nutshell, it&#39;s a huge databse in which virtually everything ever sequenced is stored, tagged, and freely available. In their own words:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;GenBank ® is the NIH genetic sequence database, an annotated collection of all publicly available DNA sequences ( Nucleic Acids Research , 2011 Jan;39(Database issue):D32-7 ). There are approximately 126,551,501,141 bases in 135,440,924 sequence records in the traditional GenBank divisions and 191,401,393,188 bases in 62,715,288 sequence records in the WGS division as of April 2011.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Theoretically, you can get a few sequences for each of your species, and reconstruct the phylogeny. In most cases, though (especially if you happen to work with organisms which were not extensively sequenced, or with a high taxonomical diversity), you will need to integrate informations coming from several genes. This is (relatively) easy to do using &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/15205059&quot;&gt;supertrees or supermatrices&lt;/a&gt;. The idea is that you will combine a lot of different trees together, in one global tree. &lt;a href=&quot;http://bioinf.nuim.ie/clann/&quot;&gt;&lt;em&gt;Clann&lt;/em&gt;&lt;/a&gt; + &lt;a href=&quot;http://paup.csit.fsu.edu/&quot;&gt;*PAUP**&lt;/a&gt; are a good combination here.&lt;/p&gt;

&lt;p&gt;Of course, dealing with multiple trees mean that you will need to manage a complex dataset (different genes, &lt;em&gt;i.e.&lt;/em&gt; different alignments, different models, and a bunch of trees). Of course it can all be done with folders full of &lt;a href=&quot;http://en.wikipedia.org/wiki/FASTA_format&quot;&gt;&lt;code&gt;fasta&lt;/code&gt;&lt;/a&gt; files, but it is really, really annoying for large datasets. Think about the time spent if you need to remove one sequence in a lot of different text files... I personally use &lt;a href=&quot;http://www.geneious.com/&quot;&gt;&lt;em&gt;Geneious&lt;/em&gt;&lt;/a&gt; for its ability to search GenBank in an easy way, from a GUI. It&#39;s not a freeware, it&#39;s expensive, but the free version is good enough for sequence management. The whole process can probably be done in R, with some of the &lt;em&gt;ROpenSci&lt;/em&gt; &lt;a href=&quot;http://ropensci.org/tutorials/r-taxize-tutorial/&quot;&gt;packages&lt;/a&gt;, and a good mixture of &lt;em&gt;ape&lt;/em&gt;, &lt;em&gt;ade4&lt;/em&gt;, and &lt;em&gt;phangorn&lt;/em&gt;. I&#39;d like to test that when I have time.&lt;/p&gt;

&lt;p&gt;And finally, there is a more general problem related to training. I know some people who think that getting a phylogeny is as easy as doing an &lt;a href=&quot;http://en.wikipedia.org/wiki/Neighbor_joining&quot;&gt;NJ&lt;/a&gt; tree on the pairwise distances between sequences. You push a button, and here comes your tree. It is not, and nothing annoys me quite as that. I&#39;m not asking for Bayesian analysis everytime you want to produce a phylogeny, but at the very least, just go with the most complete model (GTR+I+G), let &lt;em&gt;PhyML&lt;/em&gt; estimate all its parameters, and work from there. You&#39;ll probaby use a few parameters you didn&#39;t need, AIC or hLRT-wise, but at least you won&#39;t under-calibrate your model. The problem of getting trees is similar to one encountered in statistics: with properly formated data, every test will give you a statistic and a p-value, which may very well mean nothing if this is not the right test. To some extent, the problem us even worse when supertrees/matrices are involved, because it&#39;s usually not covered in intro phylogenetics courses. It&#39;s really good that a lot of ecologists are getting interested in phylogenetic studies, but it would be too bad if we end up applying extremely good methods of comparative analysis or ACE to badly infered phylogenies.&lt;/p&gt;

&lt;p&gt;For a crash course in phylogenetics methods and concepts, you can read this &lt;a href=&quot;http://www.nature.com/doifinder/10.1038/nrg3186&quot;&gt;amazingly good review in &lt;em&gt;Nat. Rev. Gen.&lt;/em&gt;&lt;/a&gt;, but nothing beats reading a good handbook on the subject (&lt;a href=&quot;http://www.sinauer.com/detail.php?id=1775&quot;&gt;Felsenstein&#39;s&lt;/a&gt; comes to mind) — or finding someone trained in these, who will be more than happy to help you.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Ecology is not too collaborative</title>
     <link href="http://timotheepoisot.fr/2012/04/30/ecology-not-too-collaborative/"/>
    <updated>2012-04-30T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;A few days ago, Jeremy Fox published on the Oikos blog, wondering if &lt;a href=&quot;http://oikosjournal.wordpress.com/2012/04/27/is-ecology-becoming-too-collaborative&quot;&gt;ecology was becoming too collaborative&lt;/a&gt;. The entry received a good number of comments, who mostly dealt with big, long terms collaborations. I can&#39;t really talk for this kind of collaborations, having not been in the business of science for long enough. But I was surprized that small, one shot (or at least, short term) collaborations, were not mentionned. For what it&#39;s worth, here is my contribution to the debate. I&#39;m involved in a few short term collaborations, and I think they are awesome.&lt;/p&gt;

&lt;p&gt;One of the ideas behind &lt;a href=&quot;http://innge.net/&quot;&gt;INNGE&lt;/a&gt; was that ecology will require more and more global approaches in the next decade, which will require to use more and more diverse tools. While I love learning new stuff and methods, there are only 24 hours in a day, and it&#39;s sometimes good to go look for a particular skill. This can be the basis of a short collaboration — you know how to do &lt;em&gt;x&lt;/em&gt;, I want &lt;em&gt;x&lt;/em&gt; done on my data, let&#39;s do it together. The really good thing if you operate with this logic is that you will increase the limit of what you can do, or what you can tell about your data.&lt;/p&gt;

&lt;p&gt;Perhaps it won&#39;t be better science, but it will be more complete science, in that the problem will be looked at at different angles. This complementarity is something extremely valuable, and by relying only on a small set of collaborators for an extended period of time, I&#39;d fear loosing it, and missing on some great opportunities. Then again, these collaborations are different from a size project. It&#39;s more about finding someone with the necessary skills to complete your project, then working together (writing it, I realize it may be a side project &lt;em&gt;for the other person&lt;/em&gt;). And these people come with a different viewpoint, ideas, litterature they master, on so forth.&lt;/p&gt;

&lt;p&gt;In short, any collaboration offer you the opportunity to do things which are just too big or to cross-disciplinary to do by yourself. It may be time consuming, but it&#39;s probably worth it.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Biblatex styles for ecology</title>
     <link href="http://timotheepoisot.fr/2012/04/26/biblatex-styles-ecology/"/>
    <updated>2012-04-26T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;A few months ago — when finishing to write my thesis, as I grew increasingly disatisfied by the clumsiness of &lt;code&gt;natbib&lt;/code&gt; —, I started looking into &lt;a href=&quot;https://github.com/plk/biblatex&quot;&gt;&lt;code&gt;biblatex&lt;/code&gt;&lt;/a&gt;. &lt;code&gt;biblatex&lt;/code&gt; is essentially a re-implementation of LaTeX packages like &lt;code&gt;cite&lt;/code&gt;, &lt;code&gt;natbib&lt;/code&gt;, and others. And the more I used it, the more I realized two things. First, &lt;code&gt;biblatex&lt;/code&gt; is awesome; it&#39;s to &lt;code&gt;natbib&lt;/code&gt; what &lt;a href=&quot;http://yihui.name/knitr/&quot;&gt;&lt;code&gt;knitr&lt;/code&gt;&lt;/a&gt; is to &lt;code&gt;Sweave&lt;/code&gt;. Including the fact that switching from one system to the other is virtually transparent, but you would miss a lot by not using the &lt;code&gt;biblatex&lt;/code&gt; specific commands. Second, it&#39;s a pain to find citation styles for it, because it&#39;s recent, and good old &lt;code&gt;tex makebst&lt;/code&gt; is not working. It would not be a problem if the default choices made any sense, but I feel like writing &lt;em&gt;In :&lt;/em&gt; before the journal name, or adding the month to the year in the bibliography is not really common practice - at least in «hard» sciences. &lt;/p&gt;

&lt;p&gt;The really good thing, now, is that &lt;code&gt;biblatex&lt;/code&gt; relies only on LaTeX macros, and not on the really weird &lt;code&gt;bibtex&lt;/code&gt; language (the macro- and filed-based logic makes it closer, IMHO, to the &lt;a href=&quot;http://citationstyles.org/&quot;&gt;&lt;em&gt;Citation Style Language&lt;/em&gt;&lt;/a&gt; used by Mendeley and Zotero). Which means that it is possible, with relatively little effort, to put together different citation styles. It&#39;s actually relatively close to what you would do in a CSS. The following commands will put the volume number in bold, and leave the page numbers alone (&lt;code&gt;biblatex&lt;/code&gt; annoyingly puts &quot;pp.&quot; in front of everything) for the entries with a type &lt;code&gt;article&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\DeclareFieldFormat&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[article]&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;pages&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;#1&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\DeclareFieldFormat&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;[article]&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;volume&lt;span class=&quot;nb&quot;&gt;}{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;\textbf&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;#1&lt;span class=&quot;nb&quot;&gt;}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To further the CSS parallel, you can actually import most of the base functions and styles. E.g., the following lines will import the base functionalities needed to work with a numeric style compressing multiple citations, like (1-4):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\RequireBibliographyStyle&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;standard&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\RequireBibliographyStyle&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;{&lt;/span&gt;numeric-comp&lt;span class=&quot;nb&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What remains to do is to use a mixture of &lt;code&gt;\renewbibmacro*&lt;/code&gt;, &lt;code&gt;\usebibmacro&lt;/code&gt; and &lt;code&gt;\printfield&lt;/code&gt; to get the formatting you want.&lt;/p&gt;

&lt;p&gt;In a few hours, and after looking at the base styles, browsing some forums, and looking at some more code, I was able to put together the files to obtain the &lt;em&gt;Ecology Letters&lt;/em&gt; format (huge success, as I was never able to pull it of in LaTeX only). I thought it would be great to have a central repository for ecological journals, so I created a &lt;em&gt;GitHub&lt;/em&gt; repository for this. You can &lt;a href=&quot;https://github.com/tpoisot/ecobiblatex&quot;&gt;fork the project here&lt;/a&gt;, or download the styles files. My learning of &lt;code&gt;biblatex&lt;/code&gt; was mostly inductive, so the code is likely messy — but it works!&lt;/p&gt;

&lt;p&gt;As of today, the styles for &lt;em&gt;Ecology Letters&lt;/em&gt; and &lt;em&gt;Global Ecology and Biogeography&lt;/em&gt; should be close enough, the style for &lt;em&gt;Trends in Ecology and Evolution&lt;/em&gt; is in progress, with &lt;em&gt;The American Naturalist&lt;/em&gt; and probably some of the BES journals scheduled to follow shortly after. Most journals in ecology have fairly close citation formats, so it will be easy to make the collection grow by duplicating some folders and copying-pasting a few macros across files (which will be made even easier by me taking some time to comment the damn code, but let&#39;s be realisitc, that&#39;s not going to happen any time soon...). Anybody interested in helping is, of course, welcome (as I feel like I&#39;ll only work on journals to which I plan to submit papers in the near future).&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Null models of bipartite networks in C</title>
     <link href="http://timotheepoisot.fr/2012/04/15/null-models-C/"/>
    <updated>2012-04-15T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;I am currently revising a paper, and I need to run a lot of networks through two null models. And I need to do it a lot of time. I have a Python solution, for a dataset of this size (175 networks, some of them up to 100 x 100 in size), and with the need to have 1000 replicates each time... Python is not the right tool. I&#39;m currently re-learning C, and I thought it would be a cool exercise to generate these random networks in C.&lt;/p&gt;

&lt;p&gt;The code is on &lt;a href=&quot;https://github.com/tpoisot/CNullModels&quot;&gt;GitHub&lt;/a&gt; if you are interested. It&#39;s super fast. You need to have the &lt;a href=&quot;http://www.gnu.org/software/gsl/&quot;&gt;GSL&lt;/a&gt; installed to make it run. On a mac, to install it, after dezipping the archive, just&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;chmod +x configure
./configure
make
sudo make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once this is done, compile the null model generator using &lt;code&gt;gcc nulls.c -o nm -lgsl -lgslcblas -O3 -DHAVE_INLINE&lt;/code&gt;, and run in using &lt;code&gt;./nm test.txt 3 7 1000 2000&lt;/code&gt;. The arguments are, in order of appearance, a binary file containing the adjacency matrix (0/1) of the network, the number of columns, the number of sums, the number of random networks to do, and finally, the number of iterations after which to stop, no matter how many webs were succesfully created.&lt;/p&gt;

&lt;p&gt;This last argument is especially important because I put restictions on what is a suitable network: it needs ot have at least one link by species present. In some cases, this will mean that the number of possible random networks given connectance and size is extremely small, and even a large number of trials can give no successful results.&lt;/p&gt;

&lt;p&gt;The programm will generate one output file for each usable network, with the suffix &lt;code&gt;_n1&lt;/code&gt; for Type I (connectance based) network, and the suffix &lt;code&gt;_n2&lt;/code&gt; for Type II (degree based) networks.&lt;/p&gt;

&lt;p&gt;My Python code took two days to run through the 175 webs, giving up after 1000 iterations at most. The C code was able to do the same, with 50000 iterations at most, in less than 30 minutes. C is awesome, and I feel dumb for not learing it sooner.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>How to make the most out of peer-review?</title>
     <link href="http://timotheepoisot.fr/2012/01/29/sign-your-reviews/"/>
    <updated>2012-01-29T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;So it seems that the love/hate relationship between science and publishers has &lt;a href=&quot;http://innge.net/?q=node/99&quot;&gt;reached its tipping point following the RWA turmoil&lt;/a&gt;, with appeals to boycott major publishers, such as &lt;a href=&quot;http://www.researchwithoutwalls.org/&quot;&gt;&lt;em&gt;researchwithoutwalls&lt;/em&gt;&lt;/a&gt; and &lt;a href=&quot;http://thecostofknowledge.com/&quot;&gt;&lt;em&gt;thecostofknowledge&lt;/em&gt;&lt;/a&gt;, and &lt;a href=&quot;http://cscs.umich.edu/~crshalizi/weblog/864.html&quot;&gt;some of the most eminents members of the scientific blogosphere talking about it&lt;/a&gt;, and using creative metaphors to illustrate &lt;a href=&quot;http://www.academicproductivity.com/2012/when-your-users-tell-you-you-are-not-adding-value-boycott-against-elsevier/&quot;&gt;how big of a scam it is&lt;/a&gt;. Specifically, most scientists are publicly stating that &lt;a href=&quot;http://jabberwocky.weecology.org/2012/01/27/why-i-will-no-longer-review-for-your-journal/&quot;&gt;they will not review papers anymore&lt;/a&gt;, at least in the case of for-profit editors. Most of the problem lies in the fact that reviewing papers does not grant you any money, yet publishers make &lt;a href=&quot;http://michaelnielsen.org/blog/on-elsevier/&quot;&gt;insane profits&lt;/a&gt; based on this use of your government-funded time.&lt;/p&gt;

&lt;p&gt;Scientists feel they are being ripped off by the editors, who are making a lot of money for nothing, and are starting to be vocal about it. As a lot of really smart people have been going into the details of why boycott is a good solution (see the links in the first paragraph), so there is not much value to add to this debate by a young and enthusiastic post-doc (that would be me). I&#39;m still doing reviews, but I figured that there is no reason why it should not serve me as well as the authors. How do I do this? I sign them.&lt;/p&gt;

&lt;p&gt;I don&#39;t like the asymetry of the review process, in which your papers are under scrutiny (sometimes attack) of people you don&#39;t know. You can&#39;t tell if they have a reason to hate you. You can&#39;t tell if they are really competent in the domain of your paper, or if they have an undisclosed conflict of interest. And worse, when they finally helped you improve your paper to the point where it gets published, you still don&#39;t know who they are.&lt;/p&gt;

&lt;p&gt;So I now sign my reviews. I invest time in them, I try to be constructive, thorough, comprehensive, and because I take pride in my work, I think it deserves to be recognized. By signing your reviews, if you do them well, you&#39;ll get recognition from this work. You&#39;ll get some kudos from your peers, and this might prove  usefull later on. This will not give you more money or more time for your research, or put the big publishers on the right path again, but at least you will build a small amount of reputation out of it, and &lt;a href=&quot;http://www.ploscompbiol.org/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002108&quot;&gt;this is really important&lt;/a&gt;. By the way, out of the 10 rules for building a good reputation in the linked &lt;em&gt;PLoS Comp Biol&lt;/em&gt; paper, the number 8 is stating my point somewhat more eloquently:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Who is a good reviewer or editor is more than just perception. &lt;strong&gt;Be polite, timely, constructive, and considerate and, ideally, sign your review&lt;/strong&gt;. But also be honest—the most valued reviewers are those who are not afraid to provide honest feedback, even to the most established authors. Editors of journals rapidly develop a sense of who does a good job and who does not. Such perceptions will impact your reputation in subtle ways. The short term gain may be fewer papers or grants sent to you to review, but in the longer term, being a trusted reviewer will reflect your perceived knowledge of the field. &lt;strong&gt;Although the impact of a review is small relative to writing a good paper in the field yourself, it all adds up towards your overall reputation&lt;/strong&gt;.&lt;/p&gt;&lt;/blockquote&gt;
</content>
  </entry>
  
  <entry>
     <title>Measuring ecological specificity</title>
     <link href="http://timotheepoisot.fr/2012/01/19/measuring-ecological-specificity/"/>
    <updated>2012-01-19T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;Our paper about measurements of ecological specialization is now available online at the &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00174.x/abstract&quot;&gt;Methods in Ecology &amp;amp; Evolution&lt;/a&gt; website. You can also download the associated R package from &lt;a href=&quot;https://r-forge.r-project.org/projects/esm/&quot;&gt;R-Forge&lt;/a&gt;. As a side note, it is during the conception and redaction of this paper that I started thinking more and more about networks, something which is now occupying a significant part of my time, so I have my co-authors to thank for that.&lt;/p&gt;

&lt;p&gt;Early during my thesis, in between watching episodes of &lt;em&gt;The Big Bang Theory&lt;/em&gt;, I was wondering how we can best measure ecological specialization of parasites, knowing that we would work with very different data sources (field samples, lab systems, and models). After a quick survey of the literature, (i) it was clear that many people developed their own measure of specificity, and (ii) it was not clear what the assumptions of some of these measures were. This appeared to us as the potential for a methodological paper.&lt;/p&gt;

&lt;p&gt;So we went back to basics, and thought about what specificity is.  In &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/21699641&quot;&gt;a previous paper&lt;/a&gt;, we defined it as «displaying differential adaptation to a subset of suitable environments. Whereas specialisation refers to the process or tendency of change, specificity is the state of adaptation to environments at any given time or place». Ideally, a good measure of specificity would match this definition, as for example the &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.0030-1299.2008.16644.x/full&quot;&gt;NODF&lt;/a&gt; measure does for nestedness. This is with this definition in mind that we conceived the &lt;em&gt;Paired Differences Index&lt;/em&gt;; the reasoning behind it is really simple, it measures how fast performance decreases when an organism is moved away from its optimal resource.&lt;/p&gt;

&lt;p&gt;What we&#39;ve done, is that we examined how different measures of specificity behave with regard to two important informations: (i) the thoroughness of sampling, and (ii) the distribution of links between species that exploit, and resources that are exploited (which is related to the structure of the interaction network). In a nutshell, we found that &lt;em&gt;d&#39;&lt;/em&gt; and &lt;em&gt;PDI&lt;/em&gt; were highly robust, but only the later is highly informative. So, problem solved? Not really. &lt;em&gt;PDI&lt;/em&gt; is super good at situating species along a continuum of specificity, with the interesting property of returning a value of 0.5 (neither specialist nor generalist) when the performances decrease linearly. But as shown in the figure 1 (reproduced below), it tends to saturate with really high degree of specialization. Other measures, such as &lt;em&gt;CoV&lt;/em&gt;, are less affected by this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/pdi_fig1.png&quot; title=&quot;Figure 1&quot; alt=&quot;Figure1&quot; /&gt;
We conclude by providing the following recommendations:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In conclusion, based on our evaluations, we encourage researchers to make use of RR to estimate the specificity of associations (i.e. Schoener’s generality) and PDI to estimate the specificity of impacts (i.e. the skewness of the link strength distribution), with the possibility to use other measures to detect fine-scale variation in specificity among highly specialized species. Previous literature has established that quantitative information on link strength is not necessary for some problems, and in these cases, PDI and RR are equivalent.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The measures described in this paper can be done using the &lt;code&gt;ESM&lt;/code&gt; package mentioned above. Given an object &lt;code&gt;web&lt;/code&gt; with focal species as rows, you can calculate the specificity using &lt;em&gt;PDI&lt;/em&gt; and &lt;em&gt;RR&lt;/em&gt; with the following commands:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;splus&quot;&gt;library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ESM&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

spe_pdi &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; getspe&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;web&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;pdi&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
spe_rr &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; getspe&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;web&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;rr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

plot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;spe_pdi&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;spe_rr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The code is also being ported to Python and MatLab, but more on that later...&lt;/p&gt;

&lt;p&gt;For the record, the code for this paper was developed entirely in R. The simulation of incomplete sampling took forever (a couple of days), because I was too lazy to write a parallel version of it (that, and it&#39;s basically a mess of nested for statements). The network generation routine is based on the same logic that something published by &lt;a href=&quot;http://schamberlain.github.com/2011/01/ecological-networks-from-abundance/&quot;&gt;Scott Chamberlain&lt;/a&gt;, if you have any interest in doing such things.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Science in the age of social coding</title>
     <link href="http://timotheepoisot.fr/2012/01/06/science-age-social-coding/"/>
    <updated>2012-01-06T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I started using version control a little more than 6 months ago, when working on my dissertation. Not only it allowed me to have a backup of my chapters somewhere else than on my hard drive, but I could also revert back to a previous version of some paragraphs I liked better. Sometime during the summer, I discovered GitHub, and thought that I can give it a try. A few months later, I&#39;m wondering what I would do without it.&lt;/p&gt;

&lt;p&gt;The idea of GitHub is simple: &lt;a href=&quot;http://radar.oreilly.com/2009/01/github-making-code-more-social.html&quot;&gt;&lt;em&gt;social coding&lt;/em&gt;&lt;/a&gt;. As in, everyone can work on your code, and contribute some new things to it. This blog is powered by Jekyll, many features of which originate from the community. In a way, social coding is open source logic pushed to its maximum: everyone can copy (fork) your code, work on it, and give you back the features they added, or the bugs they fixed, or whatever you can think of. Scientists would gain a lot by getting to know these tools.&lt;/p&gt;

&lt;h1&gt;It will make us better coders&lt;/h1&gt;

&lt;p&gt;During the last few weeks, I&#39;ve been taking a very informal programming course. And I&#39;ve realized something: most of the code I write is horrible. It does the job, but it&#39;s not written the way it should be. I don&#39;t think it is a problem, given any code doing what I want it to do is good enough for me. But sometime, knowing how things actually work can make your program run faster, or do more advanced things. So there is a positive correlation between the time you will spend hacking around, and what you will be able to achieve. The only question is to maximize your benefit for every hour spent working on your programming skills. I found that social coding and version control helped me a great deal in this matter.&lt;/p&gt;

&lt;p&gt;The first reason why is simple; it made me bolder. I used to write the basic layout of a program, then fix it by changing one line at a time. Now, I have the assurance that any revision of my code is available. Essentially, version control eliminated the question of &quot;If I break it, will I be able to fix it back?&quot;. I can delete lines by the hundred, and rewrite them from the ground up, sometimes with a completely different logic. And I have the assurance that I can revert back to the previous version in case things go wrong. And much to my surprise, I&#39;ve only rarely reverted back to previous versions. By taking advantage of the safety net that previous commits represent, it is possible to try new things, make drastic changes, with absolutely zero negative consequences (well, except for the time you will invest doing these changes).&lt;/p&gt;

&lt;p&gt;In addition, GitHub has this bizarre effect of exposing any user to &lt;em&gt;a lot&lt;/em&gt; of code, if you are curious and check out what other people are doing. There are a host of cool projects to explore, and when I see one with a specific feature, I can just check the source, and see how it&#39;s done. I prefer learning things by myself (I&#39;m yet to buy a book about Python or R, despite the fact that I use both of them on a daily basis), but now I have the opportunity to see directly what more experienced coders are doing in the real world. This is not something to neglect, and I&#39;m not only thinking about ecology-related projects. Just looking at the way people deal with different kind of data can give you ideas. GitHub is a great generator of serendipity, and serendipity is awesome because it brings you solutions to problems you didn&#39;t even knew you had!&lt;/p&gt;

&lt;h1&gt;It will give us access to more techniques&lt;/h1&gt;

&lt;p&gt;One of the coolest things that can happen is that more and more scientists will use GitHub (or GoogleCode, or Bitbucket, which I use for stuff that I don&#39;t want you to see just yet) to post their code. I&#39;m not saying it &lt;em&gt;will&lt;/em&gt; happen, though &lt;a href=&quot;http://innge.net/?q=node/19&quot;&gt;the young crowd is certainly doing it&lt;/a&gt; – but I definitely think it &lt;em&gt;should&lt;/em&gt; happen, and I play my part as an evangelist as often as I can. We are now sharing an increasing amount (and variety) of data (species distributions, functional traits, sequences, trophic interactions, and what not), but strangely, there is no global code repository that I know of. Let me put it another way: finding the raw material is becoming less and less of an issue, yet very few people seem to be actively thinking about how to share the &lt;em&gt;tools to analyze these data&lt;/em&gt;. This is too bad, for a whole lot of reasons.&lt;/p&gt;

&lt;p&gt;First, it&#39;s time consuming to re-write an algorithm from the ground up, simply because the original code was not shared. Describing a kick-ass analysis is not really useful if nobody can do it. It&#39;s not useful for your community, which will be unable to do what you propose. Even though some people will &lt;em&gt;want&lt;/em&gt; to do the analysis, they might be unable to do it because they don&#39;t know any programming or scripting language, or have no resident geek in their lab who can write it up for them. And more importantly, an analysis that no one can replicate is not useful for you, because no one will cite your paper.&lt;/p&gt;

&lt;p&gt;Second, we are subjected to the limitations of existing software. I&#39;ve been discussing this matter with non computer-minded people working on pyrosequencing. The discussion went something like &quot;Hey, it would be super cool if you were able to do [so and so] !&quot;. To which they replied &quot;Yeah, but we can&#39;t, because it&#39;s not in [whatever program we are using]&quot;. Should the code be public, it would be a simple matter of forking it, and adding this new functionality. Given the way GitHub works, this modification could even one day make it into the main release, which will bring you some kudos among your peers for making everyone&#39;s life a little easier.&lt;/p&gt;

&lt;p&gt;And finally, there is one additional impact of an increased availability of the code: people will develop more integrated tools. Part of my motivation for writing &lt;a href=&quot;http://tpoisot.github.co/bipy/&quot;&gt;bipy&lt;/a&gt; was to have an integrated way to work with bipartite ecological networks, to do a bunch of different analysis in a common environment. The folks at &lt;a href=&quot;http://ropensci.org/&quot;&gt;ROpenSci&lt;/a&gt; are doing an impressive job of stitching together a lot of different databases, and their project is a prime example of what we can do with open source. Similarly, &lt;a href=&quot;http://weecology.org/resources&quot;&gt;Weecology&lt;/a&gt; is publishing both code and data. By merging these tools together, it&#39;s increasingly likely that people will stumble across new analyses, think &quot;Hey, that&#39;s cool, I&#39;d like to do it&quot;, and increase the diversity of methods in different fields.&lt;/p&gt;

&lt;h1&gt;Where to start ?&lt;/h1&gt;

&lt;p&gt;As Nick Barne put it, &lt;a href=&quot;http://www.nature.com/news/2010/101013/full/467753a.html&quot;&gt;&lt;em&gt;publish your code, it&#39;s good enough&lt;/em&gt;&lt;/a&gt;. Open an account somewhere, and try pushing a random file around. GitHub makes everything public by default, unless you pay, but &lt;a href=&quot;https://bitbucket.org/&quot;&gt;BitBucket&lt;/a&gt; will allow you up to 5 privates repositories (I you want version control for something you are currently working on, and although you may not now it yet, you do want it — a lot). Then spread the world. Give the URL to your repository in the methods or acknowledgements of your papers, put the URL in slides at conferences, and so on.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Simulated phylogenetic trees and community assembly</title>
     <link href="http://timotheepoisot.fr/2012/01/05/a-python-class-for-phylogenies/"/>
    <updated>2012-01-05T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;m working on a toy model of community assembly in Python, and I thought it would be cool to have an easy way to keep track of the phylogeny. To do so, I&#39;ve conceived two classes for the easy handling of phylogenetic structure. They are available on GitHub in the &lt;a href=&quot;https://github.com/tpoisot/PyCoPhy&quot;&gt;&lt;code&gt;PyCoPhy&lt;/code&gt; repository&lt;/a&gt; (Python Community Phylogenetics), and check also the &lt;a href=&quot;/code/&quot;&gt;code page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The general idea behind them is quite easy to understand. A phylogenetic tree is a list of branchings. A branching is the junction of two objects, which I called &lt;code&gt;left&lt;/code&gt; and &lt;code&gt;right&lt;/code&gt;. Each of these objects can be an identifier (i.e. a leaf of the tree), or a reference to another branching (i.e. a node). It&#39;s as complicated as it gets.&lt;/p&gt;

&lt;p&gt;Once &lt;code&gt;PyCoPhy&lt;/code&gt; is loaded, to create a new tree with a species called &lt;code&gt;ancestor&lt;/code&gt;, just type:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PhyloTree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;ancestor&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The output of this command should be &lt;code&gt;(root, ancestor)&lt;/code&gt;. The &lt;code&gt;root&lt;/code&gt; is created by default to ensure that the most basal node is a branching. The interesting thing is that it&#39;s now relatively easy to add and remove species. The &lt;code&gt;PhyloTree&lt;/code&gt; class has the &lt;code&gt;speciate&lt;/code&gt; method, who takes two arguments: the name of the ancestor, and the name of the daughter species. Calling it will go through the tree, and replace the ancestor by the (ancestor, daughter species) branching. Let&#39;s try with:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PhyloTree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speciate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0_0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which results in the following tree: &lt;code&gt;(root,(0,0_0))&lt;/code&gt;. And I know this is not the way speciation works, so there is also a &lt;code&gt;split&lt;/code&gt; method, which will replace one ancestral species by two new species:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PhyloTree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;will result in &lt;code&gt;(root,(2,1))&lt;/code&gt;. This is all made possible by the &lt;code&gt;extinct&lt;/code&gt; method, by the way, which will remove from the tree the species whose name is given in argument:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PhyloTree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extinct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iTree&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;will result in &lt;code&gt;(root,1)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Although these classes are really basic at the moment, they allow me to easily keep track of who is related to who in my simulations. I&#39;ll most likely add a way to keep track of branch lenghts at some point in the near future.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Goodbye Wordpress, hello Jekyll!</title>
     <link href="http://timotheepoisot.fr/2012/01/01/migration-to-jekyll/"/>
    <updated>2012-01-01T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;A few weeks ago, I discovered &lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;Jekyll&lt;/a&gt;. In a nutshell, Jekyll is a static site generator who promised me I&#39;ll be able to &lt;a href=&quot;http://tom.preston-werner.com/2008/11/17/blogging-like-a-hacker.html&quot;&gt;blog like a hacker&lt;/a&gt;. This site is now hosted on GitHub, and &lt;a href=&quot;https://github.com/tpoisot/tpoisot.github.com&quot;&gt;both the template and the content can be forked&lt;/a&gt;, so everything is basically open source.&lt;/p&gt;

&lt;p&gt;Jekyll is a lot of fun to use, especially because all of the content reside in &lt;em&gt;static text files&lt;/em&gt; instead of a database. It&#39;s also fully compatible with the &lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot;&gt;markdown&lt;/a&gt; format, which is a lot easier to write than html. For example, writing a simple text in bold in markdown is done through&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;**text in bold**
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;rather than the equivalent html&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;text in bold&lt;span class=&quot;nt&quot;&gt;&amp;lt;/strong&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So a less lot keys to press (especially on my new QWERTY keyboard). The fact that Jekyll uses the &lt;a href=&quot;https://github.com/Shopify/liquid/wiki&quot;&gt;Liquid&lt;/a&gt; templating language also make the overall design process &lt;em&gt;fun&lt;/em&gt;. In addition, the whole system is working on GitHub, so I have complete version control on everything. This is so awesome!&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>The aggregate function in Python</title>
     <link href="http://timotheepoisot.fr/2011/12/01/the-aggregate-function-in-python/"/>
    <updated>2011-12-01T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;One thing I love the most about R is the &lt;a href=&quot;http://stat.ethz.ch/R-manual/R-devel/library/stats/html/aggregate.html&quot;&gt;aggregate&lt;/a&gt; function, which (in a nutshell) summarizes a data frame according to one or more columns, and perform some operations on the aggregated values. If, for example, you have a data frame with a treatment and a response, and want to calculate the mean and standard deviation of the response by level of treatment, then aggregate is usually the way to go.&lt;/p&gt;

&lt;p&gt;I wanted to do a quick &lt;a href=&quot;http://pyx.sourceforge.net/examples/graphstyles/errorbar.html&quot;&gt;plot with errorbars using PyX&lt;/a&gt;, and I though that having a python version of aggregate would be really nice. Here is the complete code to do so&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sp&lt;/span&gt;  

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;MSD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aggregate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Dat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ColBy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ColTo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UniqueBy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ColBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ub&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UniqueBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;uTo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ColTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ColBy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Dat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;concatenate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dat&lt;/span&gt;  
    
&lt;span class=&quot;n&quot;&gt;test_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadtxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tes1-output.dat&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;n&quot;&gt;Agr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aggregate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MSD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savetxt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;aggr.dat&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Agr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pyx&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;  
&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graphxy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;aggr.dat&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errorbar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writePDFfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;errorbar&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, it is really straightforward. The aggregate function needs four arguments: the data frame (in this case, a numpy array with two dimensions), the column for the group to aggregate, and the column for the response. The last argument is obviously the function which will be applied, in this case a simple mean ± standard deviation. In 30 lines of code, you can easily aggregate your data using python. Of course there is room for improvement, but this is already working quite well.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Get your lab on twitter!</title>
     <link href="http://timotheepoisot.fr/2011/11/19/get-your-lab-on-twitter/"/>
    <updated>2011-11-19T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;More and more scientists are taking advantage of social networking tools to talk about their research. This trend was even deemed worthy of &lt;a href=&quot;http://www.nature.com/naturejobs/science/articles/10.1038/nj7371-141a&quot;&gt;a paper in
&lt;em&gt;Nature&lt;/em&gt; this week&lt;/a&gt;. I&#39;ve read this paper, and I had mixed feelings about it. On one hand, it was good to see the use of social medias showcased in such a prestigious journal. On the other hand, I felt it came out of nowhere, and was too descriptive. I was left wondering, if I were not already using twitter and other similar things (partly) for scientific purposes, would this article have changed my habits? Maybe not.&lt;/p&gt;

&lt;p&gt;However, there are a number of different reasons for which getting involved in
social networks is a wise decision for a researcher or a lab, and I will
highlight those who seem the most relevant. Obviously, social media presence
goes beyond having a twitter account. This is why, at
&lt;a href=&quot;http://twitter.com/#!/INNGEcologist&quot;&gt;INNGE&lt;/a&gt; and the &lt;a href=&quot;http://www.sfecologie.org/&quot;&gt;French Ecological
Society&lt;/a&gt;, we have a facebook page. This is why my
former group has a blog to talk about the new papers, and this is also why I
have a blog. Taken all together, these tools offer an incredible potential for
scientists to engage in the discussion, and we should all work actively to use
them.&lt;/p&gt;

&lt;h1&gt;Cut the middle man&lt;/h1&gt;

&lt;p&gt;It&#39;s often tempting to complain about the fact that Science (not the journal,
the discipline) is hard to spread from within the community to a broader
audience. Short of some really stunning results, which may or may not be
stunning science but are appealing in terms of communication, the general
public is left relatively uninformed about what happens in the labs. The
reason is simple: channel through which we can communicate scientific
informations are relatively few, and it can be tedious to write a press
release. Or to talk with journalists, which &lt;a href=&quot;http://cscs.umich.edu/~crshalizi/weblog/838.html&quot;&gt;may be tempted to slightly
arrange your sayings&lt;/a&gt;, due
to a mis-understanding of the subject, or the necessity to fit some editorial
format.&lt;/p&gt;

&lt;p&gt;Using social media will effectively result in the elimination of the middle man. Scientists can be in charge of their communication, and reach out to the greatest audience available. The part about being in charge is especially important: in a few clicks, you can have a &lt;a href=&quot;http://wordpress.com/&quot;&gt;wordpress&lt;/a&gt; or a facebook page up and running, and &lt;em&gt;you&lt;/em&gt;, the researcher, will be able to talk directly about your work. This will require a short time of adaptation, as the general tone of a blog post is not one of a paper (unless I&#39;m wrong either in the way I write papers or blog posts!), and the degree of precision differs. But once this is done, you may even find the exercise enjoyable!&lt;/p&gt;

&lt;h1&gt;Help your ideas invade&lt;/h1&gt;

&lt;p&gt;Probably the best advice I received about what science is about comes from one of my collaborators, who interrupted our burger-seeking walk to tell me that ideas are like populations, and if I want to be a good researcher, I have to make my ideas invade the resident community. Shortly thereafter, we found a burger place, which only makes the memory more enjoyable. Invasion is about two things. Either you have a high fitness, or you &lt;a href=&quot;http://en.wikipedia.org/wiki/Allee_effect&quot;&gt;benefit of an Allee effect&lt;/a&gt;. Being present on social networks will help you achieve the later.&lt;/p&gt;

&lt;p&gt;For this reason, we owe journals like &lt;em&gt;&lt;a href=&quot;http://api.twitter.com/#!/ecologyletters&quot;&gt;Ecology Letters&lt;/a&gt;&lt;/em&gt; or &lt;em&gt;&lt;a href=&quot;http://twitter.com/#!/methodsecolevol&quot;&gt;Methods in Ecology &amp;amp; Evolution&lt;/a&gt;&lt;/em&gt; a big thank you, because they mention every new paper on twitter (well, that, and they&#39;ve also accepted papers of mine, so you know...). Some papers get retweeted, and benefit from a terrific, instantaneous exposure. I&#39;ve seen a few instances of one of the authors getting involved in the discussion, and it was all very stimulating.&lt;/p&gt;

&lt;p&gt;I&#39;m not aware of any studies establishing a correlation (or the lack thereof) between the number of times a paper is mentioned on social networks and its number of citations (my guess is that it will help citations happen sooner, not necessarily increase them – although good papers may be retweeted more frequently, so there are confounding effects here). But it definitely will not harm you to see a lot of people talking about your work.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Update on Jan. 21, 2012&lt;/strong&gt; — I became aware of this &lt;a href=&quot;http://blogs.bmj.com/bmj-journals-development-blog/2012/01/06/twimpact-factors-can-tweets-really-predict-citations/&quot;&gt;blog piece at BMJ Web Development&lt;/a&gt;, with a link to a paper showing that the number of tweet is a fairly good predictor of the number of citations. &lt;a href=&quot;http://twitter.com/signup&quot;&gt;Here you go, now&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;h1&gt;The permanent conference&lt;/h1&gt;

&lt;p&gt;A while ago during a discussion about social media, someone mentioned to me
that the kind of interactions established on twitter resemble the ones
established during a conference, albeit soberer. I have to agree with this.
Just look at the incoming tweets, or facebook updates, and you&#39;ll see what
everybody is up to. What they write about on their blogs. What kind of
webpages they are reading.&lt;/p&gt;

&lt;p&gt;It&#39;s not necessarily about science, and you&#39;ll probably find yourself bonding
with people, which may at some point become collaborators. This is one of the
strongest points to me, the ability to be permanently in touch with your
community. Even though it&#39;s not always productive, it&#39;s always good fun. But
it can become very interesting. You can ask for advice. You can get feedback,
ideas, suggestions. And a lot of things which would have gone completely under
your radar suddenly become accessible to you. Just for this, it is definitely
worth the few minutes a day that you&#39;ll soon find yourself putting into the
exercise.&lt;/p&gt;

&lt;h1&gt;All the cool kids do it!&lt;/h1&gt;

&lt;p&gt;I&#39;ve tried to make the point that being active on social networks can help you
take control of what is said about your science, will let other spread your
ideas, and will make you feel as if you were in contact with everyone at once.
But more importantly, it&#39;s cool. Wicked cool. Hype.&lt;/p&gt;

&lt;p&gt;Basically, it will give you two things. Visibility, and the image of an
engaging researcher / group of people. Students will actually look for these
traits, so being easy to reach may attract people to your lab. It&#39;s also why
you should not use Word to do your lab webpage (unless you are so good and
attractive and awesome that it stops mattering), by the way.&lt;/p&gt;

&lt;p&gt;And the best part is, it&#39;s free (as in beer)! And should you want to get
started, I&#39;m sure you&#39;ll find plenty of people willing to help you, and set
things up for you, and introduce you to these tools. I&#39;m confident that they
will become an increasingly important part of the daily routine of scientists
in the near future (which is why we use them so much at INNGE), so don&#39;t miss
up this opportunity.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>A model of population dynamics in Python</title>
     <link href="http://timotheepoisot.fr/2011/11/14/a-model-of-population-dynamics-in-python/"/>
    <updated>2011-11-14T00:00:00-05:00</updated>
    <content type="html">&lt;p&gt;I&#39;ve been using &lt;a href=&quot;http://python.org/&quot;&gt;Python&lt;/a&gt; more and more to do various things. When compared to &lt;a href=&quot;http://cran.cict.fr/&quot;&gt;R&lt;/a&gt; (which I use a lot), Python is not more difficult to write, and a whole lot faster. I&#39;ve started exploring tools to use Python for ecological simulations, and specifically the &lt;a href=&quot;http://www.scipy.org/&quot;&gt;scipy&lt;/a&gt; library. In R, my usual tool is the &lt;a href=&quot;http://simecol.r-forge.r-project.org/&quot;&gt;simecol&lt;/a&gt; package, which implements a lot of numerical integrators, and most notably &lt;a href=&quot;http://www.oecd-nea.org/tools/abstract/detail/uscd1227&quot;&gt;&lt;code&gt;LSODA&lt;/code&gt;&lt;/a&gt; (which is awesome for many many reasons, including but not limited to its ability to switch between stiff and non-stiff problem at each step).&lt;/p&gt;

&lt;p&gt;In simecol, modeling a population dynamics requires to write a function taking as an input a vector of population sizes, some parameters, and the time. The purpose of the package is to provide a wrapper around such functions. After using this package more or less non stop for 3 years, I&#39;ve become accustomed to this way of writing things, and I was afraid that I may have to change my habits. I was really happy to discover that &lt;a href=&quot;http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.odeint.html&quot;&gt;scipy.integrate.odeint&lt;/a&gt; in scipy, was both an implementation of the LSODA, and worked in the exact same way that simecol did.&lt;/p&gt;

&lt;p&gt;To write a simulation of population dynamics (I&#39;ll use logistic growth as an example), we first import the relevant parts of the scipy library.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sp&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy.integrate&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sp_int&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, we write the function modeling the population growth, as a function of
two parameters, &lt;em&gt;r&lt;/em&gt; and &lt;em&gt;K&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;logistic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The syntax is relatively easy. Note that &lt;code&gt;t0&lt;/code&gt; is not used by the function at any time, but is required by &lt;code&gt;odeint&lt;/code&gt; to do its internal calculations. Note also that y is an array. These two parameters are required, and the other are optional. Next, we fix the values of &lt;em&gt;r&lt;/em&gt; and &lt;em&gt;K&lt;/em&gt;. The required format is a tuple, so you need to be very careful when passing the parameters: they must be in the same order than in the function declaration. Additionally, we&#39;ll declare a starting population size.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we will do the actual numerical integration. This is fairly simple.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;log_growth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;odeint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logistic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that we define an array called &lt;code&gt;t&lt;/code&gt;, in which the times at which integration needs to be performed are stored. The object &lt;code&gt;log_growth&lt;/code&gt; will have all the information required to analyze the simulation results, with the time in the first column, and the population sizes after. This kind of object is fairly easy to plot using, e.g. &lt;a href=&quot;http://pyx.sourceforge.net/&quot;&gt;PyX&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Although this was a simple example, it illustrates how easy it can be to program a simple simulation using python. I must admit that I was nicely surprised to see the rapidity of the process, and the gain in execution time when compared to R is definitely not something to neglect.&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Morphology and phylogeny in Lamellodiscus</title>
     <link href="http://timotheepoisot.fr/2011/10/12/morpho-phylo-lamellodiscus/"/>
    <updated>2011-10-12T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;The final paper of my master&#39;s project was &lt;a href=&quot;http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0026252&quot;&gt;published online today in &lt;em&gt;PLoS One&lt;/em&gt;&lt;/a&gt;. It&#39;s about how species of a fish parasite, which were defined based on morphological features, may not be actual species, as they have no phylogenetic support.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;Lamellodiscus&lt;/em&gt; Johnston &amp;amp; Tiegs 1922 (Monogenea, Diplectanidae) is a genus of common parasites on the gills of sparid fishes. Here we show that this genus is probably undergoing a fast molecular diversification, as reflected by the important genetic variability observed within three molecular markers (partial nuclear 18S rDNA, Internal Transcribed Spacer 1, and mitonchondrial &lt;em&gt;Cytochrome Oxidase I&lt;/em&gt;). Using an updated phylogeny of this genus, we show that molecular and morphological evolution are weakly correlated, and that most of the morphologically defined taxonomical units are not consistent with the molecular data. We suggest that &lt;em&gt;Lamellodiscus&lt;/em&gt; morphology is probably constrained by strong environmental (host-induced) pressure, and discuss why this result can apply to other taxa. Genetic variability within nuclear 18S and mitochondrial &lt;em&gt;COI&lt;/em&gt; genes are compared for several monogenean genera, as this measure may reflect the level of diversification within a genus. Overall our results suggest that cryptic speciation events may occur within &lt;em&gt;Lamellodiscus&lt;/em&gt;, and discuss the links between morphological and molecular evolution.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Poisot T, Verneau O, Desdevises Y (2011) Morphological and Molecular Evolution Are Not Linked in &lt;em&gt;Lamellodiscus&lt;/em&gt; (Plathyhelminthes, Monogenea). PLoS ONE 6(10): e26252. doi:10.1371/journal.pone.0026252&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>INNGE network : this is on!</title>
     <link href="http://timotheepoisot.fr/2011/07/18/innge-network-this-is-on/"/>
    <updated>2011-07-18T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;The INNGE network is now officially started, with a short Forum article in the &lt;a href=&quot;http://www.intecol.net/&quot;&gt;INTECOL Bulletin&lt;/a&gt; (PDF attached at the end of this post). I&#39;m obviously very glad to be part of this effort, which seeks to bring early career ecologists together from around the world, thereby strengthening international ties within a growing global community of ecologists.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;http://www.sfecologie.org/&quot;&gt;&lt;em&gt;Société Française d&#39;Ecologie&lt;/em&gt;&lt;/a&gt; is supporting this initiative as well. If you want to know more about this network, or want to get involved, most of us will be attending the &lt;a href=&quot;http://www.esa.org/austin/&quot;&gt;ESA meeting in Austin&lt;/a&gt;, this august, do not hesitate to get in
touch using our emails, &lt;a href=&quot;http://www.facebook.com/groups/254873494526193&quot;&gt;Facebook&lt;/a&gt;, or &lt;a href=&quot;https://twitter.com/#!/inngecologist&quot;&gt;Twitter&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Jørgensen, P. S., et al. (2011). A global network of next generation ecologists. &lt;em&gt;INTECOL Bulletin&lt;/em&gt;, 5 (2), 4-6. &lt;a href=&quot;http://www.timotheepoisot.fr/wp-content/uploads/2011/07/J%C3%B8rgensen-et-al.-2011-A-global-network-of-next-generation-ecologists.pdf&quot;&gt;PDF&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  
  <entry>
     <title>Models in Evolutionary Ecology, 2nd edition</title>
     <link href="http://timotheepoisot.fr/2011/07/17/models-in-evolutionary-ecology-2nd-edition/"/>
    <updated>2011-07-17T00:00:00-04:00</updated>
    <content type="html">&lt;p&gt;The videos of the talks given during the second edition of the &lt;a href=&quot;http://www.seminar-mee.org/home/programme&quot;&gt;Models in
Evolutionary Ecology&lt;/a&gt; seminar,
which I co-organized, are currently being put on-line. &lt;a href=&quot;http://www.dailymotion.com/playlist/x1mv7l_mez_en_video_cefe-%0Acolloque&quot;&gt;You can see them on
Dailymotion&lt;/a&gt; (my own talk is not online yet). This seminar was organized by
french PhD Students, in order to foster interactions between people working on
experimental and theoretical aspects of the multiple fields that make
evolutionary ecology.&lt;/p&gt;

&lt;p&gt;This year was our second attempt at organizing a seminar. For the first time,
we opened registration to doctoral students and post-docs outside from france,
and we are happy to have hosted talk by foreign researchers.&lt;/p&gt;

&lt;p&gt;Feel free to see and share the videos!&lt;/p&gt;
</content>
  </entry>
  
</feed>
