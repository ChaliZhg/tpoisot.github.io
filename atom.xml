<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Tim Poisot :: Updates</title>
  <link href="http://timotheepoisot.fr/atom.xml" rel="self"/>
  <link href="http://timotheepoisot.fr/"/>
  <updated>2014-09-25T22:28:43+12:00</updated>
  <id>Tim Poisot</id>
  <author>
    <name>Tim Poisot</name>
    <email></email>
  </author>
  
  <entry>
     <title>How to write a paper</title>
     <link href="http://timotheepoisot.fr/2014/09/25/writing-paper/"/>
    <updated>2014-09-25T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;I must make a confession. Through no one’s fault bu my own, I made it through my PhD without a writing method. Not that I knew how to write, and did not have a routine. I had no method. When it was time to write a paper, I opened a text editor and started writing a paper. It now sounds head-bashingly stupid; it is. It is a wonder that I managed to get any writing done. I started developping an idea of how to write during my post-doc. Mostly by osmosis, and in part because I needed to do more in less time. And before you get the wrong idea, this is not about &lt;em&gt;what&lt;/em&gt; to write, or whether or not your paper will be accepted faster. This is not a perfect approach, and different people probably do need different ways to tackle a paper. But it works for me, and it is easy to do.&lt;/p&gt;
&lt;p&gt;Whenever I have a chance, I tell a variation of the following to students: “You don’t start a paper by opening a text editor, you don’t start a presentation by making the title slide, and you don’t start a program by opening a code editor”. These are the &lt;em&gt;last&lt;/em&gt; steps. What comes before, is the thinking and the planning. Writing the paper is the &lt;em&gt;boring&lt;/em&gt; part, because (in my opinion), it is the &lt;em&gt;obvious&lt;/em&gt; part. When I follow my usual writing method, I have no surprises when writing the paper. So here it goes, the three-step approach to eternal success and good luck in your academic writing (&lt;em&gt;patent pending&lt;/em&gt;): start with an outline, tell a story, go top-down.&lt;/p&gt;
&lt;h1 id=&quot;start-with-an-outline&quot;&gt;Start with an outline&lt;/h1&gt;
&lt;p&gt;Your are probably disappointed at this point. Start with an outline, is that the big advice? Oh boy. Start with an outline is probably the most often given advice when writing a paper, and for a reason; unless you are writing a very narrative piece, it works. But I really do mean &lt;em&gt;start&lt;/em&gt; with an outline, that is, before or as long as you are doing the things that will go in the paper. I’ve had a few brainstorming session when we thought about what the figures would look like, what type of data we would get, and how different mechanisms would give different results. In 90% of the cases, the final figures where different, but at least we had an idea of where we were headed.&lt;/p&gt;
&lt;p&gt;So the first outline is not necessarily a list of bullet points. It is a loose mix of drawings, keywords, references, and the relationships between them. It’s more of a roadmap than an outline, but it serves (for me) one really important purpose: how different results (represented by figures) fall into the global narrative of the paper. Because, you see, I like it when papers…&lt;/p&gt;
&lt;h1 id=&quot;tell-a-story&quot;&gt;… tell a story&lt;/h1&gt;
&lt;p&gt;And by a story, I don’t mean the particular story of how I came from the idea to the first figures to subsequent fine-scale analysis to the grand conclusion. This is only marginally interesting to me, and it is certainly not interesting to people reading the paper. And so most of the times, the results or idea are introduced in the paper in a way that does not reflect the chronology of how the research happened. More than once, things that emerged later in the analysis where re-pitched into being the main focus of the paper, and so we ended up telling a different story.&lt;/p&gt;
&lt;p&gt;What I mean is that a paper needs to have a plot: expose the initial situation (&lt;em&gt;We have this theory about A, and it’s working well at predicting this and this, and here are the core mechanisms&lt;/em&gt;), then introduce a perturbation (&lt;em&gt;But you see, there is dataset D, and it contradicts the predictions made under the relevant theory&lt;/em&gt;). This is what I write first, and this is usually the introduction. Then, write the dénouement (&lt;em&gt;In fact, mechanisms B and C interact in this weird way under particular circumustances, so you need to account that.&lt;/em&gt;). This is the plot (also the first paragraph of the discussion). What I do next is flesh out the story, that is all the little steps that go from the initial question to the conclusion. And for that, I usually…&lt;/p&gt;
&lt;h1 id=&quot;go-top-down&quot;&gt;… go top-down&lt;/h1&gt;
&lt;p&gt;Let’s get back to the outline. At this point, the context is defined, the question in known, and because I have usually preliminary results, I can write the conclusion. What I do next is writing the outline, in a top-down way. I start with the big sub-divisions of the paper (introduction, model/methods, results, discussion). Then below each (except model/methods), I list the main ideas of each paragraph, in a very explicit way. I try to keep that within one, active voice, declarative sentence (&lt;em&gt;Coexistence happens under source-sink dynamics at intermediate dispersal levels&lt;/em&gt;). This is the summary of each paragraph. When this is done for all main headings (and I usually spend a bit of time tweaking it about), the whole outline should read like a coherent paragraph. This is when I break out my red pen, and under each single sentence, I list (i) the 2 or 3 key references, and (ii) the figures or tables that will be refered to. In most cases, I will also break each paragraph into three sub-points, especially if it is a key paragraph.&lt;/p&gt;
&lt;p&gt;I think that this method has important advantages. First, because I write the actualy outline late (I start with a conceptual idea of the paper, then go through producing the results, then start writing the outline), it’s easy to base it on whatever material I already have. Second, because paragraphs tend to be of approximately equal size, I can see whether one or more parts are bloated, and move things around (also good to estimate word count). Third, it is easier to get an idea of the overal flaw of the paper. If one of the paragraphs reads &lt;em&gt;Ponder on semi-related litterature from sub-field you enjoy despite never having worked in it&lt;/em&gt; (one of my biases), then I can immediately see that it does not fit within the macro-level structure of the paper. Cut. Finally, it gives constraints when writing. For this is the final step:&lt;/p&gt;
&lt;h1 id=&quot;writing&quot;&gt;Writing&lt;/h1&gt;
&lt;p&gt;Once I have the outline, that I have made sure that the story flows and there are no gaps in the story, and that the paragraphs are balanced, it’s time to start writing.&lt;/p&gt;
&lt;p&gt;This is as good a place as any to mention that all of the above takes place in a notebook (currently a hardcover plain white Moleskine, though I’m a bit disappointed by the shoddy quality of the paper, especially since they are so expensive). Notebooks are good, because you can carry them anywhere, they don’t run out of power, and they boot faster than a laptop. See? This paragraph cuts the flow. I would have removed it from the outline.&lt;/p&gt;
&lt;p&gt;Anyways. When it’s time to start writing – on a computer, I can start wherever I want. If I’m in the mood to review some conceptual papers, I can write parts of the introduction. Or the results. I just need to look at the summary of the paragraph to know what to talk about. Then I look at the paragraph before and after, to know how my paragraph shoul begin and end. Everything in the paragraph needs to help the “story” move forward.&lt;/p&gt;
&lt;p&gt;The other advantage (and it has became a selling point over the last few months, where I have mostly been able to work on very short chunks), is that I don’t have to think too much about what to write. The job is already broken down. So I don’t say &lt;em&gt;I have to write that paper&lt;/em&gt;. I say, &lt;em&gt;I have to write 300 words about how this statistical bias affects the computational efficiency of null models&lt;/em&gt;. This is much less daunting. Writing 300 words is nothing, especially when you already know the big story.&lt;/p&gt;
&lt;h1 id=&quot;parting-words&quot;&gt;Parting words&lt;/h1&gt;
&lt;p&gt;So here is my method – if you want to make your life easier when writing a paper, try to delay the actual writing until the last moment (advisors of the world, sorry!). If all of the planning and all of the thinking ahead has been done, then the actual writing is a matter of connecting the dots.&lt;/p&gt;
&lt;p&gt;I have also noticed that it made me writer shorter, thighter papers. Probably because it is easier (for me) to spend one or two additional paragraphs rambling about things, which I can’t do if I stick to my outline (this method is &lt;em&gt;entirely&lt;/em&gt; about me trying to cope with my terrible habits). If found that it worked surprisingly well for grant applications, too! The sections are already given, and (in one recent case) there are size limits for each sub-header: I spent a lot of time working on which paragraphs to write whithin each to meet the space constraints, and it made writing considerably easier than under my previous strategy (write 15000 words and cut).&lt;/p&gt;
&lt;p&gt;I’m not pretending that this method will work for you – or that I follow it strictly at all times. But overall, it made me more productive in my writing. If the outline is good, and the story is thight, there are much less chances than a massive re-writing would be needed. And although I don’t have any other evidences than anecdotal ones, I suspect that it makes things easier to read and follow for the readers.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Tales from the job search I - The French Connection</title>
     <link href="http://timotheepoisot.fr/2014/09/24/tales-job-search-I/"/>
    <updated>2014-09-24T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;On January 5, I will start a position as an assistant professor at the &lt;a href=&quot;http://en.bio.umontreal.ca/home/&quot;&gt;Department of Biological Sciences, Université de Montréal&lt;/a&gt;. So spoiler alert, this story has a happy ending. Looking for a job has been an incredibly formative experience, and I wanted to share some of it with you.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This is part 1 out of 4 of a series of posts in which I summarize my year and a half spent looking for, and ultimately getting, an academic position. I will try to publish one every two weeks. It is mostly intended as an excuse to look back at what happened, and hopefully hear about your experiences too. Simon Goring explained the &lt;a href=&quot;http://downwithtime.wordpress.com/2014/04/08/the-job-hunt-in-france/&quot;&gt;application process&lt;/a&gt; and his &lt;a href=&quot;http://downwithtime.wordpress.com/2014/04/08/the-job-search-in-france-part-ii/&quot;&gt;overall feeling&lt;/a&gt; in a way that matches what I’m about to say, and you should read his perspective too; you will see that we had the same feeling about the interview, in particular.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;When I started my first post-doc in November 2011, I decided to take some time to enjoy doing research, without thinking about much else (besides finishing my PhD projects). After a year and a half, I decided that it was time to look for a position somewhere. For family and historical reasons, I first decided to try the French CRNS (it’s short for National Center for Scientific Research). CNRS positions have great upsides (lifetime position, no teaching, no administrative work unless you absolutely want to), and great downsides (low pay, almost no recognition, funding concentrated on a minority of people, limited opportunities to train students). But most of the CNRS staff scientists I worked with seemed happy enough, and a pure-research position was appealing to me (at this time).&lt;/p&gt;
&lt;p&gt;The CNRS is a public organism, and so researchers are civil servants. This means that the application and hiring process is relatively strange, and possibly unique. There is a yearly call for applications, with a fixed number of positions for each of the 52-or-so thematic sections. Lucky me, I had a general enough background to apply to 29 (Ecology and evolution), 30 (Ecosystems), and 51 (Multi-disciplinary, mathematics and informatics for life sciences and physics). Some of these positions are “coloured” (&lt;em&gt;A candidate with knowledge of information theory to work on connectomes in a human health group&lt;/em&gt;), but the others (that would be between one and four for each section) are open.&lt;/p&gt;
&lt;h2 id=&quot;the-application&quot;&gt;The application&lt;/h2&gt;
&lt;p&gt;To apply, you need a research program. This is approximately all of the information you are given (&lt;em&gt;Describe your research program&lt;/em&gt;), and so you won’t make it without insider knowledge. I sent a couple emails to newly hired CNRS researchers, and received four entirely different documents. I decided to do it my way, and wrote a 10-pages, 100-references, 5-years research program with short terms projects and long terms objectives. I later got feedback on it from jury or jury-related people: &lt;em&gt;It showed great maturity&lt;/em&gt;; &lt;em&gt;It did not seem really mature&lt;/em&gt;; &lt;em&gt;It was a bit fuzzy&lt;/em&gt;; &lt;em&gt;It was too specific&lt;/em&gt;. I have a feeling that the candidates are not the only ones not to have guidelines…&lt;/p&gt;
&lt;p&gt;The next thing you need is a summary of your research, with an indication of what was your role in each contribution (paper), and what was the impact of each contribution. Canadian grant applications ask that for your top 3 or top 5 contributions (or group of contributions). For the CNRS, you have to do it for all your papers. I had around 20 when I applied. Once again faced with no guidance, I put the publications in chronological order, and wrote a 300 to 500 words blurb addressing my role and the impact it had on the field. Did I got informal feedback on it after the decisions? Yes! &lt;em&gt;You have published on very different topics, it shows you can adapt to new situations&lt;/em&gt;; &lt;em&gt;You have published on very different topics, it shows you don’t know what you are doing&lt;/em&gt;. More? Yes!! &lt;em&gt;You have published in high-impact journals, it means you’re good&lt;/em&gt;; &lt;em&gt;You have published in high-impact journals more than young candidates usually do, it means somebody probably wrote the papers for you&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;With these two documents written, I submitted them to the three different sections I applied to, and waited. A few months later, I had the decisions: I was invited for an interview in the Ecology &amp;amp; evolution and Multi-disciplinary section. So far, so good. The interviews were a month and a half apart. In France. During spring time. I had to pay for one of the tickets from Canada myself, and the lab I was applying to paid for the second plane tickets. I have family in France, so my expenses were remarkably low, but the whole ordeal cost me 1500 CAD. There are a lot of discussions in France about the lack of interest from foreign scientists, or from French post-docs currently abroad to return; this is why.&lt;/p&gt;
&lt;h2 id=&quot;the-interview&quot;&gt;The interview&lt;/h2&gt;
&lt;p&gt;As &lt;a href=&quot;http://downwithtime.wordpress.com/2014/04/08/the-job-search-in-france-part-ii/&quot;&gt;Simon said&lt;/a&gt;, the interview is best summarized as &lt;em&gt;anticlimactic&lt;/em&gt;. Depending on the sections, you talk for 12 to 15 minutes, and have 10 to 15 minutes of questions. My interview in the Ecology &amp;amp; evolution section went “OK enough, I guess”. I didn’t made it into the short-list. The interview with the Multi-disciplinary section went really well. I made it into the short-list (ranked 6, 4 positions), didn’t got the position in the end. The big difference between the two was how receptive the jury was to the methodological side of things. To the surprise of absolutely no one, my proposal was strongly leaning towards data analysis, computational science, and applications of graph theory. The math-inclined people in the Multi-disciplinary section seemed to enjoy it, and we had good (and very technical) discussions about some particularities of algorithmic and computational issues. The jury in the Ecology &amp;amp; evolution seemed to block on the methodological side of things.&lt;/p&gt;
&lt;p&gt;As an aside, this has been a recurring problem for me. Network-related things seems off-putting to a lot of people, and I have read more than once in reviews that the very precise and well-defined terminology of network analysis was “jargon”. I know that the onus is on me to translate the vocabulary and do a lot of pedagogy, but I suspect that there is a - small - core of people that want nothing to do with networks.&lt;/p&gt;
&lt;h2 id=&quot;the-after&quot;&gt;The after&lt;/h2&gt;
&lt;p&gt;I received the decisions around June. Even though I am fairly critical of how hard it is to navigate the whole process, and how inconsistent the feedback I received was, I am quite happy about the experience. It’s hard not to think that there is a lot of place left to personal feelings of jury members instead of having well-defined items for evaluation; this is understandable if you are going to interact with these people on a daily basis, but if you are only going to meet them during the interview, this is less understandable. Anyway, this is symptomatic of how France works as a country (or of how us French work as people); it has advantages (you can adjust the rules to your feelings), and inconveniences (you can adjust the rules to your feelings), and in any case there will be numerous and loudly explained complaints with much arms waving.&lt;/p&gt;
&lt;p&gt;What did I get out of the experience? First, a good research program. It changed over time, I think for the better, but it was the first time I had to put the last 4 years of my research in perspective in an integrated, meaningful ways. I also thought in depth about what type of projects I wanted to do in five or ten years, and that resulted in re-directing current projects, and starting new ones, and merging one or three that felt out of touch with the new insights I gained on what I wanted to do. It also gave me a full year to think about the type of position I wanted. After spending the previous winter teaching, I decided that a full-time research position would be good, but a more North-American professorship would be better. A few months of self-introspection later, I started writing up a teaching and research statement for future job searches. And so began the second chapter of my tales, &lt;em&gt;The Crossing of the Desert&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>The use of Twitter at ESA and IMCC</title>
     <link href="http://timotheepoisot.fr/2014/08/17/twitter-esa-imcc/"/>
    <updated>2014-08-17T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;August is conference season. But for the last few years, not being able to attend does not mean that you can’t partake in the global discussion, as more and more scientific meetings have been using twitter hashtags to keep the discussion going online. Being both a fervent twitter user, and interested in all things networks, I decided to explore the assembly of the graph of interactions among scientists over time. A bunch of us are doing a more formal analysis of the &lt;em&gt;Ecological Society of America&lt;/em&gt; 2014 meeting, but here I will present a brief comparison of &lt;code&gt;#ESA2014&lt;/code&gt; with &lt;code&gt;#IMCC3&lt;/code&gt;, the &lt;em&gt;International Marine Conservation Congress&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Both meetings took place almost at the same time, were massively using their respective hashtag, and are within the same broad field of environmental sciences. I won’t go into the details, but here is what I’ve been doing. I used the Twitter API to pull all tweets containing either &lt;code&gt;#ESA2014&lt;/code&gt; or &lt;code&gt;#IMCC3&lt;/code&gt;. For all of these tweets, I looked at who wrote it, and who was mentioned in it. If a tweet written by &lt;code&gt;@bob&lt;/code&gt; mentionned &lt;code&gt;@alice&lt;/code&gt;, I recorded one interaction from &lt;code&gt;@bob&lt;/code&gt; to &lt;code&gt;@alice&lt;/code&gt;, along with the time, and the meeting in which it occured. Because the use of twitter was &lt;em&gt;massive&lt;/em&gt;, this resulted in a little more than 3500 people, mentionning each other over 20000 times.&lt;/p&gt;
&lt;p&gt;I was mostly interested in how using Twitter can help bring people together over time, which in a network perspective is akin to measuring modularity, and how it decreases.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;load&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;../data/twitter_meetings.Rdata&amp;#39;&lt;/span&gt;)
opts_knit$&lt;span class=&quot;kw&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;base.dir =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;..&amp;#39;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(plyr)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(igraph)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;OK, so first (keeping in mind that &lt;code&gt;#IMCC3&lt;/code&gt; is still going), what does the dynamics of number of tweets looks like? I divided the dataset in bins of approximately 10 hours, and looked at the number of tweets, and number of users.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_all, vcount), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;l&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Participants&amp;#39;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_esa, vcount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_imcc, vcount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;legend&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;topleft&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;legend=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;All&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;#ESA2014&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;#IMCC3&amp;#39;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;),
       &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;black&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;darkgreen&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;darkblue&amp;#39;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;bty=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/figure/tweet_vcount.png&quot; alt=&quot;Looking at the number of people using twitter in bins of ten hours gives an idea of when, during the meeting, the people are more active.&quot; /&gt;&lt;figcaption&gt;Looking at the number of people using twitter in bins of ten hours gives an idea of when, during the meeting, the people are more active.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_all, ecount), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;l&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Tweets&amp;#39;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_esa, ecount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(t_imcc, ecount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/figure/tweet_ecount.png&quot; alt=&quot;The same goes for the number of unique tweets. At #esa2014, most of the action was during the second and third days.&quot; /&gt;&lt;figcaption&gt;The same goes for the number of unique tweets. At &lt;code&gt;#esa2014&lt;/code&gt;, most of the action was during the second and third days.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Interestingly, the use of hashtags allows the conversation to start &lt;em&gt;before&lt;/em&gt; the actual meeting does. And, oh yeah, shame on us ecologists, the IMCC crowd is way better at twitter than we are! With roughly the same number of people involved, they manage to talk twice as much as we do. Actually, let’s look at the cumulative number of tweets exchanged:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_all, ecount), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;l&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Cumulative tweets&amp;#39;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_esa, ecount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_imcc, ecount), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;legend&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;topleft&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;legend=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;All&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;#ESA2014&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;#IMCC3&amp;#39;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;),
       &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;#39;black&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;darkgreen&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;darkblue&amp;#39;&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;bty=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/figure/tweet_vcount_cum.png&quot; alt=&quot;Cumulative number of participants in both meetings. #IMCC3 is taking off extremely fast, compared to the more modest growth of #esa2014.&quot; /&gt;&lt;figcaption&gt;Cumulative number of participants in both meetings. &lt;code&gt;#IMCC3&lt;/code&gt; is taking off extremely fast, compared to the more modest growth of &lt;code&gt;#esa2014&lt;/code&gt;.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Whereas the number of &lt;code&gt;#ESA2014&lt;/code&gt; tweets ends-up stagnating, the &lt;code&gt;#IMCC3&lt;/code&gt; conversation keeps on going. If I had to propose an explanation, I think it would be that marine sciences and conservation are really to get people interested in (especially since it was &lt;em&gt;Shark Week&lt;/em&gt; recently). Ecology &lt;em&gt;should&lt;/em&gt; be the same, but we have a long way to go.&lt;/p&gt;
&lt;p&gt;So what about modularity? I used the walktrap method, which is based on short (of size 3) random walks, to determine the membership of people to communities, and then I measured the overall modularity. This goes from 0 (everyone is connected to everyone else) to 1 (groups of well connected people are not connected to one another).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;mod &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(x) &lt;span class=&quot;kw&quot;&gt;modularity&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;walktrap.community&lt;/span&gt;(x))
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_all, mod), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;l&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Modularity&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_esa, mod), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_imcc, mod), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/figure/tweet_modularity.png&quot; alt=&quot;In both meetings, modularity decreases over time. Note that the #imcc3 meeting ws less modular even at the beginning of the analysis.&quot; /&gt;&lt;figcaption&gt;In both meetings, modularity decreases over time. Note that the &lt;code&gt;#imcc3&lt;/code&gt; meeting ws &lt;em&gt;less&lt;/em&gt; modular even at the beginning of the analysis.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;I like this figure! The &lt;code&gt;#ESA2014&lt;/code&gt; meeting is not that modular by the end (a modularity around 0.4 indicates that some clusters exists, but they are overall well-connected). On the other hand, &lt;code&gt;#IMCC3&lt;/code&gt; is really well connected. Keeping in mind that the number of contributors is similar, this means that the &lt;code&gt;#IMCC3&lt;/code&gt; community is much more uniform than the &lt;code&gt;#ESA2014&lt;/code&gt; community is. This can be because the span of &lt;code&gt;#IMCC3&lt;/code&gt; is more narrow (whereas &lt;code&gt;#ESA2014&lt;/code&gt; is about &lt;em&gt;all&lt;/em&gt; ecology), or this can be that the sense of belonging to a community is more developed in marine conservation people.&lt;/p&gt;
&lt;p&gt;Let’s now look at the diameter (the maximum distance between two nodes) in the two graphs:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_all, diameter), &lt;span class=&quot;dt&quot;&gt;lwd=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;l&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;lty=&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;#39;Diameter&amp;#39;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylim=&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_esa, diameter), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkgreen&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;lines&lt;/span&gt;(xseq, &lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(a_imcc, diameter), &lt;span class=&quot;dt&quot;&gt;col=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;darkblue&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/figure/tweet_diameter.png&quot; alt=&quot;Diameter (maximal distance between two contributors) in both conferences. Keeping in mind that #IMCC3 has more contributors, the fact that it has a lower diameter means that the interactions between them are indeed closer.&quot; /&gt;&lt;figcaption&gt;Diameter (maximal distance between two contributors) in both conferences. Keeping in mind that &lt;code&gt;#IMCC3&lt;/code&gt; has more contributors, the fact that it has a lower diameter means that the interactions between them are indeed closer.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This tells the same story: with a diameter of 10, against 7 for &lt;code&gt;#IMCC3&lt;/code&gt;, &lt;code&gt;#ESA2014&lt;/code&gt; is a more disjointed community. As a final note, I will release both datasets when &lt;code&gt;#IMCC3&lt;/code&gt; tweets stop accumulating.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>The challenge of relatable theoretical ecology</title>
     <link href="http://timotheepoisot.fr/2014/08/13/making-theory-relatable/"/>
    <updated>2014-08-13T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;Last November, I was attending the &lt;em&gt;International Biogeogaphic Society&lt;/em&gt; special meeting on species interactions. The first keynote speaker, &lt;a href=&quot;http://nature.berkeley.edu/~gillespie/Home.html&quot;&gt;Rosemary Gillespie&lt;/a&gt;, mentioned that one of the most important piece of advice she received was to find a model system, understand it as much as you can, and use it as a basis against which other systems can be compared. Her and her group are doing some stunning things on the biogeography of spiders on the Hawaii archipelago, so it’s hard to argue against this approach. This little piece of advice was picked up by a majority speakers during the meeting, and they were all very passionate about the species or field sites they were studying.&lt;/p&gt;
&lt;p&gt;On the other hand, I’m essentially system-agnostic. So I decided to make a little joke during my talk, and showed a picture of my own model system (the laptop) at the margin of its habitat (a two minutes walk from the nearest power outlet) – this particular species has since been displaced by a fitter invader. It’s true that there are some systems I know more than others. I’m biased towards on microbial interactions, especially involving bacteria and phages. I’m partial to parasites, especially the ones you find in fishes or rodents. But I really don’t care if I have to work on something else.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;left&quot;&gt; &lt;img src=&quot;/images/laptop.jpg&quot; /&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;My point of view is: find the most suitable (which to say, the less unsuitable) dataset for the question you have in mind at the moment, and work to understand its particular features that makes things general or not. Is it pollinators? Good. Is it from literature surveys? That’s good too. In fact, as long as it matches your question, anything goes. Which is a central point of my “philosophy” as a data &lt;em&gt;consumer&lt;/em&gt;: there is no good, and no bad, dataset. There are datasets matching the question you have in mind, and there are all of the other datasets in the world. I have some projects on the back-burner because I’m still waiting for the good dataset to use to finish them (note that I’m not waiting for the &lt;em&gt;perfect&lt;/em&gt; dataset, there is almost never such a thing).&lt;/p&gt;
&lt;p&gt;One of the dynamics of scientific collaboration I enjoy the most is when people with a good knowledge of the natural history and people with more conceptual interests team up, and both sides gain improved knowledge. Theoretical (a catch-all term for numerical, computational, conceptual) science cannot exist in a vacuum for a long time, which makes it necessary to work closely with people knowing their system very well. In the preface to a special issue of &lt;em&gt;Interface Focus&lt;/em&gt; on theoretical ecology, &lt;span class=&quot;citation&quot; data-cites=&quot;lev12a&quot;&gt;Levin (2012)&lt;/span&gt; gives a really convincing historical argument for more interactions between theory and data, and at the same time has this impeccable criticism of purely mathematical approaches to ecological questions:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The legacy of Volterra and Lotka has not been universally positive, although this is certainly not their fault. The attractive simplicity of the model equations proved irresistible to mathematicians eager to add bells and whistles, with little concern for biological relevance, and to explore their tortured implications in painful detail. &lt;strong&gt;This has produced a large literature, harmless except for its effect on perceptions of the field of mathematical biology, and its obfuscation of the cryptic nuggets that sometimes lie within&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;p&gt;A while ago, we submitted a purely theoretical paper (it has been accepted since I started writing this post), which one may be tempted to file into the &lt;em&gt;adding bells and whistles&lt;/em&gt; category. This paper is, for the largest part, an analytical treatment of a modified version of host-symbiont dynamic models, with some simulations by the end. It was broad enough that we used a general language to describe the type of organisms we were modelling. We didn’t just called them &lt;em&gt;organisms&lt;/em&gt;, but that was close enough; that’s how general that paper is, and it certainly does not apply to a particular ecosystem. One of the referees reported that it was interesting and sound, but he couldn’t recommend acceptation, because it did not bring any new insight about any specific system in nature. It is always a harsh thing to read about your work as a theoretician (seeing your work dismissed as, essentially, &lt;em&gt;unreal&lt;/em&gt; – an interesting but futile exercise). Luckily, the associate editor replied with the following comment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is always one of those complicated issues for models - true biological reality means it isn’t a model, it is nature. But it is also true that for a model to make sense to empiricists it has to relate to something they understand.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;These are good words. What I enjoy about this comment is that it highlights both sides of the responsibility to close the gap between empirical and theoretical sciences. On one hand, we have to accept that all of the details or our favorite empirical system are unlikely to be captured by a model, and that this is not (necessarily) a reason not to consider the model at all. On the other hand, as Levin pointed out, us theoreticians have to make modelling relatable, and I’ll talk a bit more about that.&lt;/p&gt;
&lt;p&gt;I think there are two ways to make mathematically-grounded theoretical work relatable to non theoreticians. The first is trying to reproduce an empirical system in all of its details, so as to be able to predict a lot about little. The second way (which is close to what I do) is to use models that are general enough to capture a broad range of phenomenons, and explain (in the text) where they do and don’t apply to ecological systems. Both sides of the discussion have been covered by &lt;span class=&quot;citation&quot; data-cites=&quot;eva13&quot;&gt;Evans et al. (2013)&lt;/span&gt; (and surprisingly they call for more focused, small-scale models, because the high-order ones make so many assumptions that they end up being irrelevant).&lt;/p&gt;
&lt;p&gt;One of the issues I have with pure-theory journals (which I think is why I read them, review papers for some, but don’t intend to publish there any time soon), is that they tend to favor papers in which a lot of emphasis is put on mathematical prowess, and very little on making the paper relatable to a broad audience. Not that this is a bad thing &lt;em&gt;per se&lt;/em&gt;, but perhaps it explains the citation gap between empirical and theoretical works &lt;span class=&quot;citation&quot; data-cites=&quot;faw12a&quot;&gt;(Fawcett and Higginson 2012)&lt;/span&gt;: this indicates a tendency to discard papers with equations as being primarily mathematics, even though they address biological questions – I wonder if the citation gap is as strong in ecology, which has a rich tradition of quantitative research. If there is an echo chamber of theoretical papers (I’m not assuming there is, or that it would be a bad thing assuming we can have some synthesis once in a while), in which making the paper relatable to empiricists is not a priority, then it should not be a surprise that empiricists do not relate to the paper (and therefore do not cite it).&lt;/p&gt;
&lt;p&gt;An interesting point to keep in mind is that (most) theoretical papers require empirical science as an input. So most of the efforts needed to close the loop would be to make sure that more theoretical science goes into empirical one. Which takes (I think) three different ingredients. First, at the system scale, increasing quantitative skills &lt;span class=&quot;citation&quot; data-cites=&quot;bar13b&quot;&gt;(Barraquand et al. 2013)&lt;/span&gt; so that no one is &lt;em&gt;afraid&lt;/em&gt; of equations anymore. Second, putting an end to the idea that results not obtained through empirical approaches are untrue (they are most likely quantitatively wrong but qualitatively insightful). And finally, an increase in the efforts made by theoreticians to &lt;em&gt;reach out&lt;/em&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;My own perspective on the way forward is to increase collaborations. I am not comfortable with the ideas of &lt;em&gt;theoretical ecology&lt;/em&gt; sessions in conferences, because it is essentially a statement that while other fields are defined by their questions (&lt;em&gt;community&lt;/em&gt;, &lt;em&gt;landscape&lt;/em&gt;, &lt;em&gt;evolutionary&lt;/em&gt;, …), one sub-field can be summarized only by its approaches. This contributes to the reproductive barrier (for ideas!) between the sub-fields. Projects relying heavily on data analysis are always a good opportunity, because the people having collected the data have some knowledge about them that is not necessarily apparent in the data themselves. But I have been involved lately in two really good projects where toy models were used as a supplement to purely empirical science. This felt really right! My personal preference is clearly for this type of approaches. None of these papers are going to break any new ground from a mathematical modelling point of view, but the addition of models helped greatly in the interpretation of the results (hence, breaking some new &lt;em&gt;ecological&lt;/em&gt; ground).&lt;/p&gt;
&lt;p&gt;And lastly, let’s not forget that models often do not have the last word. Charles Krebs recently synthesized &lt;a href=&quot;https://www.zoology.ubc.ca/~krebs/ecological_rants/?p=786&quot;&gt;40 years of research on the lynx-hare population cycles&lt;/a&gt;, and this is a really entertaining and informative post to read. The lynx-hare data are often mentioned as an example of demographic control by predators, or of tri-trophic interactions. And indeed, several population dynamical models are able to reproduce cyclic oscillations really well. The interesting point, however, is that in nature, it all boils down to predator-induced stress, which is inherited through maternal effects. The models are able to reproduce the data very well, but the models are wrong. I like this idea of models that help sorting through hypotheses, and acting as prior information. But if we are not doing mathematical biology for the sake of mathematics, then empirical confirmation matters.&lt;/p&gt;
&lt;p&gt;It’s fine to have people passionate about a species, a field site, or an experimental system. It’s fine to have people doing ecological research from the comfort of their office chair. But the most important is to have a concerted effort to use as much methods as we can to answer questions. Whether this involves muddy boots, a few hundred microcosms, or whatever it is theoreticians scribble in their notebooks… the more the merrier!&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;
&lt;p&gt;Barraquand, F. et al. 2013. Lack of quantitative training among early-career ecologists: a survey of the problem and potential solutions. - PeerJ 1: e53v1.&lt;/p&gt;
&lt;p&gt;Evans, M. R. et al. 2013. Do simple models lead to generality in ecology? - Trends in Ecology and Evolution in press.&lt;/p&gt;
&lt;p&gt;Fawcett, T. W. and Higginson, A. D. 2012. Heavy use of equations impedes communication among biologists. - Proceedings of the National Academy of Sciences of the United States of America: 1205259109.&lt;/p&gt;
&lt;p&gt;Levin, S. A. 2012. Towards the marriage of theory and data. - Interface Focus 2: 141–143.&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Estimating SIR model parameters with ABC</title>
     <link href="http://timotheepoisot.fr/2014/07/25/sir-abc/"/>
    <updated>2014-07-25T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;I am currently working with Approximate Bayesian Computation for a project. As always when learning a new method, I like to revisit examples i already know about, to see how it compares. So I decided to look at classical data about a flu epidemics in an English Boarding School. It’s a good dataset to estimate SIR parameters, because (1) Influenza transmits in a flu-like way, (2) boarding schools are a closed system from a demographic point of view, and (3) there was no mortality event during the epidemics. Also, it is likely that there was a single individual responsible for the epidemics at the beginning (but this is something I’ll look into).&lt;/p&gt;
&lt;p&gt;:x distribution of parameter values when there is no analytical expression of the likelihood function. Just to give a very short overview: knowing data (the number of cases every day), I want to estimate the parameters of the SIR model that represents the epidemics. The SIR model is a compartmental model, in which individuals start as susceptible, become infectious, then finally recover. Formally, it is expressed as a set of ordinary differential equations, &lt;span class=&quot;math&quot;&gt;\(\dot S = -\beta I S\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(\dot I = \beta I S - \nu I\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(\dot R = \nu I\)&lt;/span&gt;. There are two parameters of the model itself (the transmission rate &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt; and recovery rate &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt;), to which one should add the initial state &lt;span class=&quot;math&quot;&gt;\(S, I, R = {S_0, I_0, R_0}\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;There are a few noteworthy things about this model. First, at any time &lt;span class=&quot;math&quot;&gt;\(t\)&lt;/span&gt;, &lt;span class=&quot;math&quot;&gt;\(S_t+I_t+R_t=N\)&lt;/span&gt;, where &lt;span class=&quot;math&quot;&gt;\(N\)&lt;/span&gt; is the total population size – this assumes no demography, but this is a very reasonable assumption for diseases with a short course and low/no mortality. The other noteworthy things are not really relevant to what I’m about to do, so I’ll skip them. The important information is the value of &lt;span class=&quot;math&quot;&gt;\(R_0\)&lt;/span&gt;, which gives the expected number of infections from a single infected case in an otherwise entirely susceptible population. In the SIR model, &lt;span class=&quot;math&quot;&gt;\(R_0 = N\beta/\nu\)&lt;/span&gt;. The &lt;span class=&quot;math&quot;&gt;\(R_0\)&lt;/span&gt; of influenza viruses is usually in the &lt;span class=&quot;math&quot;&gt;\([1.3-1.9]\)&lt;/span&gt; range. Values of &lt;span class=&quot;math&quot;&gt;\(R_0 &amp;gt; 1\)&lt;/span&gt; imply that epidemic progression will likely happen.&lt;/p&gt;
&lt;p&gt;What I want to do is use ABC to estimate the distribution of &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt;, as well as &lt;span class=&quot;math&quot;&gt;\(I_0\)&lt;/span&gt;, and thus estimate the &lt;span class=&quot;math&quot;&gt;\(R_0\)&lt;/span&gt; of this particular epidemics. Here is the basic approach. I will first establish the prior distribution of my three parameters. I will assume that there are no way to guesstimate values of &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt;, so I will sample a uniform &lt;span class=&quot;math&quot;&gt;\([0;1]\)&lt;/span&gt; distribution for &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt;, and 10 to the power of random numbers in &lt;span class=&quot;math&quot;&gt;\([-4; 0]\)&lt;/span&gt; for &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt; (these are reasonable estimates in my experience). The only thing I know about &lt;span class=&quot;math&quot;&gt;\(I_0\)&lt;/span&gt; is that it is most likely 1, so I will use a Poisson distribution with &lt;span class=&quot;math&quot;&gt;\(\lambda = 1\)&lt;/span&gt; and add 1, which will make &lt;span class=&quot;math&quot;&gt;\(I_0 = 1\)&lt;/span&gt; and &lt;span class=&quot;math&quot;&gt;\(I_0 = 2\)&lt;/span&gt; equally likely.&lt;/p&gt;
&lt;p&gt;With these random parameters, I will simulate a SIR epidemics, and measure &lt;span class=&quot;math&quot;&gt;\(\rho(I_t,\hat I_t)\)&lt;/span&gt;, which is to say the distance between the empirical time series, and the simulated one. If this distance is lower than an arbitrary treshold &lt;span class=&quot;math&quot;&gt;\(\epsilon\)&lt;/span&gt;, I will keep the random set of parameters as &lt;em&gt;likely&lt;/em&gt; – by replicating this process enough times, I should hopefully end up with a posterior distribution of all three parameters.&lt;/p&gt;
&lt;p&gt;Oh, and also I will do this in &lt;code&gt;julia&lt;/code&gt;. Let’s go!&lt;/p&gt;
&lt;h1 id=&quot;writing-the-code&quot;&gt;Writing the code&lt;/h1&gt;
&lt;p&gt;First, let’s load a bunch of packages needed to do the processing and output:&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;using Distances
using Distributions
using DataFrames
using Gadfly&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once this is done, we need a function &lt;code&gt;sir&lt;/code&gt; to run the simulations. I will use an extremely simple one with Euler integration, because using a sophisticated numerical integration scheme is &lt;em&gt;not&lt;/em&gt; the point.&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; sir(N, I0, beta, nu, t)
   &lt;span class=&quot;co&quot;&gt;# SIR model&lt;/span&gt;
   &lt;span class=&quot;co&quot;&gt;# N     - total population size&lt;/span&gt;
   &lt;span class=&quot;co&quot;&gt;# I0    - number of infected cases at t = 0&lt;/span&gt;
   &lt;span class=&quot;co&quot;&gt;# beta  - transmission&lt;/span&gt;
   &lt;span class=&quot;co&quot;&gt;# nu    - recovery&lt;/span&gt;
   &lt;span class=&quot;co&quot;&gt;# t     - number of timesteps&lt;/span&gt;
   s = zeros(t)
   i = zeros(t)
   r = zeros(t)
   s[&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;] = N-I0
   i[&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;] = I0
   &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; step &lt;span class=&quot;kw&quot;&gt;in&lt;/span&gt; [&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:(t-&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;)]
      ds = -beta*s[step]*i[step]
      di =  beta*s[step]*i[step] - nu*i[step]
      dr =  nu*i[step]
      s[step+&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;] = s[step] + ds
      i[step+&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;] = i[step] + di
      r[step+&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;] = r[step] + dr
   &lt;span class=&quot;kw&quot;&gt;end&lt;/span&gt;
   &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (s, i, r)
&lt;span class=&quot;kw&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This function will return a tuple of time series, for the S, I, and R values. The next step is to define a bunch of arrays, parameters, etc etc.&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;number_samples = &lt;span class=&quot;fl&quot;&gt;10000&lt;/span&gt;

beta_prior = &lt;span class=&quot;fl&quot;&gt;10&lt;/span&gt;.^rand(Uniform(-&lt;span class=&quot;fl&quot;&gt;4&lt;/span&gt;, -&lt;span class=&quot;fl&quot;&gt;2&lt;/span&gt;), number_samples)
nu_prior   =     rand(Uniform(&lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;), number_samples)
i0_prior   =     rand(Poisson(&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;), number_samples).+&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;

param_N = &lt;span class=&quot;fl&quot;&gt;763&lt;/span&gt;   &lt;span class=&quot;co&quot;&gt;# We know the total number of students&lt;/span&gt;
param_t = &lt;span class=&quot;fl&quot;&gt;15&lt;/span&gt;    &lt;span class=&quot;co&quot;&gt;# The data cover 15 days&lt;/span&gt;
param_d = &lt;span class=&quot;fl&quot;&gt;200&lt;/span&gt;   &lt;span class=&quot;co&quot;&gt;# This is my arbitraty treshold, feel free  to experiment&lt;/span&gt;

beta_posterior = &lt;span class=&quot;dt&quot;&gt;Float64&lt;/span&gt;[]
nu_posterior = &lt;span class=&quot;dt&quot;&gt;Float64&lt;/span&gt;[]
i0_posterior = &lt;span class=&quot;dt&quot;&gt;Int64&lt;/span&gt;[]
fit_posterior = &lt;span class=&quot;dt&quot;&gt;Float64&lt;/span&gt;[]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, we can load the data which are stored in a file called &lt;code&gt;data.csv&lt;/code&gt;, &lt;a href=&quot;https://gist.github.com/9dd174a411b0ae5f0fa7&quot;&gt;available as a gist here&lt;/a&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;observed_cases = convert(&lt;span class=&quot;dt&quot;&gt;Array&lt;/span&gt;{&lt;span class=&quot;dt&quot;&gt;Float64&lt;/span&gt;}, readtable(&lt;span class=&quot;st&quot;&gt;&amp;quot;data.csv&amp;quot;&lt;/span&gt;,separator=&lt;span class=&quot;ch&quot;&gt;&amp;#39;;&amp;#39;&lt;/span&gt;, header=true)[:I])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And now, we need to loop through all sets of parameters, and measure the distance. Each iteration of this loop will run a simulation of the SIR model, then measure the Euclidean distance between the observed and simulated time series, and finally if this distance is lower than a treshold, consider that the parameter set can be kept:&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;&lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; run &lt;span class=&quot;kw&quot;&gt;in&lt;/span&gt; [&lt;span class=&quot;fl&quot;&gt;1&lt;/span&gt;:number_samples]
   simulated_timeseries = sir(
         param_N, 
         i0_prior[run],
         beta_prior[run],
         nu_prior[run],
         param_t)
   distance = evaluate(Euclidean(), observed_cases, simulated_timeseries[&lt;span class=&quot;fl&quot;&gt;2&lt;/span&gt;])
   &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; distance &amp;lt;= param_d
      push!(beta_posterior, beta_prior[run])
      push!(nu_posterior, nu_prior[run])
      push!(i0_posterior, i0_prior[run])
      push!(fit_posterior, distance)
   &lt;span class=&quot;kw&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To make plotting faster, we will wrap up the results in a &lt;code&gt;DataFrame&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;posteriors = DataFrame(beta = beta_posterior, nu = nu_posterior, i0 = i0_posterior)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;By the way, I ran the following figures with 10&lt;sup&gt;6&lt;/sup&gt; prior samples – in under 2 seconds.&lt;/p&gt;
&lt;h1 id=&quot;the-results&quot;&gt;The results&lt;/h1&gt;
&lt;p&gt;Because this dataset is well-known, there are estimates of the parameters using &lt;span class=&quot;math&quot;&gt;\(I_0 = 1\)&lt;/span&gt;. They are, respectively, &lt;span class=&quot;math&quot;&gt;\(\beta \approx 2.18\times 10^{-3}\)&lt;/span&gt;, and &lt;span class=&quot;math&quot;&gt;\(\nu \approx 4.41\times 10^{-1}\)&lt;/span&gt;. &lt;strong&gt;So&lt;/strong&gt;, what does the fitting says?&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;julia&amp;gt; mean(posteriors[:beta])
   &lt;span class=&quot;fl&quot;&gt;0.0023823647134406517&lt;/span&gt;

julia&amp;gt; mean(posteriors[:nu])
   &lt;span class=&quot;fl&quot;&gt;0.5571488709952898&lt;/span&gt;

julia&amp;gt; mean(posteriors[:i0])
   &lt;span class=&quot;fl&quot;&gt;2.8266301035953685&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;First, although &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt; estimated this way is quite close to the proposed estimate, the value of &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt; differs. Specifically, I predict an easier remission than the original estimation (the recovery time is &lt;span class=&quot;math&quot;&gt;\(1/\nu\)&lt;/span&gt; days, &lt;em&gt;i.e.&lt;/em&gt; 2.27 in the original model, and 1.7 in my estimate). Why? Simply because I decided not to trust the assumption that &lt;span class=&quot;math&quot;&gt;\(I_0 = 1\)&lt;/span&gt;. The original &lt;span class=&quot;math&quot;&gt;\(I_0\)&lt;/span&gt; is based on the fact that there was a single student admitted for flu-like symptoms on day 0, so it can be that by day 0, there were already infected (but asymptomatic) individuals. My estimation tends to predict that there were between two and three infected students.&lt;/p&gt;
&lt;p&gt;With this information, we can easily plot the predicted timecourse of the epidemics:&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;pred = sir(&lt;span class=&quot;fl&quot;&gt;763&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.00238&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;0.5571&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;15&lt;/span&gt;)
draw(
      PNG(&lt;span class=&quot;st&quot;&gt;&amp;quot;infected.png&amp;quot;&lt;/span&gt;, &lt;span class=&quot;fl&quot;&gt;12&lt;/span&gt;cm, &lt;span class=&quot;fl&quot;&gt;8&lt;/span&gt;cm),
      plot(
         layer(x=[&lt;span class=&quot;fl&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;fl&quot;&gt;14&lt;/span&gt;], y=pred[&lt;span class=&quot;fl&quot;&gt;2&lt;/span&gt;], Geom.point),
         layer(dat, x=&lt;span class=&quot;st&quot;&gt;&amp;quot;day&amp;quot;&lt;/span&gt;, y=&lt;span class=&quot;st&quot;&gt;&amp;quot;I&amp;quot;&lt;/span&gt;, Geom.line)
         )
    )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This yields the following figure:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/infected.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;The data are the continuous line, and the predictions are the dots. It’s not a perfect fit, but it reproduces the main features of the epidemics quite well. When compared to the original parameters, notably, it predicts the correct date at which no more cases are observed, but it slightly over-estimates the number of cases during the peak.&lt;/p&gt;
&lt;p&gt;We can also have a look at the distribution of &lt;span class=&quot;math&quot;&gt;\(\beta\)&lt;/span&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/dist_beta.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;and &lt;span class=&quot;math&quot;&gt;\(\nu\)&lt;/span&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/dist_nu.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;In both figures, the vertical lines indicate the previous estimations of the parameters. While they are well within the posterior distribution, it seems that (i) using a different method for fitting and (ii) estimating the value of &lt;span class=&quot;math&quot;&gt;\(I_0\)&lt;/span&gt; gives different estimates.&lt;/p&gt;
&lt;p&gt;Finally, what about the distribution of &lt;span class=&quot;math&quot;&gt;\(R_0\)&lt;/span&gt;? The original &lt;span class=&quot;math&quot;&gt;\(R0\)&lt;/span&gt; was estimated to 3.76. Using the result of the ABC, I found&lt;/p&gt;
&lt;pre class=&quot;sourceCode julia&quot;&gt;&lt;code class=&quot;sourceCode julia&quot;&gt;julia&amp;gt; mean(&lt;span class=&quot;fl&quot;&gt;763&lt;/span&gt;.*(posteriors[:beta]./posteriors[:nu]))
   &lt;span class=&quot;fl&quot;&gt;3.292957996735042&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which is not &lt;em&gt;all&lt;/em&gt; that different from the original prediction. Note that a consistent result is that the epidemic parameters estimated through ABC make the epidemic &lt;em&gt;less&lt;/em&gt; aggresive than the original one. The recovery rate is higher, the &lt;span class=&quot;math&quot;&gt;\(R_0\)&lt;/span&gt; is lower, but the transmission rate is higher.&lt;/p&gt;
&lt;h1 id=&quot;as-a-brief-wrap-up&quot;&gt;As a brief wrap-up…&lt;/h1&gt;
&lt;p&gt;I love &lt;code&gt;julia&lt;/code&gt;. I haven’t even thought about possible optimizations and it’s fast already. Also, it’s simple to write. Clearly sliced bread was the best thing until &lt;code&gt;julia&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ABC – at least as long as a simple rejection scheme is used – is not that hard. This gives me a bunch of ideas.&lt;/p&gt;
&lt;p&gt;I love epidemiology. For some reason, I just find it fascinating. This is the reason why I switched from immunology to parasitology to ecology. I love it.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Tracking changes in markdown</title>
     <link href="http://timotheepoisot.fr/2014/07/10/markdown-track-changes/"/>
    <updated>2014-07-10T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;Using &lt;code&gt;markdown&lt;/code&gt; to write papers is an insanely great experience, because it is a concise yet powerful markup language, that &lt;code&gt;pandoc&lt;/code&gt; can export to almost anything you like (and Word). Some journals, though, require that you upload a document with all changes highlighted in addition to the revised manuscript. As a reviewer, I find this helpful, but as an author, I’m always trying to find a way &lt;em&gt;not&lt;/em&gt; to do it because it is not really straightforward.&lt;/p&gt;
&lt;p&gt;Well, as it turns out, this is not true. I decided that it was time to stop being lazy, and I found a very simple way to get a good-looking marked copy with all changes.&lt;/p&gt;
&lt;p&gt;Here is my originally submitted manuscript, in a file called &lt;code&gt;orig.md&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode markdown&quot;&gt;&lt;code class=&quot;sourceCode markdown&quot;&gt;&lt;span class=&quot;fu&quot;&gt;# My cool project&lt;/span&gt;

This is a really cool paper written in &lt;span class=&quot;bn&quot;&gt;`markdown`&lt;/span&gt;. It has equations like
$(1-x)^\rho$ and, also some references to *really* cool papers [@fra92].

I hope it will be accepted!&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I can compile that using &lt;code&gt;pandoc&lt;/code&gt;, and get the PDF file that I send for review. The referees, being referees, required some changes, so I made the revisions in a file called &lt;code&gt;revised.md&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&quot;sourceCode markdown&quot;&gt;&lt;code class=&quot;sourceCode markdown&quot;&gt;&lt;span class=&quot;fu&quot;&gt;# My cool revised project&lt;/span&gt;

This is a really cool paper written in &lt;span class=&quot;bn&quot;&gt;`markdown`&lt;/span&gt;. It has equations like
$(1-x)^\alpha$ because $\rho$ was not a good parameter name. Also there are
some references to *really* cool papers [@fra92; and references therein].

I hope it will be accepted *now*!

&lt;span class=&quot;fu&quot;&gt;# References&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Producing the marked-up copy is relatively easy. The first step is to convert both documents to &lt;code&gt;latex&lt;/code&gt;, then use &lt;code&gt;latexdiff&lt;/code&gt;. This is best done with a simple &lt;code&gt;makefile&lt;/code&gt;, which I reproduce here:&lt;/p&gt;
&lt;pre class=&quot;sourceCode makefile&quot;&gt;&lt;code class=&quot;sourceCode makefile&quot;&gt;&lt;span class=&quot;dt&quot;&gt;OPTS&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt; --bibliography=/home/tp/.pandoc/default.json --csl=/home/tp/vrac/styles/ecology.csl --template=template.tex&lt;/span&gt;

&lt;span class=&quot;dv&quot;&gt;all:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt; orig.pdf revised.pdf diff.pdf&lt;/span&gt;

&lt;span class=&quot;dv&quot;&gt;orig.pdf:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt; orig.md&lt;/span&gt;
    pandoc &lt;span class=&quot;ch&quot;&gt;$&amp;lt;&lt;/span&gt; -o &lt;span class=&quot;ch&quot;&gt;$@&lt;/span&gt; &lt;span class=&quot;ch&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;OPTS&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;dv&quot;&gt;revised.pdf:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt; revised.md&lt;/span&gt;
    pandoc &lt;span class=&quot;ch&quot;&gt;$&amp;lt;&lt;/span&gt; -o &lt;span class=&quot;ch&quot;&gt;$@&lt;/span&gt; &lt;span class=&quot;ch&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;OPTS&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;dv&quot;&gt;diff.pdf:&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt; orig.md revised.md&lt;/span&gt;
    pandoc orig.md -o orig.tex &lt;span class=&quot;ch&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;OPTS&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;)&lt;/span&gt;
    pandoc revised.md -o revised.tex &lt;span class=&quot;ch&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;OPTS&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;)&lt;/span&gt;
    latexdiff orig.tex revised.tex &amp;gt; diff.tex
    pdflatex diff
    rm {revised,orig,diff}.tex&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;OPTS&lt;/code&gt; variable can be changed to whatever you like (and the whole file should be made nicer, but hey…), and once this is done, you just need to do &lt;code&gt;make diff.pdf&lt;/code&gt; in the directory where your two files (&lt;code&gt;orig.md&lt;/code&gt; and &lt;code&gt;revised.md&lt;/code&gt;) are. The resulting PDF file will look like this:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/md-diff.png&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;This is what I &lt;em&gt;really&lt;/em&gt; like with &lt;code&gt;markdown&lt;/code&gt; and &lt;code&gt;pandoc&lt;/code&gt; – you can have a whole &lt;code&gt;make&lt;/code&gt;-based production workflow. Which means that automating tasks is easy, and once you spend 10 minutes figuring out a solution once, it will take you &lt;em&gt;seconds&lt;/em&gt; to apply it every time the situation arises. If we compiled all of the dirty little hacks like this one in a single &lt;code&gt;makefile&lt;/code&gt; specifically to make editing with &lt;code&gt;markdown&lt;/code&gt; easier, we could have a really good do-it-yourself manuscript preparation system. Just sayin’…!&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>The costs of Open Science</title>
     <link href="http://timotheepoisot.fr/2014/07/05/costs-open-science/"/>
    <updated>2014-07-05T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;Over the last year, I have had &lt;em&gt;a lot&lt;/em&gt; of discussions about upsides, downsides, and other directionless-sides (assuming there are such things) of open science. I talked about the upsides many times (and I will keep on doing it), but it would not be really honest not to mention the potential disadvantages and risks of adopting new practices: publishing in new journals, using preprints in a field where it is not the norm, open peer-review, publishing raw datasets, … So, roll yourself in your favorite blanket, and brace yourself for the impending wave of negativity (also a &lt;em&gt;Jurassic Park&lt;/em&gt; quote somewhere to keep you on the edge).&lt;/p&gt;
&lt;p&gt;Most of the risks come from the fact that these practices are, to a certain extent, &lt;em&gt;new&lt;/em&gt;,&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; and science is historically well attached to its “rules and standards” &lt;span class=&quot;citation&quot; data-cites=&quot;kuh70&quot;&gt;(Kuhn 1970 chap. 2)&lt;/span&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Because [the new scientist] there joins men who learned the bases of their field from the same concrete models, his subsequent practice will seldom evoke overt disagreement over fundamentals. &lt;strong&gt;Men whose research is based on shared paradigms are committed to the same rules and standards for scientific practice&lt;/strong&gt;. That commitment and the apparent consensus it produces are prerequisites for normal science, &lt;em&gt;i.e.&lt;/em&gt;, for the genesis and continuation of a particular research tradition.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Keeping the same core of (currently) common practices, in this perspective, is a matter of self-preservation (and it is amusing to note that in Kuhn’s view, at least as it is expressed in this paragraph, there is little chance that &lt;em&gt;established&lt;/em&gt; scientists will be the source of change – my own observations don’t support that, but this is 45 years after this paragraph was written). Deviation from these practices carries a two-fold risk of either excluding yourself from the boy’s club (I’m most likely reading too much into it, but I always found Kuhn’s use of &lt;em&gt;men&lt;/em&gt; instead of &lt;em&gt;scientists&lt;/em&gt; meaningful), or being viewed as opposed to the “continuation” of your field.&lt;/p&gt;
&lt;p&gt;Falling exactly in line with this argument, most of the objections to open science that I have received, were about the need to preserve either oneself or the field as a whole. Preprints are bad because they will facilitate the spread of (and legitimate) bad or biased science. Open reviews are bad because people will hold grudges against you. Publishing in new journals is bad because – whether we like it or not – the journals you publish in are still used as a measure of your worth, and the name of a journal is most likely a “green-beard trait”.&lt;/p&gt;
&lt;p&gt;All of these potential costs are real (although I think that the benefits, both collective and individuals, far outweigh them), and so it should be expected that open science would hurt early-career scientists the most. This attitude is exemplified by the recent decision of &lt;em&gt;Ecology Letters&lt;/em&gt; not to allow preprinted papers to be submitted &lt;a href=&quot;http://jabberwocky.weecology.org/2014/06/30/why-the-ecology-letters-editorial-board-should-reconsider-its-no-vote-on-preprints-2/&quot;&gt;so as to protect early career people from themselves&lt;/a&gt; (although they should be given credit for at least discussing the situation). Yet as far as I can tell, the opposite is happening: those of us with supposedly the most to lose are also spending the most time and energy experimenting, advocating, and generally having tons of fun trying to make ourselves at home.&lt;/p&gt;
&lt;p&gt;And this is a side of the discussion that is (I think) often overlooked. It’s about settling into a new home, and shuffling the furniture around a bit to see if we can make it more to our liking. It’s not about tearing down the house to build a hippie commune. And it’s certainly not about shifting the system towards practices that would allow us to be sloppy and generally unprofessional. Most of the calls for openness in science are emphasizing accountability and transparency; I really am convinced that in an entirely open system, it is virtually impossible to cut corners (tho in the immortal words of Dr. Ian Malcolm, “Life finds a way”). In short, deciding whether or not it’s worth bearing whatever (real of perceived) costs of open science is worth it is about deciding whether or not we trust that the system is currently at its global optimum, and whether or not less seasoned scientists also have a saying in shaping the system they will practice their science in.&lt;/p&gt;
&lt;p&gt;Marie Curie is quoted as saying “Nothing in life is to be feared, it is only to be understood; now is the time to understand more, so that we may fear less.”. This captures my feelings about all of the above particularly well. I think it’s important not to overlook the fact that some of the people the most able to bear the “costs” of these practices are also (sometimes) opposed to them for fear of said costs. But without seriously considering these practices, that is by not seeing them as marginal anymore, it’s difficult to say whether or not these costs exist at all, and whether they will erode over time because we will also better understand and measure the benefits.&lt;/p&gt;
&lt;p&gt;I would hate that you think that I am reducing the issue to a generation-gap thing, which I don’t believe it is. But it’s true that those of us with less reputation attached to our name should be the most fearful of any new practice that would supposedly attract any cost, because it would hit us proportionally harder than it would hit someone with a number of publications in the triple digits. Nor am I expecting that everything will change overnight. But without being really engaged in some experimentation, I don’t think we will ever be able to correctly assess the costs and the benefits.&lt;/p&gt;
&lt;p&gt;As a final note – I could write a text twice as long about all of the good things that happened to me as a consequence of being open. I’ve heard the argument that some of the costs may be expressed years after the fact. I really don’t think this is a particularity of either the new or old ways of doing things. And I understand that all of us have different experiences. But from what I have heard of people trying new things, the result was “mostly good”.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;
&lt;p&gt;Kuhn, T. S. 1970. The structure of scientific revolutions. - Chicago and London in press.&lt;/p&gt;
&lt;/div&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;I don’t really think that any of these practices are inherently new. They are certainly variations around the way things are done currently, but they appeared through mutation rather than being invasions.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  
  <entry>
     <title>Preprints, and the issue of (misplaced) trust</title>
     <link href="http://timotheepoisot.fr/2014/06/28/preprints-trust/"/>
    <updated>2014-06-28T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;Yesterday, a bunch of people (and I) were discussing what type of contributions to list in your CV when you are looking for a job. Papers that are in press, and accepted clearly belong here, but the discussion revolved around preprints quite fast. I suggested to include them, and I got generally negative feedback:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;
&lt;a href=&quot;https://twitter.com/tpoi&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tpoi&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;tpoi&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/ProfLikeSubst&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;ProfLikeSubst&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;ProfLikeSubst&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/GenomeDaddy&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;GenomeDaddy&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;GenomeDaddy&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/a&gt; if you have an acceptance letter from an editor, sure put it on there. otherwise, no. &lt;a href=&quot;https://twitter.com/hashtag/inmyworld?src=hash&quot;&gt;#inmyworld&lt;/a&gt;
&lt;/p&gt;
— Hope Jahren (&lt;span class=&quot;citation&quot; data-cites=&quot;HopeJahren&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;HopeJahren&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/HopeJahren/statuses/482608451319644163&quot;&gt;June 27, 2014&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;Most of the discussion that followed was about the fact that, unless something is published in a peer-reviewed journal, it’s moot and should not be accounted for. There are two assumptions behind that, and both of them are wrong. First, that you should not trust anything unless it is peer-reviewed. Second, that the peer-review process is the only thing standing between us and bad science.&lt;/p&gt;
&lt;p&gt;As I suggested later in the discussion, people that don’t trust the results in a preprint should leave the room during talks based on unpublished results. These have not been peer-reviewed, either. I half-suspect that the fact that (in biological sciences) conferences are a more established medium for the presentation of new scientific results than preprints (despite being arguably worse for that), people are more willing to trust 12 minutes of un-reviewed talk than 12 pages of an un-reviewed paper by the same person. Let’s file that under “inertia”, and let’s get back to the issue of conditionning whether or not we trust a paper on its position in the editorial pipeline.&lt;/p&gt;
&lt;p&gt;Assuming that published papers can be trusted is making the hypothesis that peer-review is good at catching bad papers. Additionally, some people raised the argument that the more &lt;em&gt;reputable&lt;/em&gt; the journal (read: high impact factor), the more confident we can be in the paper. That is not true &lt;span class=&quot;citation&quot; data-cites=&quot;bre13&quot;&gt;(Brembs and Munafò 2013)&lt;/span&gt;. It is a well established fact that high-impact journals tend to have a higher retraction rate than low-impact journals. The very places where some expect to see the most outsanding review process are involved in a “scandal” every month or so, these days (arsenic DNA, stem cells, and the track record goes back all the way to the memory of water). But even without considering the &lt;em&gt;prestige&lt;/em&gt; of a journal, there is this thing with absolute statements (&lt;em&gt;Peer-reviewed papers count for something&lt;/em&gt;): a counter-example is enough to make them moot. There have been counter-examples enough that, although a peer-reviewed paper &lt;em&gt;may be&lt;/em&gt; trusted, you still have to find out for yourself (by reading it).&lt;/p&gt;
&lt;p&gt;And if the way to know if something, anything, is a good piece of scientific litterature is to read it, then what is the difference between reading a pre-print and a reviewed paper? As I said a few times, it’s not that I don’t trust the peer-review process, it’s that I trust my own critical sense more. I’m not going to blindly trust a paper because it has been stamped as good by a journal and two to five people I don’t know, and I’m not going to distrust a paper because it has not been through the same process. Neglecting the results of my colleagues, or blindly trusting them because I expect others to do the critical thinking for me, are I think equally irresponsible. But Karthik said it best:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;
&lt;a href=&quot;https://twitter.com/tpoi&quot;&gt;&lt;span class=&quot;citation&quot; data-cites=&quot;tpoi&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;tpoi&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/a&gt; I&#39;ll consider it word of god as soon as two busy reviewers have given it a cursory glance and a 3rd has been a total jerk about it.
&lt;/p&gt;
— Karthik Ram (&lt;span class=&quot;citation&quot; data-cites=&quot;_inundata&quot;&gt;(&lt;span class=&quot;citeproc-not-found&quot; data-reference-id=&quot;_inundata&quot;&gt;&lt;strong&gt;???&lt;/strong&gt;&lt;/span&gt;)&lt;/span&gt;) &lt;a href=&quot;https://twitter.com/_inundata/statuses/482629845348651008&quot;&gt;June 27, 2014&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;Of course &lt;em&gt;most&lt;/em&gt; of the idea is that peer-review is a filter between us and bad science. I don’t know how many papers I have reviewed in the last 4 years, I would be tempted to say about 25+ (not counting the one I reviewed multiple times). There are two of these I found terrible. Of these two terrible papers, &lt;em&gt;one&lt;/em&gt; was “wrong”, not even in the sense that they got the bases wrong, but it was just severely incomplete. And so you don’t start thinking that I’m a really nice referee that is always happy about everythinAnd so you don’t start thinking that I’m a really nice referee that is always happy about everything: I’m not; there are (I think) two instances where I recommended something good and the paper ended up being rejected. But even though, my own experience places the probability of a paper being terrible at approximately 0.04. I’m happy to take that chance if it means that I’ll be reading the cool stuff a year or so before it makes it through the review process.&lt;/p&gt;
&lt;p&gt;But more broadly, there is a very disturbing thing behind the idea that peer-review is such an essential filter: authors can’t be trusted, and only referees are to thank for such great science being published (and also for making us spend another round in review to jump through many many hoops to satisfy their own personal biases as they yield a ridiculous amount of power). In addition, people using preprints are in the “whackadoodles” in the eyes of some, as opposed to people that took the time to formulate a strong case for preprints, and got it published in a &lt;em&gt;reputable&lt;/em&gt; journal &lt;span class=&quot;citation&quot; data-cites=&quot;des13&quot;&gt;(Desjardins-Proulx et al. 2013)&lt;/span&gt; – which, for the record, do not mean you should blindly trust us. But express your disagreement with an argumentation, not with a “That’s the way it is” or a cheap insult.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;
&lt;p&gt;Brembs, B. and Munafò, M. 2013. Deep Impact: Unintended consequences of journal rank. - arXiv in press.&lt;/p&gt;
&lt;p&gt;Desjardins-Proulx, P. et al. 2013. The Case for Open Preprints in Biology. - PLoS Biol 11: e1001563.&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Open Scientific Software License</title>
     <link href="http://timotheepoisot.fr/2014/06/05/ossl/"/>
    <updated>2014-06-05T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;I have been doing a bunch of reading on software licenses, because the question of which one to pick popped up in two projects I currently work on. There are tools like GitHub’s &lt;em&gt;&lt;a href=&quot;http://choosealicense.com/&quot;&gt;choose a license&lt;/a&gt;&lt;/em&gt;, that compare a fairly good selection of FOSS (Free and Open Source Software) licenses. And you can find a lot of (good) advice around the internet that will advise you to pick a license for your code. See &lt;em&gt;e.g.&lt;/em&gt; &lt;a href=&quot;http://www.software.ac.uk/resources/guides/choosing-open-source-licence&quot;&gt;sofwtare.ac.uk&lt;/a&gt;, a paper by &lt;a href=&quot;http://www.ploscompbiol.org/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002598&quot;&gt;Andrew Morin and colleagues&lt;/a&gt;, and more &lt;a href=&quot;http://www.astrobetter.com/the-whys-and-hows-of-licensing-scientific-code/&quot;&gt;tutorial like documents&lt;/a&gt;. If you read all of that (and if you produce code, I think you should), you’ll most likely agree that licensing your work is important.&lt;/p&gt;
&lt;p&gt;Yet &lt;a href=&quot;http://matt.might.net/articles/crapl/&quot;&gt;as Matt Might points out&lt;/a&gt;, FOSS licenses tailored specifically for academic use should have other requirements besides no liability and ensuring sharing of modified code. I spend a sometimes significant amount of my time writing code to perform various analyzes, or to reproduce results. I think that this is a research output equally important to publishing the paper (in that I see very little value in a great methodological paper with no code attached, for starters); which means that I think it should be credited somehow.&lt;/p&gt;
&lt;p&gt;One thing I have noticed in various discussions over the last few months is that the fact that (good) software is hard to produce completely eludes some people. This is perfectly understandable. In part, because we (as computer users) are &lt;a href=&quot;http://linux.oneandoneis2.org/LNW.htm&quot;&gt;demanding software working intuitively out of the box&lt;/a&gt;. As a result, most mainstream operating systems (and I’m including several Linux distributions in that) are focusing on &lt;em&gt;user-friendliness&lt;/em&gt;, so that even complex things &lt;em&gt;appear&lt;/em&gt; really simple. Given that, really, how hard can programming a &lt;code&gt;R&lt;/code&gt; package that doesn’t even have a GUI be? Software is a given right, and (I have checked some of my papers and I must plead guilty to that too) citing some of the software that made a paper possible is still not automatic. And to really drive the point home: if someone publishes a paper using package &lt;code&gt;xyz&lt;/code&gt;, without citing the paper describing &lt;code&gt;xyz&lt;/code&gt; (or the software itself should there be no paper to cite), that person get credit while the software creator does not.&lt;/p&gt;
&lt;p&gt;Even the very concept of a software license is focused on people with some computing experience. It tells things about the use of the code, in the sense that it tells you whether you can make money with it (not with the output), whether you can modify the code, and if so, which future licenses are acceptable. In short, the licensing issue is definitely an important one in science, but it does not speaks to the end users. Now before you preemptively burn be at the stake before I propose &lt;a href=&quot;http://xkcd.com/501/&quot;&gt;EULAs&lt;/a&gt; for all scientific software, hear me out. On a daily basis, what you do with my code matters to me far less than whether I get credit for having produced the code in the first place, especially when this code is actually used. I would be happy to release 90% of everything I write using the &lt;a href=&quot;http://www.wtfpl.net/about/&quot;&gt;WTFPL&lt;/a&gt; (just to see if I can managed to spell it out in a paper, mostly). So I think we need &lt;em&gt;some sort&lt;/em&gt; of license between the creator of the software and the users.&lt;/p&gt;
&lt;p&gt;An additional complication (or nuance, rather) is that thanks to increased computer literacy, a lot of people will be able to either add to, or modify your software for their own needs. In a sense, software users will contribute to the improvement of it, &lt;em&gt;as long as they give back&lt;/em&gt; their modifications. It may not seem like a lot, but a function to read and convert a specific type of file to use with a particular package &lt;em&gt;is&lt;/em&gt; a potentially worthwhile addition to it. In this hypothetical scenario, if the “new” format is used by a lot of people in the field, then this can even improve the adoption of the software. So where to go from here? An ideal license for scientific software would (i) ensure that the creator gets credit for its work, (ii) facilitates the improvement of the software through community contributions, and (iii) build on existing FOSS licenses.&lt;/p&gt;
&lt;p&gt;I think the modular design of the &lt;em&gt;Creative Commons&lt;/em&gt; licenses is a good inspiration. Basically, we could write an OSSL (Open Scientific Software License) with the four following clauses (purely as an intellectual exercise). Each people would then be free to use any combination (or all) of the clauses in their particular releases. Ideally, the software would be released under two different licenses. One of the mainstream FOSS ones for general code re-use, and the OSSL for use in research.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Open Scientific Software License (OSSL) 0.0.1

This document presents the conditions for the use of, and contribution to,
&amp;quot;XXXX&amp;quot;, hereafter &amp;quot;the software&amp;quot;, by you, hereafter &amp;quot;the user&amp;quot;.

[insert usual warning about no liability]

(AU) AUTHORSHIP -- Developpers of the software do not make any claim to
authorship on projects using the software unless
   
   (1) explicitely invited by the user
   (2) the user requests the software to be altered in any significant
       way for the purpose of a project, in which case authorship for this
       particular project must be negociated between the user and the creator

(CR) CREDIT -- Any scientific production appearing in print (excluding posters
and talks, including electronic only content) using the software must cite
the following item[s]:

   Ref. to the paper or the software itself
   You are expected to keep it relatively short

(DI) DISTRIBUTION -- Outside of academic/research projects, this code is
dual-licensed under the terms XXX license, a copy of which is attached to
this project under the COPYING file.

(EN) ENHANCEMENT -- If the software is modified, expanded, or improved during
the realisation of a study, the person in charge of the modifications is
required to propose them for merging when the results obtained with the
modified software are first published, or earlier.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you use code released under the &lt;code&gt;OSSL/AU-CR&lt;/code&gt;, for example, you can use the code and modify it without proposing your modifications for merging, and your only requirement is to cite it. The &lt;code&gt;AU&lt;/code&gt; clause is (in my opinion) important because it makes the conditions for authorship clear: if you don’t interact in any way with the software creator, then (of course) he or she should not be asking for authorship. But if you ask whether or not the creator could introduce a new functionality, or alter the functioning of the program in any way, then it’s fair to discuss whether or not this qualifies for authorship (I argue that it does; I’ve had a very good experience recently of inviting a co-author to help us figure out his package, and he made excellent contributions to the paper).&lt;/p&gt;
&lt;p&gt;So in short (that was not short at all!), this is the current state of my thinking about finding a way to license (open) scientific software that would respect the right of software creators to get credit for their work. Whether or not I’ll add this as a license for my own projects is something I have not decided yet. That will depend in part of the feedback I get…&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>A contribution policy for open manuscripts</title>
     <link href="http://timotheepoisot.fr/2014/05/02/contribution-policy-open-ms/"/>
    <updated>2014-05-02T00:00:00+12:00</updated>
    <content type="html">&lt;p&gt;A few months ago, lab-mate and PhD candidate extraordinaire Philippe Desjardins-Proulx proposed &lt;a href=&quot;http://phdp.github.io/posts/2013-07-22-scriptopia.html&quot;&gt;scriptoria&lt;/a&gt;, a system to track manuscripts that are being developed on &lt;em&gt;GitHub&lt;/em&gt; (and other version control systems). It’s a cool project, because it will allow everyone to access in progress manuscripts, and allow people to give feedback &lt;em&gt;before&lt;/em&gt; the papers reach the referees. In the true spirit of open source software collaborative development, it will also allow anyone to find projects (manuscripts) in which one can make a valid contribution, fork them, and contribute.&lt;/p&gt;
&lt;p&gt;The thing is, not anyone is OK with people proposing changes to their manuscript. And because &lt;code&gt;scriptoria&lt;/code&gt; will rely on a set of meta-data, it is time to start thinking about how we can encode our willingness to see others contribute to our work. If you find an in-progress manuscript you might be able to contribute to, before you put any substantial effort in it, this will tell you the chance that the authors will accept your contribution.&lt;/p&gt;
&lt;p&gt;This scale will serve as a primitive social contract between the authors and other potential contributors. It will tell whether modifications are accepted, and how the authors will react if modifications are submitted and accepted. Note that in all cases, authors are entirely free to reject contributions they don’t like. Which brings me to the most central point about how to contribute to an open manuscript: &lt;strong&gt;do not fork it to write a slightly different paper&lt;/strong&gt;. Seriously, that’s just bad form. And seeing that we are dealing with text, it’s straight up plagiarism. Be a good sport, and if your contribution is rejected, raise the issue (eventually) in a post-publication forum.&lt;/p&gt;
&lt;p&gt;Anyways. What I envision is a linear scale, ranging from &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;3&lt;/code&gt;, with higher values indicating a less and less open attitude. Here is a brief summary of the different levels.&lt;/p&gt;
&lt;p&gt;The first degree (which I think should &lt;em&gt;not&lt;/em&gt; be the default) is &lt;code&gt;0&lt;/code&gt;. All contributions are welcome, and any substantial &lt;em&gt;addition&lt;/em&gt; to the paper (text, analysis, figure) which is accepted will result in co-authorship. This is my personal default, but I appreciate that not everyone is comfortable working this way.&lt;/p&gt;
&lt;p&gt;The second degree (&lt;code&gt;1&lt;/code&gt;) is what I think should be the default. Contributions are welcome &lt;em&gt;after consultation with the authors&lt;/em&gt;. This can take the form of opening an issue. State the change you would like to make, how you plan to make it, and if you have in principle approval, go ahead with your contribution (fork the repository, then make a pull request). With this mode of contributions, authors retain a lot of control on their paper.&lt;/p&gt;
&lt;p&gt;The next degree (&lt;code&gt;2&lt;/code&gt;) is where authors only welcome &lt;em&gt;minor&lt;/em&gt; contributions. Typically, you will not claim co-authorship, because the authors will only accept small changes (typos, suggestions of better references, ways to make a paragraph clearer). Most of that can be done in Issues, rather than by forking the project. If you are writing a “Forum” or similar type of paper, or if you know excatly what you want to do with your results and are not open to changes, then this level of openness is good. You will still encourage users to help on the manuscript, just not in any major way.&lt;/p&gt;
&lt;p&gt;The final degree (&lt;code&gt;3&lt;/code&gt;) is &lt;em&gt;Keep Off!&lt;/em&gt;. The authors want their manuscript to be online for a variety of reasons (transparency, accountability, early exposure), but they are not welcome to contributions. This is a valid position. Consider that any manuscript with this level of openness is &lt;em&gt;read-only&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;There you have it. I don’t know whether these suggestions will be in the released version of &lt;code&gt;scriptoria&lt;/code&gt;, but I think these are issues we should be adressing now. The “tradition” for open-source projects is to have a file called &lt;code&gt;CONTRIBUTING&lt;/code&gt; at the root of the project, in which the ways of suggesting changes and the “culture” of contribution for a particular project are outlined. Manuscripts are (hopefully) going to be shorter lived than most open source software (once the paper is accepted, the repository is only useful as an archive), so we can go for a simpler system. But being upfront about whether contributions are welcome is important, and so a standardized way of saying it would only help.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Don't be afraid of Open Access</title>
     <link href="http://timotheepoisot.fr/2014/03/24/open-access-impact/"/>
    <updated>2014-03-24T00:00:00+13:00</updated>
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;This post is a copy of a response &lt;a href=&quot;http://nature.berkeley.edu/~kram/&quot;&gt;Karthik Ram&lt;/a&gt; and I wrote to a recent paper in &lt;em&gt;Trends in Plant Science&lt;/em&gt;, criticizing Open Access as being risky, especially to early career people. &lt;a href=&quot;http://www.cell.com/trends/plant-science/fulltext/S1360-1385%2814%2900060-0&quot;&gt;Stephen Curry&lt;/a&gt; wrote a great reply. Our paper never made it past the editor, so I reproduce it here.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In a recent Letter, Agrawal (2014) raises four points for which scientists should be skeptical of the Open Access (OA) movement, two of which we think are particularly mis-leading.&lt;span class=&quot;margin&quot;&gt;Agrawal (2014) &lt;em&gt;Trends in Plant Science&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1016/j.tplants.2014.01.005&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt; First, that the impact factor of OA journals is not higher than the impact factor of non-OA journals. Secondly, that it is tempting to use a journals impact factor as a proxy for the quality of a paper, and therefore, high quaility research published in a less prestigious OA journals runs the risk of being perceived less favorably.&lt;/p&gt;
&lt;p&gt;First, the strong distinction beween OA and non OA journals is a false dichotomy. OA is a mode of diffusion of scientific literature in which the authors, or its home institution, buys back the rights of an article to the publisher, so that the article is free to access. Although some journals apply an OA licences to their entire content, an increasing number of publishers are adopting &lt;em&gt;per&lt;/em&gt; article OA options. Even though, the notion that pure-OA journals have a lower impact is challenged by some. James Pringle of Thomson ISI (i) recognizes that the relevance of journals when talking about OA is dubious and (ii) &lt;a href=&quot;http://www.nature.com/nature/focus/accessdebate/19.html&quot;&gt;“prospective authors should not fear publishing in these journals”&lt;/a&gt;. In addition, there are numerous studies showing a clear &lt;a href=&quot;http://www.istl.org/10-winter/article2.html&quot;&gt;&lt;em&gt;Open Access citation advantage&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Second, the fact that OA journals carry less prestige is not a problem with the OA movement. Measures of journal impact are known to be extremely biased by a few papers concentrating a few citations, and cannot possibly be used to estimate the quality of a paper, let alone its &lt;em&gt;likely impact&lt;/em&gt;. Simply put, the impact factor of a journal is not the expected number of citations a single paper will receive. If rigor is important to us, then it is not acceptable to think that a paper is bad because it was published in a less established journal, or that a paper is good because it was published in a highly selective journal; the same paper is just as good, and should be just as impactful, whether published in &lt;em&gt;PLoS One&lt;/em&gt; or &lt;em&gt;Nature&lt;/em&gt;. &lt;span class=&quot;margin&quot;&gt;Fenner (2013) &lt;em&gt;PLoS Biology&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1371/journal.pbio.1001687&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt; This point strikes us as a demonstration that the metrics used for evaluations are biased. The recent years say the development of &lt;em&gt;article-level&lt;/em&gt; metrics (Fenner, 2013), which provides a way to measure the impact of an article regardless of what journal it appeared in. We think that rather than pushing against the OA model, we should have a discussion about how these measures can be used to objectively evaluate research output.&lt;/p&gt;
&lt;p&gt;Agrawal concludes his paper on the need to find &lt;em&gt;an alternative model of publishing that suits the primary goals of scientists&lt;/em&gt;. We would like to make the point that, particularly in ecology and environmental sciences, the primary goal of research should be to produce fundamental insights that can be mobilized to solve large scale problems. Making information flow freely between scientists, policy-makers, and stakeholders is paramount to this effort. What does not strikes us as a &lt;em&gt;primary&lt;/em&gt; goal, is the maximization of self-aggrandizing, not to mention arbitrary, measures of impact.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Teaching isoclines in the two-species competitive logistic model</title>
     <link href="http://timotheepoisot.fr/2014/03/18/teaching-isoclines/"/>
    <updated>2014-03-18T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I’ve had a great discussion by email with &lt;a href=&quot;http://www.crystalernst.com/&quot;&gt;Crystal Ernst&lt;/a&gt;, about the best way to teach isoclines and phase portraits to undergraduates. I had this discussion countless times over the last two years, and I struggled when I had to teach that myself. I ended up finding a little twist on the classical diagrams, and so I decided that it was time to share it.&lt;/p&gt;
&lt;p&gt;Isoclines are usually first introduced when discussing the logistic model with competition between two species, or&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\dot N_1 = N_1 r_1 \left(1 - \frac{\alpha_{11}N_1+\alpha_{12}N_2}{K_1} \right)
&lt;/script&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\dot N_2 = N_2 r_2 \left(1 - \frac{\alpha_{22}N_2+\alpha_{21}N_1}{K_2} \right)
&lt;/script&gt;

&lt;p&gt;It’s an important model, as we can use it as a gateway to talk about coexistence, local stability, and ecosystem functioning. It is also a perfect transition between the empirical side of ecology with Gauses’s experiments, and the more theoretical side of it. I &lt;em&gt;love&lt;/em&gt; this model, especially for teaching.&lt;/p&gt;
There are a number of intersting things to explain to students when introducing this model. First, each species
&lt;script type=&quot;math/tex&quot;&gt; n &lt;/script&gt; 
perceives its environment as a “box” with
&lt;script type=&quot;math/tex&quot;&gt; K_n &lt;/script&gt; 
compartments. Left to their own devices, each “individual” (or units of biomass) will “fill”
&lt;script type=&quot;math/tex&quot;&gt;\alpha_{nn}&lt;/script&gt;
compartments, which usually equates unity for a single species model. The growth of the population is therefore a quest for free compartments to fill, and when most of the box is filled, the effective growth rate decreases. When all compartments are filled (
&lt;script type=&quot;math/tex&quot;&gt;N_n = K_n&lt;/script&gt;
&lt;p&gt;), then the growth rate is 0, and the population is at equilibrium. Cue a discussion on the mechanisms that would allow us to represent the environment as a box with compartments (space requirements, having enough to eat, foraging area, and whatever else you can think of).&lt;/p&gt;
The point with introducing a second species is that there are now two types of organisms to share the same “box”. And individuals from species
&lt;script type=&quot;math/tex&quot;&gt;p&lt;/script&gt; 
are &lt;em&gt;perceived&lt;/em&gt; by those of species
&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;
as taking up
&lt;script type=&quot;math/tex&quot;&gt;\alpha_{np}&lt;/script&gt; 
compartments. The opposite is true, and we can define values for the intensity of &lt;em&gt;intra&lt;/em&gt; and &lt;em&gt;inter&lt;/em&gt; specific competition. The question is, then, what are the combinations of values of
&lt;script type=&quot;math/tex&quot;&gt;\mathbf{\alpha}&lt;/script&gt; 
&lt;p&gt;that allows coexistence, competitive exclusion, or make the system sensitive to initial conditions?&lt;/p&gt;
&lt;p&gt;It’s at this point that I usually introduce the notion of &lt;em&gt;equilibrium&lt;/em&gt;, &lt;em&gt;i.e.&lt;/em&gt; a state of the system in which the two populations &lt;em&gt;stop growing&lt;/em&gt;. The calculus-based solution is to find values of the population densities that make the two derivatives null at the same time. When you are a facing a class of undergrads that are not especially enamored with mathematics (&lt;a href=&quot;https://peerj.com/articles/285/&quot;&gt;potentially a large part of the population&lt;/a&gt;), this approach is not likely to get them excited. Which is partly why we usually use &lt;em&gt;isoclines&lt;/em&gt; and &lt;em&gt;phase portraits&lt;/em&gt; to explain how different combinations of intra/inter specific competition strenghts affect the potential for coexistence.&lt;/p&gt;
&lt;p&gt;The problem is, &lt;strong&gt;explaining how isoclines work is awful&lt;/strong&gt;. I know many people that are able to predict a &lt;em&gt;lot&lt;/em&gt; of things just by drawing a bunch of lines on a whiteboard. Did I say many? Well if the discussions I had with people are to be believe, these are actually the happy few. The rest of us are left scratching our head in front a cryptic diagram that makes absolutly no sense. I blame the difficulty to read isoclines as the single reason for which adaptive dynamics is frwoned upon by many people (that, and the fact that any method involving third order derivatives is rapidly messy).&lt;/p&gt;
&lt;p&gt;So here is my solution: &lt;strong&gt;use vector fields&lt;/strong&gt;. With a vector field, it’s virtually impossible to screw up the explanation, because all you have to do is (i) put your finger somewhere on the diagram and (ii) follow the arows until the equilibrium that the system would eventually reach. Want to know how a perturbation affects this equilibrium? Just jiggle your finger a bit, and go back to step (i). Did you ended up at the same point? Congratulations, that’s local stability.&lt;/p&gt;
OK, so what’s a vector field? The phase portrait of the system is defined by two axes, one for the density of species &lt;em&gt;1&lt;/em&gt;, the other for the density of species &lt;em&gt;2&lt;/em&gt;. The isoclines are the lines going trough the two equilibria for species &lt;em&gt;1&lt;/em&gt; (
&lt;script type=&quot;math/tex&quot;&gt;N_1 = (0; N^\star_1)&lt;/script&gt;
), and trough the two equilibria for species &lt;em&gt;2&lt;/em&gt; (
&lt;script type=&quot;math/tex&quot;&gt;N_2 = (0; N^\star_2)&lt;/script&gt;
&lt;p&gt;). When you are &lt;em&gt;above&lt;/em&gt; (axis-wise) your isocline, you converge back to it, and where you are &lt;em&gt;below&lt;/em&gt; your isocline, well, the same thing happens but in the other direction. At the intersection of the two isoclines is the &lt;em&gt;two-species equilibrium&lt;/em&gt;, whose stability and accessibility tells whether coexistence is possible or not.&lt;/p&gt;
The important thing to keep in mind is that both species will push the system in (possibly) different directions at the same time. So there can be some funky behavior happening, and species can cross their isoclines (this happens in the predator-prey Lotka-Volterra model, among many others). So what matters is the &lt;em&gt;combined&lt;/em&gt; changed in the system, which we can model through the addition of two vectors in the
&lt;script type=&quot;math/tex&quot;&gt;N_1,N_2&lt;/script&gt; 
plane. The first vector (which describes the amount of change in the &lt;em&gt;vertical&lt;/em&gt; direction is
&lt;script type=&quot;math/tex&quot;&gt;\vec{N_2}&lt;/script&gt;
. The norm of this vector is simply
&lt;script type=&quot;math/tex&quot;&gt;\frac{d}{dt}N_2&lt;/script&gt;
. The second vector, in the &lt;em&gt;horizontal&lt;/em&gt; direction, is similarly
&lt;script type=&quot;math/tex&quot;&gt;\vec{N_1}&lt;/script&gt;
&lt;p&gt;. The resulting vector describing the overall change in the system is&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\vec{S} = \vec{N_1} + \vec{N_2}
&lt;/script&gt;

Because
&lt;script type=&quot;math/tex&quot;&gt;\vec{N_1}&lt;/script&gt; 
and
&lt;script type=&quot;math/tex&quot;&gt;\vec{N_2}&lt;/script&gt; 
are orthogonal (and because of a couple of other assumptions, such as the space defined by the population densities being Euclidean), it’s easy to measure the Euclidean norm of
&lt;script type=&quot;math/tex&quot;&gt;\vec{S}&lt;/script&gt;
&lt;p&gt;, which is to say the total amount of change in the system, as being&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
\lVert \vec{S} \rVert = \sqrt{\lVert \vec{N_1} \rVert ^2 + \lVert \vec{N_2} \rVert ^2 }
&lt;/script&gt;

At any given coordinate
&lt;script type=&quot;math/tex&quot;&gt;(N_1, N_2)&lt;/script&gt;
, the system will move towards
&lt;script type=&quot;math/tex&quot;&gt;(N_1 + \dot{N_1}, N_2 + \dot{N_2})&lt;/script&gt;
. With both infos in hand, we can do two things. First, we can plot the instantaneous rate of change of the system (the absolute value of the norm of
&lt;script type=&quot;math/tex&quot;&gt;\vec{S}&lt;/script&gt;
&lt;p&gt;) over space, to see in which combinations of populations densities are trigerring rapid changes. Second, we can plot the direction of change using arrows &lt;em&gt;over&lt;/em&gt; the previous graph, to see in which direction the system is moving. The really good thing with this method is that we only have to tell students that we describe the cumulative change of populations on the two axes, and leave aside all of the maths (as straightforward as they may be).&lt;/p&gt;
&lt;p&gt;So now, we can produce a graph like the one below:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/isoclines.png&quot; alt=&quot;Is1&quot; /&gt; {: .left}&lt;/p&gt;
&lt;p&gt;When the color is close to red, the system is moving extremely fast. When the color is close to yellow, the system is slowing down. Each arrow gives the direction in which the system is changing, so we can see that the outcome of competition in this case will depend on the initial conditions. It’s also easy to start from anywhere on the plan, and follow the direction of the arrows. You can also zoom in, to see how the system behaves when near the equilibrium, and investigate the effects of a small disturbance. In this case, it’s clear that the system will move away from the equilibrium, which is a good way to introduce the notion of local stability (after that, it’s eigenvalues all the way down!).&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/isoclines_stable.png&quot; alt=&quot;Is2&quot; /&gt; {: .right}&lt;/p&gt;
&lt;p&gt;The same visualization with a stable coexistence is also extremely clear. You can easily see that all of the arrows converge towards the two-species equilibrium, which in that case is stable. I’m not going to show the systematic exclusion scenario, but it’s working in the same way.&lt;/p&gt;
&lt;p&gt;The good thing with this method is that (i) it’s easy to explain what isoclines are and how to use them to see how the system will change over time, and (ii) as it’s extremely visual, it does not rely on the students understanding the maths &lt;em&gt;before&lt;/em&gt; they understand their ecological meaning. I have no data to back this up, but I think it’s easier to understand the maths once you can see the output in a visual way.&lt;/p&gt;
&lt;p&gt;The code I used is available as a &lt;a href=&quot;https://gist.github.com/tpoisot/9632093&quot;&gt;gist&lt;/a&gt;. It’s not optimized &lt;em&gt;at all&lt;/em&gt; but it runs fast enough that optimization is not really an issue. You can modify the &lt;code&gt;params&lt;/code&gt; array to fix values of &lt;em&gt;r&lt;/em&gt;, &lt;em&gt;K&lt;/em&gt;, and the &lt;em&gt;per capita&lt;/em&gt; competition rates, and the code will do the rest.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Here we are. This is the way I currently explain isoclines, and the outcome of competition in the two-species logistic growth model (and a bunch of others, actually). It helps &lt;em&gt;me&lt;/em&gt; by making it virtually impossible to fail at the explanation, because I can just follow the arrows. And I think it helps &lt;em&gt;the students&lt;/em&gt; because (i) it gives a visual explanation of the phenomenon that requires no mathematical understanding, and (ii) it’s an intuitive way to start thinking about all the conclusions we can draw using this model.&lt;/p&gt;
&lt;p&gt;Now, if any of you have an alternative method to teach that, I’m very interested. I think that the behavior of this model can be tricky to explain. Yet it touches upon so many core principles in community ecology that it’s super important that we get it right.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Is a citation a missed publication?</title>
     <link href="http://timotheepoisot.fr/2014/03/07/missed-publications-citations/"/>
    <updated>2014-03-07T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I had a very interesting discussion/argument on twitter this afternoon, about (basically) why data sharing is evil. Or to put it in a more balanced way, why sharing data is a net loss of potential papers for people. Because 140 characters are not enough to make a coherent argument, I will summarize my position here. The key disagreement with coercive data sharing policies is that journals are requiring people to give away their data, and that any one can use these datasets to publish papers without putting in the effort of collecting data, so that is a loss of potential publications for the data creators. It’s probably one of my most despicable qualities, but I don’t mind having heated arguments over &lt;em&gt;ideas&lt;/em&gt;. Which most definely happened this afternoon…&lt;/p&gt;
&lt;p&gt;The point is, creating data &lt;em&gt;is&lt;/em&gt; hard work. I know that because, well, I generated some on my own, through either field (my left buttock still bears the scar of the time I sat on a sea urchin), and lab work. I know how many hours go into making a dataset. All of these datasets are publicly available.&lt;/p&gt;
&lt;p&gt;These last years, I’ve been moving towards (mostly) numerical/computational research. One important output of my research (other than results and papers) is software. I know how many hours go into making good software. Coming up with the &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/ele.12002/abstract&quot;&gt;measure of ecological networks beta-diversity&lt;/a&gt; was a solid year worth of my time. Reviewing measures of ecological specificity, and coming up with one that &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1111/j.2041-210X.2011.00174.x/abstract&quot;&gt;behave the way we felt it had to&lt;/a&gt; was approximately the same amount of time.&lt;/p&gt;
&lt;p&gt;That’s by no mean an optimal comparison, but it will serve: it takes an equivalent effort to put together a dataset and a software package. Keep also in mind that, just as some datasets keep on growing from year to year, most high-profile pieces of ecological software are permanently being developped and expanded. Terry McGlynn rightly pointed out that spending a summer in the field carries a personnal cost (as in, not seeing your family), and that doesn’t happen in software developments (though it’s often best to avoid being in the general vincinity of anyone &lt;em&gt;debugging&lt;/em&gt; a program).&lt;/p&gt;
&lt;p&gt;Now, I won’t re-state my view on open data. You can read about it &lt;a href=&quot;http://library.queensu.ca/ojs/index.php/IEE/article/view/4632&quot;&gt;here&lt;/a&gt; (in open access), but in science as in other domains, I’m leaning towards the &lt;em&gt;From each according to its capacities, to each according to its needs&lt;/em&gt; end of the spectrum (which does not mean that credit should not be given, and I will discuss this later on).&lt;/p&gt;
&lt;p&gt;So, back to the argument. When people re-use your data, it represents a net loss of one paper for your lab. By the same logic, everytime someone uses a software, the developers are loosing a paper. I’m a lucky one, since so far I’ve only “missed” a few dozen papers (and counting, since I’ve reviewed a few other papers using some of these packages). Developpers of the big-name R packages in ecology and evolution, or bioinformatics packages, really have it bad, because they “missed” a few thousands of papers. But I don’t think any software developer will see a citation to its package as a missed paper, because it is assumed that the number of citations is the measure of impact we need.&lt;/p&gt;
&lt;p&gt;On the other hand, many people would assume that contributing a dataset is a reason to require authorship. I’ve had two projects fall flat last year because using the datasets would have required adding another five co-authors. These datasets have been last used over five years ago, and it’s unlikely the people creating them would have done whatever we are were thinking of doing (luckily, it all ends well, since we’ve since found open data…). And you don’t have to look far to find people that were in the same position. And it’s always the same argument: by publishing with my data, you’re robbing me of one paper.&lt;/p&gt;
&lt;p&gt;And this points to a very big, fundamental issue: if we all operate on the assumption that a citation is OK to credit methodological work, but authorship is the only appropriate credit for data collection, it reflects the fact that methodological development is &lt;em&gt;less real&lt;/em&gt; than empirical work. That it’s easier, that it’s less desserving of being recognized. That it’s less &lt;em&gt;hard to do&lt;/em&gt;. In other words, that data are scarce, but methods are plenty. I don’t think that’s true.&lt;/p&gt;
&lt;p&gt;This is the interesting point in the discussion. Many of the people I talked to would likely find preposterous the ideas of granting co-authorship to developers of the software they use, yet would ask to be included in papers using the data they produced. Hence my complaints about a double standard: methods developers should be satisfied by citations, data creators can expect authorship.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The problem of &lt;em&gt;getting credit&lt;/em&gt;, nonetheless, is a valid one. The underlying issue is the perception that authorship is the &lt;em&gt;only&lt;/em&gt; type of credit you can receive. Citations of datasets is going a long way to fix this, but it is true that data creation is not always recognized as a research output. This is one of the points &lt;a href=&quot;http://library.queensu.ca/ojs/index.php/IEE/article/view/4632&quot;&gt;we discuss in our open data paper&lt;/a&gt;. Yet there are interesting opportunities to exploit. Manon (a former student) and I &lt;a href=&quot;http://www.ecologicalprocesses.com/content/2/1/13&quot;&gt;share authorship of the paper on natural bacteria-phage networks&lt;/a&gt;, because even though we were in charge of different sides of putting the paper together, we had an equal contribution to it overall. Yet Manon is lead author of the &lt;a href=&quot;http://figshare.com/articles/Phage_bacteria_networks_isolated_in_soil/696102&quot;&gt;dataset&lt;/a&gt;, because she was in charge of sampling and isolation. So should someone publish something using this dataset (which is going to happen soon if I’m not mistaken), it’s normal that she get the credit for this part of the work.&lt;/p&gt;
&lt;p&gt;But the point is, we’re not going to publish anything else with this dataset. Not that it has told everything there it can, but we’ve moved on to other things. And so any new paper using it, is &lt;em&gt;not&lt;/em&gt; a missed opportunity. It carries no cost for me, because chances are, I would never have written this new paper in the first place. And the important question is, what are the chances that someone will write the same paper you would have, with your data? My point of view (and I understand that not everyone will share it) is: low enough that I can share some data I intend to go back to at some point, because they can still be used to generate interesting research &lt;em&gt;even though I’m not the one responsible&lt;/em&gt;. That, and I’m working on the assumption that a very small subset of people are interested/like-minded in writing the type of papers I write; and most of them are good collaborators already; and you don’t scoop your close colleagues. And I think it’s true for a lot of people.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;So a citation to your dataset, in my mind, is not a missed publication. Rather, it’s the opposite. Data which are not shared are a net loss of potential impact. They could be generating citations. They could be used by people to get interested in what you do. One of the most important piece of advice that was ever given to me, and which is why I’m so into open science now, is &lt;em&gt;Anything that people can’t see, doesn’t count&lt;/em&gt;. I’d much rather see whatever few datasets I was involved in creating be used, rather than collecting dust somewhere.&lt;/p&gt;
&lt;p&gt;Are there situations in which people will use your data, and you won’t be on the paper? Definitely. But there are also situations in which putting your work out there will result in invitations to contribute to a paper? Yes. And it goes both ways. I’ve been invited to contribute to papers relying on my methods, I’ve been inviting people to contribute to papers because their data are central in what I’m trying to do. This is one of the key assumptions I make: most people are nice and good natured, no one is out there to steal your papers or your work, don’t be afraid.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;To summarize my key points: expecting citations in exchange for software and authorship in exchange for data sends a really negative message to use code monkeys (erm, researchers interested in methodological developments). It’s worth considering whether someone can write the same paper as you, and if the answer is “Unlikely”, then it’s probably safe to release your data. And finally, try to see the world through rose-tinted glasses; despite pressure to publish, and well, pressure in general, people are nice, love nothing more than working together to create beautiful interesting science, and the total is more than the sum of its individualistic parts - or so I believe.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Ecologists needs to focus more on patterns</title>
     <link href="http://timotheepoisot.fr/2014/03/05/ecology-needs-more-patterns/"/>
    <updated>2014-03-05T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Ecology is the study, which is to say the identification, description, and reporting, of patterns. Patterns are simply defined as there being something rather than nothing, which is to say something that can represented as a histogram or a scatterplot, or even just called a pattern because this helps relate it to previously described patterns.&lt;/p&gt;
&lt;p&gt;Sub-fields of ecology are primarily defined by which types of patterns they look for. Functional ecologists are interested in traits distribution patterns. Macroecologists look for species distribution patterns. Biogeographers do that too, but they focus on slightly different patterns of species distributions. Food web ecologists looks for network structure patterns. Community ecologists are interested in niche differentiation patterns. Some ecologists, allegedly, are into the study of mechanism; this is not as un-orthodox as it seems, for what are mechanisms, if not processes giving rise to patterns? Their study is therefore, if not entirely excusable, understandable as an interesting intellectual passtime for those unlucky enough not to have access to big databases.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/satyr.jpg&quot; alt=&quot;Satire&quot; /&gt; {: .left }&lt;/p&gt;
&lt;p&gt;But I digress. There is an issue we should collectively adress, and it relates to the search for meta-patterns. For example, several species distribution patterns are similar, and so we ought to recognize this observation for what it is: there is a pattern of species distribution patterns. The same holds for other types of patterns. The next breakthrough in ecology will probably come from the identification of these meta-patterns. My personnal opinion is that this breakthrough has been delayed because so many things that are patterns are called something else, thus preventing unification of the vocabulary.&lt;/p&gt;
&lt;p&gt;I would even say that our remarkable self-restraint in using the p-word is bringing much technical confusion to the litterature. Although this is surely of interest to statisticians, most of us should not be too concerned by whether the reported pattern is a &lt;em&gt;distribution&lt;/em&gt;, a &lt;em&gt;relationship&lt;/em&gt;, or something else entirely. We would greatly simplify our writing by calling all of these by their proper denomination: &lt;em&gt;significant patterns&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;This would, as I proposed above, bring conceptual unification to ecology by allowing us to gloss over the tedious mathematical details. For example, the search for patterns of species distributions patterns now becomes the much more ecologier search for significant patterns of significant species patterns patterns. And of course, as it is timely to dismiss the use of &lt;em&gt;p&lt;/em&gt;-values as an old tradition slowly going away, “significant” is always assumed because we are obviously above doing unsignificant research. No longer will one feel excluded because the precise nuance of each term is sometimes difficult to grasp. To some extent, we are about to prove Lawton wrong. Community ecology is not a mess. We made it a mess by refusing to recognize that everything is a pattern, and much like in the Tower of Babel analogy, we made our field tumble and fall because we used a meaningless variety of highly specific terms.&lt;/p&gt;
&lt;p&gt;But conceptual unification of the field through the elimination of superfluous words (words such as, for instance, superfluous) serves a very limited purpose if it won’t allow to create bridges with other fields. Evolutionary ecology, because it studies the rise of patterns through evolution, can be re-branded as the study of the emergence of complex patterns. It is admitted that all patterns are complex, as if they were not, being smart people with diplomas, we would have found about them already.&lt;/p&gt;
&lt;p&gt;So there it is; ecology is built upon patterns, and in the future, it should be patterns all the way down. The divide between theoreticians and empiricists can, at this point, only be bridged by having a common language, in which anything worth mentionning is refered to as a pattern. Some would call this language poorer. They would be wrong. Pauperisation is when each word only holds a small amount of meaning; this drives the division of ecology in obscure sub-fields unable to communicate. By refocusing our research efforts on patterns, and patterns of patterns, we will be able to re-unify our field.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;A final (and serious) note&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In case this was not obvious by the overall absurdity, and the picture of an eminently Rococo &lt;em&gt;Satyr&lt;/em&gt; (get it?), this is meant to be a satirical piece. In case you wonder, yes, it felt good to write it, I got rid of so much frustration. Now for the serious part. I have a feeling that the p-word is used to mean a &lt;em&gt;lot&lt;/em&gt; of things. I played a game at a meeting the other day: some of the speakers clocked in at over 1.5 ppm, which is to say “patterns per minute”. It would have been the most dangerous drinking game. Removing stop-words, &lt;em&gt;i.e.&lt;/em&gt; extremely frequent words regardless of the topic discussed, I’m sure &lt;em&gt;pattern&lt;/em&gt; was &lt;strong&gt;the&lt;/strong&gt; most frequently used term.&lt;/p&gt;
&lt;p&gt;From my own observations, &lt;em&gt;pattern&lt;/em&gt; is used to mean either &lt;em&gt;distribution&lt;/em&gt; (in the statistical sense), &lt;em&gt;relationship&lt;/em&gt; (often statistical, sometimes mechanistic), and other times either to describe something that we can’t quite qualify. In some cases, &lt;em&gt;patterns&lt;/em&gt; is superfluous (also, I don’t think we should get rid of superfluous), and can be removed entirely without loss of meaning - I would argue that &lt;em&gt;species distribution pattern&lt;/em&gt; is a perfect example of the later. Actually, there is at least one valid sentence in my first paragraph: &lt;em&gt;pattern&lt;/em&gt; means something, rather than nothing; but it fails to provide any information about the &lt;em&gt;nature&lt;/em&gt; of this thing.&lt;/p&gt;
&lt;p&gt;Mark Twain said that young writers should write &lt;em&gt;damn&lt;/em&gt; every time they would have written &lt;em&gt;very&lt;/em&gt;; the editor would then remove &lt;em&gt;damn&lt;/em&gt;, and the text will not be diminished. For a few months, I had a macro replacing &lt;em&gt;pattern&lt;/em&gt; by &lt;em&gt;stuff&lt;/em&gt;, which I think is equally informative. As a result, I stopped using &lt;em&gt;pattern&lt;/em&gt; (almost) entirely, and I think it improved my writing. Notably, it forced me to pick the right word, instead of letting the reader figure out what I meant as an exercise.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Of the value of datasets and methods in open science</title>
     <link href="http://timotheepoisot.fr/2014/03/04/open-datasets-methods/"/>
    <updated>2014-03-04T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;The interesting thing about predictions is that sometimes, they come true. Last week, I was discussing the need to do advocacy about open data; specifically, the need to do it fast, because one day, a big journal will release a new policy, and we are going to see the closest thing to mass hysteria that the academic world can do. If I was so good at predicting species interactions, I’d be a much happier ecologist.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;PLoS&lt;/em&gt; journals &lt;a href=&quot;http://blogs.plos.org/everyone/2014/02/24/plos-new-data-policy-public-access-data/&quot;&gt;announced a new data release policy&lt;/a&gt;, which is now effective. People &lt;a href=&quot;http://rxnm.wordpress.com/2014/02/25/fan-fiction/&quot;&gt;freaked out&lt;/a&gt;. Some effectively stated that data sharing encourages scientific &lt;a href=&quot;http://smallpondscience.com/2014/03/03/i-own-my-data-until-i-dont/&quot;&gt;freeloading&lt;/a&gt;, and I only link to the later because there is an interesting point made in the comments:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I suspect that you’re fully aware that the sharing of R programming has some fundamental differences with the sharing of original scientific data. The existence of R itself is a medium for community sharing. It’s like the NEON or LTER but for data analysis, designed as a public resource. I didn’t design my experiments for their data to be a public resource, except for the findings.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;See, that’s where I lost it. I’m a methods developer. Some of my papers I like the most are built on the idea of finding the best way to measure something, or comparing and understanding different measures, and wrapping things up in a &lt;code&gt;R&lt;/code&gt; package or &lt;code&gt;python&lt;/code&gt; script, which are made public, and that I spend an insane amount of time troubleshooting through email because I care about enabling people to use what I do. Yet in two sentences, my work is robbed of all its meaning because, well, of course it ought to be public, it’s public service and people developing methods only do so to serve people generating data.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I agree with that&lt;/strong&gt;. The most enjoyable thing for me is to face an empirical problem that reveals a gap in our methodology, and then filling a notepad with sketches and equations until I come up with a new way of measuring old things. And I’m an ecologist. My interest is in understanding ecological systems, and I choose to do so with a heavy component of methodological development. I’m glad when people show interest in what I’ve done, which is why I spend time replying to emails on technical questions, writing code for people, and trying to understand why things behave the way they do.&lt;/p&gt;
&lt;p&gt;Here’s what I don’t agree with: the sense of entitlement. The above excerpt (and most of the post it comes from) is, I think, the opinion of a minority, but it should be vocally opposed nonetheless. I don’t believe I am entitled to other peoples’ data. I don’t know anyone who does. Yet some people feel that they are entitled to new methods, because there are apparently on one side nerds with glasses and computers (I plead guilty), and on the other side “real” ecologists with muddy boots and field trips. And saying that methods are supposed to be given away for free, while data should be released whenever you damn well please send a very clear message about which side is the best one, about which side is privileged. So I don’t take lightly to my work being belittled as community service, because I would never say that all empiricists are good for is taking data for me to develop new methods with.&lt;/p&gt;
&lt;p&gt;Not only is that attitude counterproductive, it’s re-inforcing the divide between theory and empiricism in biology at large, and ecology in particular. I think it’s high time that we recognize that datasets, methods, ideas, and what have you, are all ingredients in a research paper. Initiatives like &lt;em&gt;ImpactStory&lt;/em&gt; are helping in that direction. I’m convinced that dialogue between everyone, and meaningful collaborations between theoretical and empirical scientists are the way to go, and will produce better science. Ultimately, it will also help each of these aspects of doing research being recognized, as I discussed in my talk at the &lt;a href=&quot;http://figshare.com/articles/Open_science_Make_your_work_known_/877095&quot;&gt;QCBS panel on open ecology&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So in short: &lt;strong&gt;research would gain to be open&lt;/strong&gt;. I want to believe that no one is out there to &lt;em&gt;steal&lt;/em&gt; the work of others. Re-use is probably the highest form of recognition you can get, because it means that what you have &lt;em&gt;done&lt;/em&gt; (not what you have written about it) allowed other people to build something new. And we’re all doing different things, but also complementary things. As ecologists, we &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1034/j.1600-0706.2000.910101.x/abstract&quot;&gt;ought to know that it should be beneficial for productivity&lt;/a&gt;…&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Responsibility and sensationalism in high-profile papers</title>
     <link href="http://timotheepoisot.fr/2014/01/25/responsibility-high-impact/"/>
    <updated>2014-01-25T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Last week, we had an inter-lab journal club during which we discussed a very polemic paper in ecology. The discussion quickly turned into the responsibility of people at the various levels of the scientific publishing process, and the risks associated with counter-mainstream results appearing in high-profile journals. Most of what follows is my recollection of the different arguments we raised for and against self-censorship in scientific publishing. Which paper we discussed is not relevant for the rest of this post, so I’ll try to summarize the issue in extremely broad terms. There is a well-known relationship between concept &lt;em&gt;B&lt;/em&gt; and property &lt;em&gt;C&lt;/em&gt;. Changes in &lt;em&gt;B&lt;/em&gt; are expected, under some circumstances, to result in changes in &lt;em&gt;C&lt;/em&gt;. &lt;em&gt;B&lt;/em&gt; is a complex thing with several layers to it. A set of studies showed no variation of &lt;em&gt;A&lt;/em&gt;, which is a component of &lt;em&gt;B&lt;/em&gt;, and so it seems to question the relationship between &lt;em&gt;B&lt;/em&gt; and &lt;em&gt;C&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;For different reasons, whether there is (i) a change in &lt;em&gt;A&lt;/em&gt;, and (ii) a link between &lt;em&gt;B&lt;/em&gt; and &lt;em&gt;C&lt;/em&gt;, is a pretty big deal when it comes to policy making. “Proving” that the relationship is not general, or not important, or even wrong, is susceptible to have real-world consequences. In addition, it would be a big deal for theoretical science as well, because it will mean that what we thought (and still think) of an important concept in ecology, is wrong and need to be re-built. But it would also mean that, as far as policy makers are concerned, we can persist in several “business as usual” practices; after all, there are now data to back them up!&lt;/p&gt;
&lt;p&gt;So, should we practice self-censorship? Absolutely not. The “cost” of making all information public has been particularly discussed in the context of bio-terrorism; understanding the risks requires results to be published, but publishing results can increase &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/books/NBK98397/&quot;&gt;the ease to produce bioweapons&lt;/a&gt;. Some argue that &lt;a href=&quot;http://onlinelibrary.wiley.com/doi/10.1353/hcr.2007.0046/abstract&quot;&gt;not all results should be published&lt;/a&gt;, but determining which should, and which should not, is a tricky issue. Some ecological results have very strong relevance for policy-making (and lobbies), and there is a risk that some will have a political reading of some papers.&lt;/p&gt;
&lt;p&gt;The question is, therefore, who is responsible for “customer service”&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; once a new result appears? First thing first, the authors. I have the feeling that a perverse effect of the publish-or-perish mentality is a quest for sensationalism (which seems to be confirmed by this &lt;a href=&quot;http://nsaunders.wordpress.com/2013/07/16/interestingly-the-sentence-adverbs-of-pubmed-central/&quot;&gt;analysis of adverbs used in PMC papers&lt;/a&gt;, where more abstracts emphasize interest, surprise, and novelty). And when we (scientists) read a paper making bold claims, we are able to rationalize them because it’s not the first paper we are reading. We are able to weigh one result against dozens of others. But my very personal and humble opinion is that, when the result we report is likely to make a splash, we have to consider whether the way we express it is likely to be mistaken by the public.&lt;/p&gt;
&lt;p&gt;Second, editors have a role to play. There is a well documented relationship between &lt;a href=&quot;http://retractionwatch.com/2011/08/11/is-it-time-for-a-retraction-index/&quot;&gt;impact factor and likelihood of retractation&lt;/a&gt;, and a tendency for the media to cover &lt;a href=&quot;http://www.plosone.org/article/info:doi%2F10.1371%2Fjournal.pone.0085355&quot;&gt;not the best conducted studies&lt;/a&gt; (perhaps, has we hypothesized, because most science is normal, and normal science is very rarely cool for people outside the field). It would make sense that the boxes with comments from the editor, that seem to appear in more and more journals, be dedicated to putting sensational papers into the broader context.&lt;/p&gt;
&lt;p&gt;And finally, science journalists. One of the things that never fails to amaze/annoy me is that, when a vastly mediatised paper ends up being retracted, there is almost never any indication of that in the media (our short attention span be damned). Which means that unless you specifically follow people discussing the issue, do you know that bacteria are still unable to use arsenic in their DNA? I get that saying “Nope, turned out we were pretty much right about how life works” is unlikely to make the headlines (unless you want to, you know, &lt;em&gt;inform&lt;/em&gt;). As this post &lt;a href=&quot;http://scienceblogs.com/notrocketscience/2009/07/04/does-science-journalism-falter-or-flourish-under-embargo/&quot;&gt;really clearly states&lt;/a&gt;, the ability to react &lt;em&gt;right now&lt;/em&gt; on a big story is important for the career of journalists. It lead to (in my mind) absurd situations in which journalists can prepare their copy before the majority of the scientific community knows the results.&lt;/p&gt;
&lt;p&gt;As a final note, I have nothing against sensationalism. If anything (if it is backed by facts and sound interpretation), sensational ideas and results are a great way to make people interested in science. Telling a story about the population dynamics of an emblematic animal makes for better communication than the subtleties of a stochastic, spatially explicit generalized Lotka-Volterra model (somehow). But everything even remotely close to &lt;a href=&quot;http://en.wikipedia.org/wiki/Post-normal_science&quot;&gt;post-normal science&lt;/a&gt; should be written carefully, contextualized carefully, and reported on carefully.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;I forgot who came up with the “customer service of scientific results” idea, but I find it brilliant…&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  
  <entry>
     <title>Should we tell students that communities don't exist?</title>
     <link href="http://timotheepoisot.fr/2014/01/21/teaching-ecological-communities/"/>
    <updated>2014-01-21T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Literally one of the first things I told my students in the first lecture of the &lt;em&gt;Population and Community Dynamics&lt;/em&gt; class I gave last winter was along the lines of &lt;em&gt;an ecological community is the pool of all species occuring at the same place and at the same time (and the interactions between them)&lt;/em&gt;. This is more or a less a synthesis of what you can find in the first pages of Peter Morin’s textbook, for example; and so far, I was relatively satisfied by this definition. Then a few weeks ago, I read the &lt;span class=&quot;citation&quot; data-cites=&quot;lea14&quot;&gt;Leaper et al. (2014)&lt;/span&gt; paper in &lt;em&gt;Ecology&lt;/em&gt;, which uses co-occurrence data from marine species to question the “classical” definition of a community. Their most important finding is that, when clustering species in a large spatial dataset, there are groups of highly correlated species. The interesting thing is that these groups are not unique to any particular location, and are not necessarily found together. Or in short, “communities” are a mix between the two definitions of “whatever is found locally” and “the most characteristic species of an assemblage”.&lt;/p&gt;
&lt;p&gt;As I was writing this post, &lt;a href=&quot;http://evol-eco.blogspot.ca/2014/01/a-multiplicity-of-communities-for.html&quot;&gt;Caroline Tucker&lt;/a&gt; wrote a very interesting piece on the &lt;em&gt;multiplicity of ecological communities&lt;/em&gt;. Which you should read, because it covers a lot of the ground I was planning on covering (and I had to delete a few paragraphs). Let’s just say I am glad that the first time I get scooped is for a blog post and not for a paper. So just go read Caroline’s piece, but then come back, because I will try to put another twist on the subject. Specifically, should we adapt our message when teaching?&lt;/p&gt;
&lt;p&gt;The end of Caroline’s piece is that we should not try to have a one-size-fits-none definition of what an ecological community is. I thought it was the only significant weakness of Mark Vellend’s otherwise excellent synthesis &lt;span class=&quot;citation&quot; data-cites=&quot;vel10&quot;&gt;(Vellend 2010)&lt;/span&gt; from a few years ago: a definition of a community which is as simple as the one I gave in the introduction of this post. Defining communities this way has one distinct advantage: it is straightforward to go from community to meta-communities (&lt;em&gt;a bunch of communities connected by the dispersal of at least one of their species&lt;/em&gt;). But the important point is that the world is most likely not discrete, and the elegant framework of meta-everything is probably not going to hold in its entirety in continuous landscapes.&lt;/p&gt;
&lt;p&gt;So looking back, I am thinking that the nice tale we are telling students is (i) probably not relevant at the local scale, because it considers that the qaudrat we work on is a perfectly isolated island, and (ii) probably not relevant at the regional scale either, because it does not expands nicely to a continuous spatial context. What should we tell then? I think it would be an interesting discussion, to present the “simple” definition of a community to students, and get them to understand when it breaks. How do you define the area you consider to define a community? What if the environment is always moving (like lagoons, intertidal zones, …)? What if you started walking, from your sampling point, in the same direction; when do you leave the zone “defined” by your community?&lt;/p&gt;
&lt;p&gt;Another interesting approach would be to compare this definition to classical large scale experimental systems. Looking at the list of the &lt;em&gt;greatest&lt;/em&gt; ecological experiments proposed by &lt;a href=&quot;http://dynamicecology.wordpress.com/2014/01/13/whats-the-greatest-ecology-experiment-in-history/&quot;&gt;Jeremy Fox and in the comments&lt;/a&gt;, or just showing pictures of Huffaker’s oranges, or the Adirondack lakes, on any microcosm setup, should lead to the realization that most of these systems conform to the discrete theory (counterpoint: &lt;em&gt;Barro Colorado Island&lt;/em&gt;). Coming back to the paper by Leaper &lt;em&gt;et al.&lt;/em&gt;, it is actually hardly surprising that marine biologists are once more pushing the ideas that discrete communities may make very little sense: dispersion is cheap and easy in the oceans, and for some functional groups, it is entirely passive &lt;span class=&quot;citation&quot; data-cites=&quot;mcm12&quot;&gt;(McManus and Woodson 2012 propose nice evidence that this mode of dispersal will “assemble” consistent communities)&lt;/span&gt;. In short, there is a tremendous opportunity to engage with students on the relationship between &lt;em&gt;what&lt;/em&gt; we study, &lt;em&gt;how&lt;/em&gt; we study it, and how it can &lt;em&gt;shape&lt;/em&gt; the theoretical background we develop to make sense of observations.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;
&lt;p&gt;Leaper, R. et al. 2014. Do communities exist? Complex patterns of overlapping marine species distributions. - Ecology in press.&lt;/p&gt;
&lt;p&gt;McManus, M. A. and Woodson, C. B. 2012. Plankton distribution and ocean dispersal. - The Journal of experimental biology 215: 1008–1016.&lt;/p&gt;
&lt;p&gt;Vellend, M. 2010. Conceptual synthesis in community ecology. - The Quarterly Review of Biology 85: 183–206.&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Semantic versioning for scientific software</title>
     <link href="http://timotheepoisot.fr/2014/01/20/semantic-versioning/"/>
    <updated>2014-01-20T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I have recently discovered the concept of &lt;a href=&quot;http://semver.org/&quot;&gt;semantic versioning&lt;/a&gt;, introduced by Tom Preston-Werner. In short, semantic versioning is a way to know whether two versions of a program will behave in the same way. A program conforming to this specification has a version number of &lt;code&gt;major&lt;/code&gt;.&lt;code&gt;minor&lt;/code&gt;.&lt;code&gt;patch&lt;/code&gt;, and comparing two version numbers will tell you exactly what to expect in terms of compatibility. Versions with different &lt;code&gt;major&lt;/code&gt; numbers are not supposed to be compatible. A version with a higher &lt;code&gt;minor&lt;/code&gt; number will have additional, backwards compatible functions. Different levels of &lt;code&gt;patch&lt;/code&gt; will correspond to issues solving and so forth.&lt;/p&gt;
&lt;p&gt;Semantic versioning is intended for programs declaring a public API, as all &lt;code&gt;R&lt;/code&gt; packages do (the various functions and data formats). Any package, module, etc., declaring functions that will be used in user-written scripts are within the scope of semantic versioning. A script that you wrote using v. &lt;code&gt;1.2.3&lt;/code&gt; will work when &lt;code&gt;1.3.1&lt;/code&gt; or &lt;code&gt;1.2.4&lt;/code&gt; are released, but &lt;em&gt;not&lt;/em&gt; when &lt;code&gt;2.0.0&lt;/code&gt; is. An important point is that, unless &lt;code&gt;major&lt;/code&gt; is &lt;code&gt;1&lt;/code&gt;, the software is considered unstable: the API can change very rapidly, and so it should not be used for production.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yihui.name/en/2013/06/r-package-versioning/&quot;&gt;Yihui Xie&lt;/a&gt; proposes a slightly different set of rules, specifically aimed at &lt;code&gt;R&lt;/code&gt; packages. When the &lt;code&gt;minor&lt;/code&gt; version increases, release the new version of your package to &lt;code&gt;CRAN&lt;/code&gt; (as &lt;code&gt;patch&lt;/code&gt; versions are not supposed to introduce new features anyway). People can just save time by referring to the &lt;code&gt;major&lt;/code&gt;.&lt;code&gt;minor&lt;/code&gt; version of the package. The way semantic versioning works, you will only submit &lt;code&gt;major&lt;/code&gt;.&lt;code&gt;minor&lt;/code&gt;.&lt;code&gt;0&lt;/code&gt; versions to &lt;code&gt;CRAN&lt;/code&gt; (because each time a number increases, all numbers to the right are set to &lt;code&gt;0&lt;/code&gt;). And so any version with &lt;code&gt;patch&lt;/code&gt; higher than &lt;code&gt;0&lt;/code&gt; is a &lt;em&gt;development&lt;/em&gt; version.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;What is the relevance of that for people not contributing to software development? I think using semantic versioning is useful if we &lt;em&gt;report&lt;/em&gt; version numbers in the papers in the same way. If you distribute supplementary files with your paper, such as &lt;code&gt;R&lt;/code&gt; scripts, don’t give the package name, but also the version of the package you used. This can be viewed using &lt;code&gt;sessionInfo()&lt;/code&gt;. If you use package &lt;code&gt;foo&lt;/code&gt;, v. &lt;code&gt;1.3.0&lt;/code&gt;, and the maintainer of package &lt;code&gt;foo&lt;/code&gt; uses semantic versioning, if someone tries to use your script a few years later with &lt;code&gt;foo&lt;/code&gt; v. &lt;code&gt;2.1.0&lt;/code&gt;, it is &lt;em&gt;possible&lt;/em&gt; that things will break. If you clearly state which packages versions are used, it will be easier for users to install the correct version of the packages to run your analyses.&lt;/p&gt;
&lt;p&gt;Correct reporting of software versions is important (and I’ve been guilty of not using top-notch practices myself), but if an increasing number of people start using semantic versioning, it will &lt;em&gt;help&lt;/em&gt; re-use of code. In short, we should always give the full version number when mentioning a package or software.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;As a final note, this also require the those of us producing code adopt better development practices. In &lt;em&gt;GitHub&lt;/em&gt;, it is easy to tag releases, so that all different versions are available over time. And because the ultimate goal of semantic versioning is to ensure backwards compatibility, we need to be sure that new fixes or additions do not break it. This can be done by writing thorough test suites. Unless a new addition results in previously passing tests failing, it can be considered safe.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Python wrapper for mangal</title>
     <link href="http://timotheepoisot.fr/2014/01/19/pymangal/"/>
    <updated>2014-01-19T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I use &lt;code&gt;python&lt;/code&gt; more than I use &lt;code&gt;R&lt;/code&gt; for my own job. &lt;code&gt;R&lt;/code&gt; is good to share things with people, but it’s a little bit slower, and orders of magnitude quirkier, than &lt;code&gt;python&lt;/code&gt;. So I decided to write a &lt;code&gt;python&lt;/code&gt; wrapper for the &lt;code&gt;mangal&lt;/code&gt; API, which you can &lt;a href=&quot;https://github.com/mangal-wg/pymangal&quot;&gt;find on &lt;em&gt;GitHub&lt;/em&gt;&lt;/a&gt;. It works with &lt;code&gt;python&lt;/code&gt; 2.6 and 2.7 (at least the test suite passes on these two versions).&lt;/p&gt;
&lt;p&gt;The goal is &lt;em&gt;not&lt;/em&gt; to release something as full-featured as the &lt;code&gt;rmangal&lt;/code&gt; package (though the core abilities will be here). Rather, I wanted a tool that is “pythonic”, easy to use, and programmed extremely defensively so that it can be used for automated analyses. There is a minimal &lt;a href=&quot;http://pymangal.readthedocs.org/en/latest/&quot;&gt;documentation&lt;/a&gt; online, which will hopefully get better over time as I understand the &lt;code&gt;sphinx&lt;/code&gt; markup.&lt;/p&gt;
&lt;p&gt;The syntax is relatively similar to that of the &lt;code&gt;rmangal&lt;/code&gt; package. Everything starts by the instansiation of a &lt;code&gt;mangal()&lt;/code&gt; class.&lt;/p&gt;
&lt;pre class=&quot;sourceCode python&quot;&gt;&lt;code class=&quot;sourceCode python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;ch&quot;&gt;import&lt;/span&gt; pymangal &lt;span class=&quot;ch&quot;&gt;as&lt;/span&gt; pm
&amp;gt;&amp;gt;&amp;gt; api = pm.mangal(url=&lt;span class=&quot;st&quot;&gt;&amp;#39;http://localhost:8000&amp;#39;&lt;/span&gt;)
&amp;gt;&amp;gt;&amp;gt; api.resources
[&lt;span class=&quot;st&quot;&gt;u&amp;#39;interaction&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;network&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;reference&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;taxa&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;trait&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;dataset&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;environment&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;item&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;user&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;population&amp;#39;&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The methods implemented by the &lt;code&gt;mangal&lt;/code&gt; class are &lt;code&gt;List&lt;/code&gt;, &lt;code&gt;Get&lt;/code&gt;, and &lt;code&gt;Post&lt;/code&gt; (&lt;code&gt;Patch&lt;/code&gt; is coming soon, and &lt;code&gt;Post&lt;/code&gt; support is sketchy at best). They work almost in the same way as their &lt;code&gt;R&lt;/code&gt; counterparts. For example, getting a list of all networks can be done with:&lt;/p&gt;
&lt;pre class=&quot;sourceCode python&quot;&gt;&lt;code class=&quot;sourceCode python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; all_net = api.List(&lt;span class=&quot;st&quot;&gt;&amp;#39;network&amp;#39;&lt;/span&gt;)
&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;dt&quot;&gt;len&lt;/span&gt;(all_net)
&lt;span class=&quot;dv&quot;&gt;17&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The only significant difference is that, by default, the &lt;code&gt;python&lt;/code&gt; version will only return the first 20 results. If you want more than 20 results, you need to use &lt;code&gt;autopage=True&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode python&quot;&gt;&lt;code class=&quot;sourceCode python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; twenty_taxa = api.List(&lt;span class=&quot;st&quot;&gt;&amp;#39;taxa&amp;#39;&lt;/span&gt;)
&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;dt&quot;&gt;len&lt;/span&gt;(twenty_taxa)
&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; all_taxa = api.List(&lt;span class=&quot;st&quot;&gt;&amp;#39;taxa&amp;#39;&lt;/span&gt;, autopage=&lt;span class=&quot;ot&quot;&gt;True&lt;/span&gt;)
&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;dt&quot;&gt;len&lt;/span&gt;(all_taxa)
&lt;span class=&quot;dv&quot;&gt;38&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;em&gt;big&lt;/em&gt; advantage of the &lt;code&gt;python&lt;/code&gt; version is that, when uploading data, there is a validation of the way they are formatted. Internally, there is a function taking care of reading the API scheme, and returning it as a &lt;code&gt;json&lt;/code&gt; schema, against which data are checked. It’s probably simpler with a demonstration…&lt;/p&gt;
&lt;pre class=&quot;sourceCode python&quot;&gt;&lt;code class=&quot;sourceCode python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;dt&quot;&gt;print&lt;/span&gt; json.dumps(api.schemes[&lt;span class=&quot;st&quot;&gt;&amp;#39;trait&amp;#39;&lt;/span&gt;], indent=&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;## I have cut some of the elements for the sake of brevity&lt;/span&gt;
{
   &lt;span class=&quot;st&quot;&gt;&amp;quot;$schema&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;http://json-schema.org/draft-04/schema#&amp;quot;&lt;/span&gt;, 
   &lt;span class=&quot;co&quot;&gt;&amp;quot;required&amp;quot;&lt;/span&gt;: [
      &lt;span class=&quot;st&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;, 
      &lt;span class=&quot;co&quot;&gt;&amp;quot;owner&amp;quot;&lt;/span&gt;, 
      &lt;span class=&quot;co&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;
   ], 
   &lt;span class=&quot;co&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;object&amp;quot;&lt;/span&gt;, 
   &lt;span class=&quot;co&quot;&gt;&amp;quot;properties&amp;quot;&lt;/span&gt;: {
      &lt;span class=&quot;st&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;: {
         &lt;span class=&quot;st&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;string&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;co&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;The name of the measured trait&amp;quot;&lt;/span&gt;
      }, 
      &lt;span class=&quot;co&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;: {
         &lt;span class=&quot;st&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;string&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;co&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;The value of the trait&amp;quot;&lt;/span&gt;
      }, 
      &lt;span class=&quot;co&quot;&gt;&amp;quot;units&amp;quot;&lt;/span&gt;: {
         &lt;span class=&quot;st&quot;&gt;&amp;quot;type&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;string&amp;quot;&lt;/span&gt;, 
         &lt;span class=&quot;co&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;Units in which the trait was measured&amp;quot;&lt;/span&gt;
      }
   }, 
   &lt;span class=&quot;co&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;quot;Autogenerated JSON schema&amp;quot;&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The data are validated &lt;em&gt;automatically&lt;/em&gt;, so you don’t have to bother about checking them yourself. For example, let’s try with a badly formatted, and with a correctly formatted, taxa:&lt;a href=&quot;#fn1&quot; class=&quot;footnoteRef&quot; id=&quot;fnref1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&quot;sourceCode python&quot;&gt;&lt;code class=&quot;sourceCode python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; bad_taxa = {&lt;span class=&quot;st&quot;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;Vulpes lagopus&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;vernacular&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;arctic fox&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;eol&amp;#39;&lt;/span&gt;: &lt;span class=&quot;dv&quot;&gt;1053894&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;status&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;valid&amp;#39;&lt;/span&gt;}
&lt;span class=&quot;co&quot;&gt;# &amp;quot;valid&amp;quot; is not an acceptable value for &amp;quot;status&amp;quot; (&amp;quot;confirmed&amp;quot; is)&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; ok_taxa = {&lt;span class=&quot;st&quot;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;Vulpes lagopus&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;vernacular&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;arctic fox&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;eol&amp;#39;&lt;/span&gt;: &lt;span class=&quot;dv&quot;&gt;1053894&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;#39;status&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;&amp;#39;confirmed&amp;#39;&lt;/span&gt;}

&amp;gt;&amp;gt;&amp;gt; arctic_fox = 
&amp;gt;&amp;gt;&amp;gt; arctic_fox = api.Post(&lt;span class=&quot;st&quot;&gt;&amp;#39;taxa&amp;#39;&lt;/span&gt;, bad_taxa)
&lt;span class=&quot;co&quot;&gt;# Skipping some lines...&lt;/span&gt;
jsonschema.exceptions.ValidationError: &lt;span class=&quot;st&quot;&gt;&amp;#39;valid&amp;#39;&lt;/span&gt; is not one of [&lt;span class=&quot;st&quot;&gt;u&amp;#39;confirmed&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;trophic species&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;morphospecies&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;nomen dubium&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;nomen oblitum&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;nomen nudum&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;nomen novum&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;nomen conservandum&amp;#39;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;u&amp;#39;species inquirenda&amp;#39;&lt;/span&gt;]

Failed validating &lt;span class=&quot;st&quot;&gt;&amp;#39;enum&amp;#39;&lt;/span&gt; in schema[&lt;span class=&quot;st&quot;&gt;&amp;#39;properties&amp;#39;&lt;/span&gt;][&lt;span class=&quot;st&quot;&gt;u&amp;#39;status&amp;#39;&lt;/span&gt;]:
{&lt;span class=&quot;st&quot;&gt;&amp;#39;description&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;u&amp;#39;The taxonomic status of the taxa.&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;&amp;#39;enum&amp;#39;&lt;/span&gt;: [&lt;span class=&quot;st&quot;&gt;u&amp;#39;confirmed&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;trophic species&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;morphospecies&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;nomen dubium&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;nomen oblitum&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;nomen nudum&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;nomen novum&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;nomen conservandum&amp;#39;&lt;/span&gt;,
   &lt;span class=&quot;co&quot;&gt;u&amp;#39;species inquirenda&amp;#39;&lt;/span&gt;],
&lt;span class=&quot;co&quot;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;: &lt;span class=&quot;st&quot;&gt;u&amp;#39;string&amp;#39;&lt;/span&gt;}

On instance[&lt;span class=&quot;st&quot;&gt;u&amp;#39;status&amp;#39;&lt;/span&gt;]:
&lt;span class=&quot;co&quot;&gt;&amp;#39;valid&amp;#39;&lt;/span&gt;

&amp;gt;&amp;gt;&amp;gt; arctic_fox = api.Post(&lt;span class=&quot;st&quot;&gt;&amp;#39;taxa&amp;#39;&lt;/span&gt;, ok_taxa)
&amp;gt;&amp;gt;&amp;gt; arctic_fox[&lt;span class=&quot;st&quot;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;]
&lt;span class=&quot;dv&quot;&gt;103&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the &lt;code&gt;validate&lt;/code&gt; function of the &lt;code&gt;jsonschema&lt;/code&gt; will tell you what is wrong with the data, and show you the relevant excerpt from the schema. This really helps finding out what it wrong with the data you try to upload.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;As a final note: I am using &lt;em&gt;&lt;a href=&quot;https://coveralls.io/r/mangal-wg/pymangal&quot;&gt;Coveralls.io&lt;/a&gt;&lt;/em&gt; for the first time, and I am extremely impressed. In short, &lt;em&gt;coveralls&lt;/em&gt; will read the results of the &lt;code&gt;coverage&lt;/code&gt; command, and tell you the proportion of your code with corresponding test cases. &lt;em&gt;Coveralls&lt;/em&gt; is integrated with &lt;em&gt;TravisCI&lt;/em&gt;, a continuous integration engine runnign the test suite each time I commit changes to the &lt;em&gt;GitHub&lt;/em&gt; repository (so I have confirmation that the new versions pass the tests). And finally, the documentation is auto-generated using &lt;em&gt;Read The Docs&lt;/em&gt;, which extracts the informations directly from the code. These are really impressive tools to work with, and they kind of force good practices upon you – which is a good thing.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;&lt;p&gt;As usual, posting and patching requires that you have a username and password. There will be a way to register through the &lt;code&gt;python&lt;/code&gt; package in the future.&lt;a href=&quot;#fnref1&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  
  <entry>
     <title>These aren't the networks you're looking for</title>
     <link href="http://timotheepoisot.fr/2014/01/14/filtering-in-mangal/"/>
    <updated>2014-01-14T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;The development of the &lt;code&gt;rmangal&lt;/code&gt; package is making good progress. I just finised implementing a way to filter results, which will be extremely useful when the number of taxa and networks will start growing. Before we get into how filtering is done, I’d like to take the opportunity to bore everyone with technical details. &lt;code&gt;mangal&lt;/code&gt; (the API) relies on &lt;code&gt;tastypie&lt;/code&gt;, which is a &lt;code&gt;django&lt;/code&gt; plugin to use the data models as API resources (bored yet?). The &lt;code&gt;tastypie&lt;/code&gt; developers had the good taste to allow &lt;code&gt;django&lt;/code&gt;’s ORM filter as URL parameters to filter results. Or in short, there is a filtering solution working out of the box.&lt;/p&gt;
&lt;p&gt;The filtering is realtively easy to do, as it follows the common pattern:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;?field__relation=target&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, to look for taxa whose name starts with &lt;em&gt;Lamellodiscus&lt;/em&gt;, we just need to append:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;?name__startswith=Lamellodiscus&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;the-basics-of-filtering&quot;&gt;The basics of filtering&lt;/h1&gt;
&lt;p&gt;So how does it works in the &lt;code&gt;R&lt;/code&gt; package? There is a &lt;code&gt;mangalSearch&lt;/code&gt; function, which takes as arguments the &lt;code&gt;api&lt;/code&gt;, the type of resource to look for (the list of resources can be now be viewed with &lt;code&gt;api$resources&lt;/code&gt;), and a list of filters. The filters are themselves &lt;code&gt;list&lt;/code&gt; objects, with three properties: &lt;code&gt;field&lt;/code&gt;, &lt;code&gt;relation&lt;/code&gt; (I give an overview of these below), and &lt;code&gt;target&lt;/code&gt;. Let me illustrate:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(rmangal)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Loading required package: rjson
## Loading required package: httr
## Loading required package: igraph
## Loading required package: stringr
## Loading required package: cheddar&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;http://localhost:8000/&amp;quot;&lt;/span&gt;)
Amphiprion &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalSearch&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;taxa&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;field =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;relation =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;startswith&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;target =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Amphiprion&amp;quot;&lt;/span&gt;)))
&lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(Amphiprion, function(x) x$name)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Amphiprion clarkii&amp;quot;      &amp;quot;Amphiprion perideraion&amp;quot; 
## [3] &amp;quot;Amphiprion ocellaris&amp;quot;    &amp;quot;Amphiprion sandaracinos&amp;quot;
## [5] &amp;quot;Amphiprion melanopus&amp;quot;    &amp;quot;Amphiprion polymnus&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It may look like a convoluted way to do a simple thing, &lt;em&gt;but&lt;/em&gt; the interest is that you can combine filters to have more precise requests. Let’s say we are really interested in a small portion of the pacific ocean, and want to know if there are any networks inside. We will define two different filters: one for latitude, and one for longitude.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;filter_lat =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;field =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;latitude&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;relation =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;range&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;target =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;1.756&lt;/span&gt;, 
    &lt;span class=&quot;fl&quot;&gt;1.813&lt;/span&gt;))
filter_lon =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;field =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;longitude&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;relation =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;range&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;target =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;fl&quot;&gt;124.76&lt;/span&gt;, 
    &lt;span class=&quot;fl&quot;&gt;124.808&lt;/span&gt;))
Networks &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalSearch&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;network&amp;quot;&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(filter_lat, filter_lon))
&lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(Networks, function(x) x$name)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Batu Kapal&amp;quot;  &amp;quot;Jalan Masuk&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;types-of-relations&quot;&gt;Types of relations&lt;/h1&gt;
&lt;p&gt;There are ten different values for the &lt;code&gt;relation&lt;/code&gt; type. &lt;code&gt;starswith&lt;/code&gt; and &lt;code&gt;endswith&lt;/code&gt; will match the beginnign and end of the value. &lt;code&gt;exact&lt;/code&gt; will match the entirety of the field. &lt;code&gt;contains&lt;/code&gt; will look for &lt;code&gt;target&lt;/code&gt; somewhere in the field. &lt;code&gt;in&lt;/code&gt; will return objects that have &lt;code&gt;target&lt;/code&gt; in the values of a multi-valued field (example of use: with the identifier of an interactio, find the network it belongs to). &lt;code&gt;range&lt;/code&gt; will return all objects that have values in the &lt;code&gt;target&lt;/code&gt; range. And finally, &lt;code&gt;gte&lt;/code&gt;, &lt;code&gt;gt&lt;/code&gt;, &lt;code&gt;lte&lt;/code&gt; and &lt;code&gt;lt&lt;/code&gt;, handle superior/inferior (or equal) relationships.&lt;/p&gt;
&lt;h1 id=&quot;more-advanced-usage&quot;&gt;More advanced usage&lt;/h1&gt;
&lt;p&gt;If you look at the code of &lt;code&gt;mangalSearch&lt;/code&gt;, you’ll see that it passes an addition argument (&lt;code&gt;filtering&lt;/code&gt;) to &lt;code&gt;mangalList&lt;/code&gt;. This allows you to handle more complicated filtering schemes. In the filtering pattern &lt;code&gt;field__relation=target&lt;/code&gt;, &lt;code&gt;field&lt;/code&gt; can actually be a &lt;em&gt;path&lt;/em&gt; across multiple objects. Let’s illustrate with an example.&lt;/p&gt;
&lt;p&gt;We want to retrieve all interactions involving &lt;code&gt;taxa&lt;/code&gt; whose name starts with &lt;code&gt;Amphiprion&lt;/code&gt;. The &lt;em&gt;path&lt;/em&gt; from &lt;code&gt;interaction&lt;/code&gt; to &lt;code&gt;taxa&lt;/code&gt; goes through the field &lt;code&gt;taxa_to&lt;/code&gt;/&lt;code&gt;taxa_from&lt;/code&gt; in interaction. So what we want to do is:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;?taxa_from__name__startswith=Amphiprion&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can add that as the &lt;code&gt;filtering&lt;/code&gt; argument of &lt;code&gt;mangalList&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Interactions &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;rmangal:::&lt;span class=&quot;kw&quot;&gt;mangalList&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;interaction&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;filtering =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;taxa_from__name__startswith=Amphiprion&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(Interactions, function(x) x$id)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;93&amp;quot;  &amp;quot;92&amp;quot;  &amp;quot;87&amp;quot;  &amp;quot;86&amp;quot;  &amp;quot;85&amp;quot;  &amp;quot;82&amp;quot;  &amp;quot;81&amp;quot;  &amp;quot;76&amp;quot;  &amp;quot;75&amp;quot;  &amp;quot;69&amp;quot;  &amp;quot;68&amp;quot; 
## [12] &amp;quot;67&amp;quot;  &amp;quot;59&amp;quot;  &amp;quot;58&amp;quot;  &amp;quot;53&amp;quot;  &amp;quot;52&amp;quot;  &amp;quot;51&amp;quot;  &amp;quot;50&amp;quot;  &amp;quot;45&amp;quot;  &amp;quot;44&amp;quot;  &amp;quot;23&amp;quot;  &amp;quot;24&amp;quot; 
## [23] &amp;quot;25&amp;quot;  &amp;quot;26&amp;quot;  &amp;quot;27&amp;quot;  &amp;quot;28&amp;quot;  &amp;quot;29&amp;quot;  &amp;quot;30&amp;quot;  &amp;quot;31&amp;quot;  &amp;quot;32&amp;quot;  &amp;quot;33&amp;quot;  &amp;quot;34&amp;quot;  &amp;quot;35&amp;quot; 
## [34] &amp;quot;36&amp;quot;  &amp;quot;37&amp;quot;  &amp;quot;38&amp;quot;  &amp;quot;39&amp;quot;  &amp;quot;41&amp;quot;  &amp;quot;42&amp;quot;  &amp;quot;43&amp;quot;  &amp;quot;44&amp;quot;  &amp;quot;45&amp;quot;  &amp;quot;46&amp;quot;  &amp;quot;47&amp;quot; 
## [45] &amp;quot;48&amp;quot;  &amp;quot;49&amp;quot;  &amp;quot;50&amp;quot;  &amp;quot;51&amp;quot;  &amp;quot;52&amp;quot;  &amp;quot;53&amp;quot;  &amp;quot;54&amp;quot;  &amp;quot;56&amp;quot;  &amp;quot;58&amp;quot;  &amp;quot;59&amp;quot;  &amp;quot;60&amp;quot; 
## [56] &amp;quot;61&amp;quot;  &amp;quot;62&amp;quot;  &amp;quot;64&amp;quot;  &amp;quot;65&amp;quot;  &amp;quot;66&amp;quot;  &amp;quot;67&amp;quot;  &amp;quot;68&amp;quot;  &amp;quot;69&amp;quot;  &amp;quot;71&amp;quot;  &amp;quot;72&amp;quot;  &amp;quot;73&amp;quot; 
## [67] &amp;quot;75&amp;quot;  &amp;quot;76&amp;quot;  &amp;quot;77&amp;quot;  &amp;quot;78&amp;quot;  &amp;quot;79&amp;quot;  &amp;quot;81&amp;quot;  &amp;quot;82&amp;quot;  &amp;quot;83&amp;quot;  &amp;quot;84&amp;quot;  &amp;quot;85&amp;quot;  &amp;quot;86&amp;quot; 
## [78] &amp;quot;87&amp;quot;  &amp;quot;88&amp;quot;  &amp;quot;89&amp;quot;  &amp;quot;90&amp;quot;  &amp;quot;91&amp;quot;  &amp;quot;92&amp;quot;  &amp;quot;93&amp;quot;  &amp;quot;95&amp;quot;  &amp;quot;96&amp;quot;  &amp;quot;97&amp;quot;  &amp;quot;98&amp;quot; 
## [89] &amp;quot;99&amp;quot;  &amp;quot;100&amp;quot; &amp;quot;101&amp;quot; &amp;quot;102&amp;quot; &amp;quot;103&amp;quot; &amp;quot;104&amp;quot; &amp;quot;105&amp;quot; &amp;quot;106&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Because &lt;code&gt;mangalList&lt;/code&gt; is not exported, you have to use the &lt;code&gt;:::&lt;/code&gt; operator to explicitely call it. Note that these functions may not work (quite yet) with the public database, because we will update the API later this week.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Animate networks with igraph</title>
     <link href="http://timotheepoisot.fr/2014/01/11/animate-networks-with-igraph/"/>
    <updated>2014-01-11T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;The &lt;code&gt;igraph&lt;/code&gt; package in &lt;code&gt;R&lt;/code&gt; is a good solution to manipulate networks. A few days ago, I had to produce an animated figure for a paper, and I really wanted to use &lt;code&gt;igraph&lt;/code&gt; to do it. As it turns out, it’s not overly complicated (you need to have &lt;code&gt;imagemagick&lt;/code&gt; installed, though.&lt;/p&gt;
&lt;p&gt;So as to provide a quick visualisation, let’s start with a simple dynamical model of a diamond food web (one primary producer, two consumers, one top predator, classic stuff). The “usual” way to represent the dynamics of biomass is to have four time series. The “captivating” way (good for talks!) is to animate the network, with each node size being proportional to its biomass at any time.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(igraph)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(simecol)

&lt;span class=&quot;co&quot;&gt;# A simple LV diamond food web model&lt;/span&gt;
glv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(time, init, parms) {
    N &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;init
    &lt;span class=&quot;kw&quot;&gt;with&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.list&lt;/span&gt;(parms), {
        d1 =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(rp -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(a1p *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;a2p *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;]))
        d2 =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(rc +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;a1p *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ap1 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
        d3 =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(rc +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;a2p *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ap2 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;])
        d4 =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;] *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;(rt +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ap1 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;] +&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ap1 *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;N[&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;])
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(d1, d2, d3, d4)))
    })
}

&lt;span class=&quot;co&quot;&gt;# Some default parameters&lt;/span&gt;
params &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;rp =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;1.1&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rc =&lt;/span&gt; -&lt;span class=&quot;fl&quot;&gt;0.2&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;rt =&lt;/span&gt; -&lt;span class=&quot;fl&quot;&gt;0.6&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a1p =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.8&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;a2p =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.4&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ap1 =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.21&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;ap2 =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.12&lt;/span&gt;)
init &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;)
times &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;seq&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;from =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;to =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;length =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)

&lt;span class=&quot;co&quot;&gt;# And the simulations...&lt;/span&gt;
output &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ode&lt;/span&gt;(init, times, &lt;span class=&quot;dt&quot;&gt;func =&lt;/span&gt; glv, &lt;span class=&quot;dt&quot;&gt;parms =&lt;/span&gt; params)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Nevermind that the parameters aren’t realistic at all, it’s not what matters for this example. At this point, we have a simulation running for 50 timesteps, with a total of 300 points. Now, let’s build a graph:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;adjacency &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;matrix&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;)
diamond &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;graph.adjacency&lt;/span&gt;(adjacency)
layout &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;layout.fruchterman.reingold&lt;/span&gt;(diamond)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can start building a loop to create all networks for each time. The trick is that &lt;code&gt;igraph&lt;/code&gt; accepts vectors for allmost all edges and vertex attributes. It can be used to change the color, size, label, etc. An important point is that, by default, the layout of each plot is scaled and center. But in our case, it’s important that it’s fixed for all plots, so we’ll just need to add &lt;code&gt;rescale = FALSE&lt;/code&gt;, and give explicit &lt;code&gt;xlim&lt;/code&gt; and &lt;code&gt;ylim&lt;/code&gt;; this way, the center of each vertex is always at the same position.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# We&amp;#39;ll make sure that the maximal biomass is not too big&lt;/span&gt;
MaxBio &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;max&lt;/span&gt;(output[, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;])
&lt;span class=&quot;kw&quot;&gt;png&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;file =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;biomass_%04d.png&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;width =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;height =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;300&lt;/span&gt;)

for (i in &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;nrow&lt;/span&gt;(output))) {
    Biomass &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;output[i, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
    &lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(diamond, &lt;span class=&quot;dt&quot;&gt;layout =&lt;/span&gt; layout, &lt;span class=&quot;dt&quot;&gt;vertex.size =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt; *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Biomass, &lt;span class=&quot;dt&quot;&gt;rescale =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, 
        &lt;span class=&quot;dt&quot;&gt;xlim =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;range&lt;/span&gt;(layout[, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;dt&quot;&gt;ylim =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;range&lt;/span&gt;(layout[, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;]))
}
&lt;span class=&quot;kw&quot;&gt;dev.off&lt;/span&gt;()

&lt;span class=&quot;co&quot;&gt;# The we use ImageMagick to convert all images to a gif file&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;system&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;convert -delay 5 biomass_*.png animation_biomass.gif&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;# And remove the images&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;file.remove&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;list.files&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;pattern =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;biomass_&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And here is the result:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/rfig/animation_biomass.gif&quot; alt=&quot;Animation&quot; /&gt;&lt;figcaption&gt;Animation&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Clearly it’s not extremely good looking, but it can help show the dynamics of networks. An interesting thing is that you can also &lt;em&gt;hide&lt;/em&gt; some edges or vertices, so it’s possible to show temporal dynamics.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Examples of mangal in action</title>
     <link href="http://timotheepoisot.fr/2014/01/09/mangal-in-action/"/>
    <updated>2014-01-09T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;In the two previous posts (see &lt;a href=&quot;http://timotheepoisot.fr/2014/01/07/mangal-database-networks/&quot;&gt;Part 1&lt;/a&gt; and &lt;a href=&quot;http://timotheepoisot.fr/2014/01/08/mangal-add-data/&quot;&gt;Part 2&lt;/a&gt;), I’ve presented the basics of using &lt;code&gt;mangal&lt;/code&gt; and the &lt;code&gt;rmangal&lt;/code&gt; package to access, deposit, and edit data about ecological networks. The final post in the series is going to be slightly more fun: I’ll illustrate some use cases of things you can potentially do with the database. We will start from the representation of a network in space, then move on to measuring beta-diversity in the dataset, and end with some more classical species-links relationships.&lt;/p&gt;
&lt;h1 id=&quot;setting-things-up&quot;&gt;Setting things up&lt;/h1&gt;
&lt;p&gt;We’ll need to pull the latest version of &lt;code&gt;rmangal&lt;/code&gt;, as usual. In addition, we’ll need a few other packages.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stringsAsFactors =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
if (&lt;span class=&quot;kw&quot;&gt;getOption&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;) ==&lt;span class=&quot;st&quot;&gt; &amp;quot;&amp;quot;&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;unzip =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;rmangal&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;mangal-wg&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;betalink&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;tpoisot&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(rmangal)
&lt;span class=&quot;co&quot;&gt;# Let&amp;#39;s connect to the database&lt;/span&gt;
URL &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;http://localhost:8000&amp;quot;&lt;/span&gt;
api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;rmangal::&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;(URL)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(betalink)
&lt;span class=&quot;co&quot;&gt;# Tools for spatial analyses&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(sp)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RgoogleMaps)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(RColorBrewer)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&quot;margin&quot;&gt;Ricciardi et al. (2010) &lt;em&gt;Env Biol Fishes&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1007/s10641-010-9606-0&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt;I will do everything using a dataset released by Ricciardi and colleagues. The &lt;a href=&quot;http://www.nceas.ucsb.edu/interactionweb/html/ricciardi-et-al-2010.html&quot;&gt;original data&lt;/a&gt; are on the &lt;em&gt;Interaction Web DataBase&lt;/em&gt;. This dataset describes 16 anemonefish/fishes mutualistic networks in Indonesia. It’s an extremely cool dataset, because (i) there are a lot of sites in a small space, (ii) a lot of species are in common across sites, and (iii) anemonefishes. So I’ve uploaded these data in my local copy of the database, and I’m going to illustrate a few uses-cases. The only “manual” operation was determining the spatial coordinates in each networks, based on the map presented in the original paper.&lt;/p&gt;
&lt;h1 id=&quot;use-case-1-spatialized-network&quot;&gt;Use-case 1: spatialized network&lt;/h1&gt;
&lt;p&gt;&lt;span class=&quot;margin&quot;&gt;Bascompte (2009) &lt;em&gt;Science&lt;/em&gt; &lt;a href=&quot;http://dx.doi.org/10.1126/science.1170749&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt;There is a really cool figure in one of Jordi Bascompte’s paper, in which a network is plotted in space, and the position of each species is the center of mass of its area. This is an interesting way to plot networks when spatial information is available, so let’s do just that.&lt;/p&gt;
&lt;p&gt;We start by getting the dataset:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Dataset &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getDataset&lt;/span&gt;(api, &lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;)
Dataset$networks&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;32&amp;quot; &amp;quot;33&amp;quot; &amp;quot;18&amp;quot; &amp;quot;19&amp;quot; &amp;quot;20&amp;quot; &amp;quot;21&amp;quot; &amp;quot;22&amp;quot; &amp;quot;23&amp;quot; &amp;quot;24&amp;quot; &amp;quot;25&amp;quot; &amp;quot;26&amp;quot; &amp;quot;27&amp;quot; &amp;quot;28&amp;quot; &amp;quot;29&amp;quot;
## [15] &amp;quot;30&amp;quot; &amp;quot;31&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, this dataset has a lot of networks. So we’ll do to things. First, we will get a list of all network objects, because they have the metadata we need:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Networks &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;alply&lt;/span&gt;(Dataset$networks, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, function(x) &lt;span class=&quot;kw&quot;&gt;getNetwork&lt;/span&gt;(api, x))
Networks[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$latitude&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1.651&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, we will call the &lt;code&gt;network_as_graph&lt;/code&gt; function to get all the interactions, and associated informations on the taxa. We will also convert these graphs into matrices, because that will be easier for some of the next steps.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Graphs &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;llply&lt;/span&gt;(Networks, function(x) &lt;span class=&quot;kw&quot;&gt;network_as_graph&lt;/span&gt;(api, x$id))
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(Graphs) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(Networks, function(x) x$name)
Matrices &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;llply&lt;/span&gt;(Graphs, get.adjacency, &lt;span class=&quot;dt&quot;&gt;sparse =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s now get a table with the sites spatial coordinates:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Coord &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ldply&lt;/span&gt;(Networks, function(x) &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; x$name, &lt;span class=&quot;dt&quot;&gt;lon =&lt;/span&gt; x$longitude, &lt;span class=&quot;dt&quot;&gt;lat =&lt;/span&gt; x$latitude))
&lt;span class=&quot;kw&quot;&gt;rownames&lt;/span&gt;(Coord) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Coord$name
Coord &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Coord[, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;lon&amp;quot;&lt;/span&gt;)]
Coord$lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(Coord$lat)
Coord$lon &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.numeric&lt;/span&gt;(Coord$lon)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(Coord)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##                 lat   lon
## Tanjung Kopi  1.651 124.7
## Tanjung Pisok 1.578 124.8
## bahowo        1.585 124.8
## Kampung Bajo  1.608 124.9
## Batu Kapal    1.788 124.8
## Bualo         1.616 124.7&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Good!&lt;/p&gt;
&lt;p&gt;Almost final steps, let’s (i) get the list of species in each site, (ii) make a community matrix from this, and (iii) calculate the center of mass of each species based on its occurence in each of the 16 locations.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# Get the list of species&lt;/span&gt;
sp_by_site &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;llply&lt;/span&gt;(Graphs, function(x) &lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;V&lt;/span&gt;(x)$name))
sp_list &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;unique&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(sp_by_site))

&lt;span class=&quot;co&quot;&gt;# Species-by-site matrix&lt;/span&gt;
M &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;matrix&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ncol =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(sp_list), &lt;span class=&quot;dt&quot;&gt;nrow =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(sp_by_site))
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(M) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sp_list
&lt;span class=&quot;kw&quot;&gt;rownames&lt;/span&gt;(M) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sp_by_site)
for (site in &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(sp_by_site))) M[&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(sp_by_site)[site], sp_by_site[[site]]] =&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;# Get the center of mass for each species&lt;/span&gt;
sp_center &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;adply&lt;/span&gt;(M, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, function(x) &lt;span class=&quot;kw&quot;&gt;colMeans&lt;/span&gt;(Coord[&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(x)[x &amp;gt;&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;], ]))
&lt;span class=&quot;kw&quot;&gt;rownames&lt;/span&gt;(sp_center) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sp_center[, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
sp_center &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;sp_center[, -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(sp_center)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##                           lat   lon
## Entacmaea quadricolor   1.599 124.8
## Heteractis aurora       1.677 124.8
## Heteractis crispa       1.614 124.8
## Stichodactyla mertensii 1.625 124.8
## Heteractis magnifica    1.601 124.8
## Amphiprion melanopus    1.620 124.7&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, we use the &lt;code&gt;metaweb&lt;/code&gt; function from &lt;code&gt;betalink&lt;/code&gt; to get the regional network, as an &lt;code&gt;igraph&lt;/code&gt; graph:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;Mw &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;graph.adjacency&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;metaweb&lt;/span&gt;(Matrices)$web)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And now, we’ll use the &lt;code&gt;RgoogleMaps&lt;/code&gt; package to plot a map, and overlay the spatialized network on top:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;co&quot;&gt;# But first we need this function to convert spatial coordinates&lt;/span&gt;
ll_to_gm &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;function(Map, ll) {
    &lt;span class=&quot;co&quot;&gt;# Lat. conversion&lt;/span&gt;
    lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ll$lat
    lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lat -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Map$lat.center
    lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lat/(Map$BBOX$ur[, &lt;span class=&quot;st&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Map$BBOX$ll[, &lt;span class=&quot;st&quot;&gt;&amp;quot;lat&amp;quot;&lt;/span&gt;])
    lat &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lat *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;640&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;# Lat. conversion&lt;/span&gt;
    lon &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;ll$lon
    lon &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lon -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Map$lon.center
    lon &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lon/(Map$BBOX$ur[, &lt;span class=&quot;st&quot;&gt;&amp;quot;lon&amp;quot;&lt;/span&gt;] -&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;Map$BBOX$ll[, &lt;span class=&quot;st&quot;&gt;&amp;quot;lon&amp;quot;&lt;/span&gt;])
    lon &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;lon *&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;640&lt;/span&gt;
    ## Return matrix
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;cbind&lt;/span&gt;(lon, lat))
}
&lt;span class=&quot;co&quot;&gt;# Plot a map&lt;/span&gt;
center_point &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;colMeans&lt;/span&gt;(sp_center)
Map &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;GetMap&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;center =&lt;/span&gt; center_point, &lt;span class=&quot;dt&quot;&gt;zoom =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;SCALE =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;par&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;pty =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;s&amp;quot;&lt;/span&gt;)
colors &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;brewer.pal&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Set1&amp;quot;&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;brewer.pal&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;Set2&amp;quot;&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;PlotOnStaticMap&lt;/span&gt;(Map)
&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(Mw, &lt;span class=&quot;dt&quot;&gt;layout =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;jitter&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;ll_to_gm&lt;/span&gt;(Map, sp_center), &lt;span class=&quot;dt&quot;&gt;amount =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;), &lt;span class=&quot;dt&quot;&gt;rescale =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;add =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.size =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;600&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.label =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.color =&lt;/span&gt; colors, 
    &lt;span class=&quot;dt&quot;&gt;edge.arrow.size =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.25&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;edge.color =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;legend&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;bottomleft&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;fill =&lt;/span&gt; colors, &lt;span class=&quot;dt&quot;&gt;legend =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;V&lt;/span&gt;(Mw)$name, &lt;span class=&quot;dt&quot;&gt;inset =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.02&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;cex =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.7&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;bty =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;n&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/rfig/mangal_make_map_network.png&quot; alt=&quot;plot of chunk mangal_make_map_network&quot; /&gt;&lt;figcaption&gt;plot of chunk mangal_make_map_network&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;And here we are! It might not be the best-looking graph ever, but I was fairly surprised that it was so easy to produce.&lt;/p&gt;
&lt;h1 id=&quot;use-case-2-network-β-diversity&quot;&gt;Use-case 2: network β-diversity&lt;/h1&gt;
&lt;p&gt;For use-case number two, I will use the functions in &lt;code&gt;betalink&lt;/code&gt; to do a quick illustration of how network β-diversity depends on the distance between two networks. In the first use case, we have created a &lt;code&gt;Matrices&lt;/code&gt; objects, which is a list of matrices. So we can simply do:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;bdiv &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;betalink.dist&lt;/span&gt;(Matrices)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We’ll add the spatial distance between sites, using a function from the &lt;code&gt;sp&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;GeoDist &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;spDists&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;as.matrix&lt;/span&gt;(Coord), &lt;span class=&quot;dt&quot;&gt;longlat =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;colnames&lt;/span&gt;(GeoDist) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownames&lt;/span&gt;(GeoDist) &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;rownames&lt;/span&gt;(Coord)
bdiv$Space &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;as.dist&lt;/span&gt;(GeoDist)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And now, some plots:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;par&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;mfcol =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;))
&lt;span class=&quot;kw&quot;&gt;with&lt;/span&gt;(bdiv, {
    &lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(Space, WN, &lt;span class=&quot;dt&quot;&gt;pch =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;19&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Distance (in km.)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Network dissim. (all species)&amp;quot;&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(Space, OS, &lt;span class=&quot;dt&quot;&gt;pch =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;19&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Distance (in km.)&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Network dissim. (common species)&amp;quot;&lt;/span&gt;)
})&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/rfig/betadiv_rmangal_plots.png&quot; alt=&quot;plot of chunk betadiv_rmangal_plots&quot; /&gt;&lt;figcaption&gt;plot of chunk betadiv_rmangal_plots&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;And here is a cool new mini-result: the dissimilarity of networks increases with distance overal, but not when you only account for the species which are shared between two locations.&lt;/p&gt;
&lt;h1 id=&quot;use-case-3-link-species-relationships&quot;&gt;Use-case 3: link-species relationships&lt;/h1&gt;
&lt;p&gt;Let’s end with a more classical example: in this system, what is the relationship between number of species (S), and number of interactions (L)? This information is super easy to get with a little bit of &lt;code&gt;plyr&lt;/code&gt; magic:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;LS &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ldply&lt;/span&gt;(Graphs, function(x) &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;S =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;V&lt;/span&gt;(x)), &lt;span class=&quot;dt&quot;&gt;L =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;length&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;E&lt;/span&gt;(x))))
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(LS)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##             .id  S  L
## 1  Tanjung Kopi 10  8
## 2 Tanjung Pisok  9  7
## 3        bahowo 11 10
## 4  Kampung Bajo  6  4
## 5    Batu Kapal  5  4
## 6         Bualo  9  8&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The only thing left is to plot this table:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(LS[, &lt;span class=&quot;kw&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)], &lt;span class=&quot;dt&quot;&gt;log =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;xy&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;xlab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Species&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;ylab =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Links&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;pch =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;19&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/rfig/mangal_demo_ls_png.png&quot; alt=&quot;plot of chunk mangal_demo_ls.png&quot; /&gt;&lt;figcaption&gt;plot of chunk mangal_demo_ls.png&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;We find the expect positive, log/log relationship. And it only required three lines of code!&lt;/p&gt;
&lt;h1 id=&quot;to-conclude&quot;&gt;To conclude&lt;/h1&gt;
&lt;p&gt;These three use cases are (I think) good examples of what can be done with the &lt;code&gt;rmangal&lt;/code&gt; package. I’ll refine them a little bit to add in the paper. If you have nay any suggestions, that would be greatly appreciated as well!&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Uploading data into mangal</title>
     <link href="http://timotheepoisot.fr/2014/01/08/mangal-add-data/"/>
    <updated>2014-01-08T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;In the first part, I introduced &lt;code&gt;mangal&lt;/code&gt;, the database and associated &lt;code&gt;R&lt;/code&gt; package to interact with ecological networks. In the second part, I’ll give an overview of how to upload and curate your data. In the last part, we used functions starting with &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;list&lt;/code&gt;. This time, we will use the &lt;code&gt;add&lt;/code&gt; and &lt;code&gt;patch&lt;/code&gt; functions, as they allow to change resouces on the server. There are a few important informations to have before we start.&lt;/p&gt;
&lt;p&gt;First, working on the server is &lt;em&gt;for real&lt;/em&gt;, so please be careful. But take the opportunity of the testing phase to try to break the database in new, innovative ways! Second, the licence under which the data are released is the &lt;em&gt;CC-0&lt;/em&gt; waiver. In short, when data are uploaded in the database, they are frelly available, for all to see and use. Almost all data sharing services use this license for data. Finally, the database is &lt;em&gt;add-only&lt;/em&gt;, which means that you can’t remove data (but I can, in case things go exceptionally wrong).&lt;/p&gt;
&lt;p&gt;In this post, we’ll see (i) how to create an account on the database, (ii) how to create and populate a dataset, and (iii) how to modify the interactions after sending them. You are of coure invited to try similar things. Note that the database won’t accept objects with duplicated names, so if you try to re-upload some of the taxa in this example, it most likely won’t work.&lt;/p&gt;
&lt;h1 id=&quot;setting-things-up&quot;&gt;Setting things up&lt;/h1&gt;
&lt;p&gt;As always, we’ll start by getting the latest release of &lt;code&gt;rmangal&lt;/code&gt;. And we’ll also get the latest release of &lt;code&gt;taxize&lt;/code&gt;, because there is a really neat trick I want to show you (in short: automated curation).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stringsAsFactors =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
if (&lt;span class=&quot;kw&quot;&gt;getOption&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;) ==&lt;span class=&quot;st&quot;&gt; &amp;quot;&amp;quot;&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;unzip =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;rmangal&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;mangal-wg&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(rmangal)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;taxize&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;ropensci&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(taxize)&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;signing-up&quot;&gt;Signing-up&lt;/h1&gt;
&lt;p&gt;Uploading and curating data require that you are logged in. The reason is simple: each object in the database has an &lt;code&gt;owner&lt;/code&gt; property, and this owner becomes you every time you modify an object. Signing up can be done directly from &lt;code&gt;R&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;()
me &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;signUp&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;my_user_name&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;my_password&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;co&quot;&gt;# This line will log you with your newly acquired identifiers!&lt;/span&gt;
api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;usr =&lt;/span&gt; me$username, &lt;span class=&quot;dt&quot;&gt;pwd =&lt;/span&gt; me$password)
me&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $email
## [1] &amp;quot;&amp;quot;
## 
## $first_name
## [1] &amp;quot;&amp;quot;
## 
## $id
## [1] 3
## 
## $last_name
## [1] &amp;quot;&amp;quot;
## 
## $password
## [1] &amp;quot;my_password&amp;quot;
## 
## $username
## [1] &amp;quot;my_user_name&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Before we start, let’s add some personal informations to your profile:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;me$first_name &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;Fake&amp;quot;&lt;/span&gt;
me$last_name &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;People&amp;quot;&lt;/span&gt;
me$email &amp;lt;-&lt;span class=&quot;st&quot;&gt; &amp;quot;me@fake.people&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we just need to update this information on the server:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;me &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;patchUser&lt;/span&gt;(api, me)
me&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $email
## [1] &amp;quot;me@fake.people&amp;quot;
## 
## $first_name
## [1] &amp;quot;Fake&amp;quot;
## 
## $id
## [1] 3
## 
## $last_name
## [1] &amp;quot;People&amp;quot;
## 
## $password
## [1] &amp;quot;my_password&amp;quot;
## 
## $username
## [1] &amp;quot;my_user_name&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next time you want to work on data, you’ll just need to start your session by&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;(URL, &lt;span class=&quot;dt&quot;&gt;usr =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;my_username&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;pwd =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;my_password&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;putting-data-on-the-database&quot;&gt;Putting data on the database&lt;/h1&gt;
&lt;p&gt;In the previous part, I may have mentionned that the usual way to get a network is to start at the &lt;code&gt;dataset&lt;/code&gt; level, then go all the way down to the &lt;code&gt;taxa&lt;/code&gt;. When uploading data, you need to follow the opposite direction. Let’s say that we want to send data about what (probably) happens in the &lt;em&gt;Isle Royale National Park&lt;/em&gt;: wolves eat mooses, mooses eat balsam fir.&lt;/p&gt;
&lt;p&gt;As for &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;list&lt;/code&gt;, the functions to modify data follow a single naming convention: either &lt;code&gt;patch&lt;/code&gt; or &lt;code&gt;add&lt;/code&gt;, and the name of the resource with its first letter capitalized.&lt;/p&gt;
&lt;h2 id=&quot;creating-taxa&quot;&gt;Creating taxa&lt;/h2&gt;
&lt;p&gt;The first thing we need to do is create a few &lt;code&gt;taxa&lt;/code&gt; objects. In case you don’t remember how a &lt;code&gt;taxa&lt;/code&gt; is formatted, you can call&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;whatIs&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;taxa&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##         field                                        help    type  null
## 1        bold             The BOLD identifier of the taxa integer  TRUE
## 2 description             A short description of the taxa  string  TRUE
## 3        gbif             The GBIF identifier of the taxa integer  TRUE
## 5        itis             The ITIS identifier of the taxa integer  TRUE
## 6        name             The scientific name of the taxa  string FALSE
## 7        ncbi    The NCBI Taxonomy identifier of the taxa integer  TRUE
## 9  vernacular The vernacular name of the taxa, in English  string FALSE
##   unique values
## 1   TRUE       
## 2  FALSE       
## 3   TRUE       
## 5   TRUE       
## 6   TRUE       
## 7   TRUE       
## 9  FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So we’ll want to create three taxa:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;moose &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Alces americanus&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vernacular =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;American moose&amp;quot;&lt;/span&gt;)
wolf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Canis lupus&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vernacular =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Gray wolf&amp;quot;&lt;/span&gt;)
balsam &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Abies balsamea&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vernacular =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Balsam fir&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, let’s put them in the database:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;wolf &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addTaxa&lt;/span&gt;(api, wolf)
moose &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addTaxa&lt;/span&gt;(api, moose)
balsam &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addTaxa&lt;/span&gt;(api, balsam)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can check that our taxa are indeed in the database with&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;getTaxa&lt;/span&gt;(api, wolf$id)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $bold
## NULL
## 
## $description
## NULL
## 
## $gbif
## NULL
## 
## $id
## [1] &amp;quot;20&amp;quot;
## 
## $itis
## NULL
## 
## $name
## [1] &amp;quot;Canis lupus&amp;quot;
## 
## $ncbi
## NULL
## 
## $owner
## [1] &amp;quot;my_user_name&amp;quot;
## 
## $vernacular
## [1] &amp;quot;Gray wolf&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;creating-interactions&quot;&gt;Creating interactions&lt;/h2&gt;
&lt;p&gt;We will now create interactions between these taxa. Once more, have a look at &lt;code&gt;whatIs(api, &#39;interaction&#39;)&lt;/code&gt;, and in particular pay attention to the &lt;code&gt;values&lt;/code&gt; column of the &lt;code&gt;ecotype&lt;/code&gt; field. It tells you that &lt;code&gt;ecotype&lt;/code&gt; (the type of ecological interaction betwee two organisms), can only be one of:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;strsplit&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;subset&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;whatIs&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;interaction&amp;quot;&lt;/span&gt;), field ==&lt;span class=&quot;st&quot;&gt; &amp;quot;ecotype&amp;quot;&lt;/span&gt;)$values, &lt;span class=&quot;st&quot;&gt;&amp;quot;, &amp;quot;&lt;/span&gt;)[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;predation&amp;quot;                 &amp;quot;ectoparasitism&amp;quot;           
##  [3] &amp;quot;endoparasitism&amp;quot;            &amp;quot;intra-cellular parasitism&amp;quot;
##  [5] &amp;quot;parasitoidism&amp;quot;             &amp;quot;mycoheterotrophy&amp;quot;         
##  [7] &amp;quot;antixenosis&amp;quot;               &amp;quot;teletoxy&amp;quot;                 
##  [9] &amp;quot;amensalism&amp;quot;                &amp;quot;antibiosis&amp;quot;               
## [11] &amp;quot;allelopathy&amp;quot;               &amp;quot;competition&amp;quot;              
## [13] &amp;quot;facilitation&amp;quot;              &amp;quot;refuge creation&amp;quot;          
## [15] &amp;quot;inquilinism&amp;quot;               &amp;quot;phoresis&amp;quot;                 
## [17] &amp;quot;epibiosis&amp;quot;                 &amp;quot;pollination&amp;quot;              
## [19] &amp;quot;mutualistic symbiosis&amp;quot;     &amp;quot;zoochory&amp;quot;                 
## [21] &amp;quot;mutual protection&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that this list of terms will probably increase in the future. In any case, we have enough informations to start writing our interactions:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;w_e_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;taxa_from =&lt;/span&gt; wolf, &lt;span class=&quot;dt&quot;&gt;taxa_to =&lt;/span&gt; moose, &lt;span class=&quot;dt&quot;&gt;ecotype =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;predation&amp;quot;&lt;/span&gt;)
m_e_b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;taxa_from =&lt;/span&gt; moose, &lt;span class=&quot;dt&quot;&gt;taxa_to =&lt;/span&gt; balsam, &lt;span class=&quot;dt&quot;&gt;ecotype =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;herbivory&amp;quot;&lt;/span&gt;)
w_e_m &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addInteraction&lt;/span&gt;(api, w_e_m)
m_e_b &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addInteraction&lt;/span&gt;(api, m_e_b)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Congratulations! Note that within the &lt;code&gt;R&lt;/code&gt; package, it’s perfectly acceptable to pass the whole &lt;code&gt;taxa&lt;/code&gt; object (but if you want to interact with the API, you need to pass only the URI, and if you want to interact directly with the API, chances are you knew that already…).&lt;/p&gt;
&lt;h2 id=&quot;wrapping-things-up&quot;&gt;Wrapping things up&lt;/h2&gt;
&lt;p&gt;At this point, we’re almost done. We simply need to wrap our interactions in a &lt;code&gt;network&lt;/code&gt; object:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;isle_royale &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addNetwork&lt;/span&gt;(api, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Isle Royale National Park&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;description =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Or at least a simplified version of it&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;interactions =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(w_e_m, m_e_b), &lt;span class=&quot;dt&quot;&gt;metaweb =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;TRUE&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;metaweb&lt;/code&gt; attribute comes from our &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pubmed/22994257&quot;&gt;paper on network beta-diversity&lt;/a&gt;. If you are reporting regionally observed or infered interactions, then it is &lt;code&gt;TRUE&lt;/code&gt;. if you have been sitting in the field looking at stuff, then it’s &lt;code&gt;FALSE&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And finally, even if we only have one network, we will publish it as a dataset:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ir_dataset &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addDataset&lt;/span&gt;(api, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;name =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;North-American Terrestrial food webs&amp;quot;&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;networks =&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(isle_royale)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And we’re done!&lt;/p&gt;
&lt;h1 id=&quot;modifying-data&quot;&gt;Modifying data&lt;/h1&gt;
&lt;p&gt;In this part, we will go through the different ways to alter data already in the database.&lt;/p&gt;
&lt;h2 id=&quot;adding-some-attributes&quot;&gt;Adding some attributes&lt;/h2&gt;
&lt;p&gt;Now, let’s add some informations to our data. First, we have told almost nothing about where our network is in space. We’ll pull it from the database, and add the &lt;code&gt;latitude&lt;/code&gt; and &lt;code&gt;longitude&lt;/code&gt; attribute:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;isle_royale &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getNetwork&lt;/span&gt;(api, isle_royale$id)
isle_royale$latitude &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;fl&quot;&gt;48.015&lt;/span&gt;
isle_royale$longitude &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;-&lt;span class=&quot;fl&quot;&gt;88.831&lt;/span&gt;
isle_royale &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;patchNetwork&lt;/span&gt;(api, isle_royale)
isle_royale&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $date
## NULL
## 
## $description
## [1] &amp;quot;Or at least a simplified version of it&amp;quot;
## 
## $environment
## list()
## 
## $id
## [1] &amp;quot;3&amp;quot;
## 
## $interactions
## [1] &amp;quot;18&amp;quot; &amp;quot;19&amp;quot;
## 
## $latitude
## [1] &amp;quot;48.015&amp;quot;
## 
## $longitude
## [1] &amp;quot;-88.831&amp;quot;
## 
## $metaweb
## [1] TRUE
## 
## $name
## [1] &amp;quot;Isle Royale National Park&amp;quot;
## 
## $owner
## [1] &amp;quot;my_user_name&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Because the &lt;code&gt;ir_dataset&lt;/code&gt; dataset contains a &lt;em&gt;reference&lt;/em&gt; to the object we just modified, there is no need to alter it in any way.&lt;/p&gt;
&lt;p&gt;At this point, you can have a look at &lt;code&gt;http://mangal.uqar.ca/data/&lt;/code&gt;, and on the map, there should be a little dot somewhere between Ontario and Wisconsin, representing the network.&lt;/p&gt;
&lt;h2 id=&quot;adding-new-relations&quot;&gt;Adding new relations&lt;/h2&gt;
&lt;p&gt;Let’s say that we want to provide a short bibliography along with the data. An important paper on this system is &lt;em&gt;The Rise and Fall of Isle Royale Wolves&lt;/em&gt;, by Peterson &amp;amp; Page. We know the DOI of this article (&lt;code&gt;10.2307/1381751&lt;/code&gt;), so we’ll just add a reference to the dataset. Datasets have &lt;code&gt;papers&lt;/code&gt; and &lt;code&gt;data&lt;/code&gt; fields, that point to &lt;code&gt;reference&lt;/code&gt; objects. First, we will create a reference (again, look at &lt;code&gt;whatIs(api, &#39;reference&#39;)&lt;/code&gt; to see the possible field (and beware, there is a typo, the &lt;code&gt;jstorid&lt;/code&gt; field is called &lt;code&gt;jsonid&lt;/code&gt;, I will fix that really soon).&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;peterson_n_page &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;addReference&lt;/span&gt;(api, &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;doi =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;10.2307/1381751&amp;quot;&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, we need to add the reference to the &lt;code&gt;papers&lt;/code&gt; field of the &lt;code&gt;dataset&lt;/code&gt; object:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;ir_dataset$papers &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(peterson_n_page)
ir_dataset &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;patchDataset&lt;/span&gt;(api, ir_dataset)
ir_dataset&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $data
## list()
## 
## $description
## NULL
## 
## $id
## [1] &amp;quot;2&amp;quot;
## 
## $name
## [1] &amp;quot;North-American Terrestrial food webs&amp;quot;
## 
## $networks
## [1] &amp;quot;3&amp;quot;
## 
## $owner
## [1] &amp;quot;my_user_name&amp;quot;
## 
## $papers
## [1] &amp;quot;1&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And if you go to &lt;code&gt;http://mangal.uqar.ca/data/dataset/&amp;lt;id&amp;gt;/&lt;/code&gt; (where &lt;code&gt;&amp;lt;id&amp;gt;&lt;/code&gt; is whatever number is in the &lt;code&gt;id&lt;/code&gt; field of the dataset), you will see a list of the references.&lt;/p&gt;
&lt;h2 id=&quot;using-the-power-of-open-science-for-good&quot;&gt;Using the power of open science for good&lt;/h2&gt;
&lt;p&gt;When describing the taxa, we only gave the latin and vernacular names. It’s good, but if we want to really take advantage of all the great tools we have, we will need a little more. One solution is to do a bit of googling, and just copy/paste the taxonomic identifiers and patch the taxa this way. Another solution is to use &lt;code&gt;taxize&lt;/code&gt;. &lt;code&gt;taxize&lt;/code&gt; has a function to get the NCBI identifiers from the latin name, which is perfect for our case:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;for (tax in &lt;span class=&quot;kw&quot;&gt;list&lt;/span&gt;(wolf, moose, balsam)) {
    if (&lt;span class=&quot;kw&quot;&gt;is.null&lt;/span&gt;(tax$ncbi)) {
        identifier &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;get_uid&lt;/span&gt;(tax$name, &lt;span class=&quot;dt&quot;&gt;ask =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
        if (!&lt;span class=&quot;kw&quot;&gt;is.na&lt;/span&gt;(identifier)) {
            tax$ncbi &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;identifier[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]
            &lt;span class=&quot;kw&quot;&gt;patchTaxa&lt;/span&gt;(api, tax)
        }
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
## Retrieving data for taxon &amp;#39;Canis lupus&amp;#39;
## 
## 
## Retrieving data for taxon &amp;#39;Alces americanus&amp;#39;
## 
## 
## Retrieving data for taxon &amp;#39;Abies balsamea&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s get the whole network and see that the NCBI identifiers have been added:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;network_as_graph&lt;/span&gt;(api, isle_royale$id)
&lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;V&lt;/span&gt;(g)$ncbi)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 999462  90345   9612&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There is probably more and more we can do using combination of packages, I’ll try to show some possibilities in use-cases.&lt;/p&gt;
&lt;h1 id=&quot;what-now&quot;&gt;What now?&lt;/h1&gt;
&lt;p&gt;As before, keep in mind that the test database will be periodically wiped clean, so don’t use it to do some actual data deposition (yet). But it would be really cool for you to try writing scripts to upload/modify your datasets, and tell me if anything goes wrong. Meanwhile, I’m working on preparing use cases (including one to automatically upload your data on &lt;em&gt;figshare&lt;/em&gt; and returning the DOI), which I’ll publish (hopefully) later this week, or early next week. As always, use the &lt;a href=&quot;https://github.com/mangal-wg/rmangal/issues?state=open&quot;&gt;GitHub page&lt;/a&gt; to report issues.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Introducing mangal, a database for ecological networks</title>
     <link href="http://timotheepoisot.fr/2014/01/07/mangal-database-networks/"/>
    <updated>2014-01-07T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Working with data on ecological networks is usually a huge mess. Most of the time, what you have is a series of matrices with &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;1&lt;/code&gt;, and in the best cases, another file with some associated metadata. The other issue is that, simply put, data on ecological networks are hard to get. The &lt;a href=&quot;http://www.nceas.ucsb.edu/interactionweb/&quot;&gt;&lt;em&gt;Interaction Web Database&lt;/em&gt;&lt;/a&gt; has some, but it’s not as actively maintained as it should, and the data are not standardized in any way. When you need to pull a lot of networks to compare them, it means that you need to go through a long, tedious, and error-prone process of cleaning and preparing the data. It should not be that way, and that is the particular problem I’ve been trying to solve since this spring.&lt;/p&gt;
&lt;p&gt;About a year ago, I discussed why &lt;a href=&quot;http://timotheepoisot.fr/2012/11/23/how-to-represent-networks/&quot;&gt;we should have a common language&lt;/a&gt; to represent interaction networks. So with this idea in mind, and with great feedback from colleagues, I assembled a series of &lt;code&gt;JSON&lt;/code&gt; schemes to represent networks, in a way that will allow programmatic interaction with the data. And I’m now super glad to announce that I am looking for beta-testers, before I release the tool in a formal way. This post is the first part of a series of two or three posts, which will give informations about the project, how to interact with the database, and how to contribute data. I’ll probably try to write a few use-cases, but if reading these posts inspire you, feel free to suggest some!&lt;/p&gt;
&lt;h1 id=&quot;so-what-is-that-about&quot;&gt;So what is that about?&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;mangal&lt;/code&gt; (another word for a mangrove, and a type of barbecue) is a way to represent and interact with networks in a way that is (i) relatively easy and (ii) allows for powerful analyses. It’s built around a data format, &lt;em&gt;i.e.&lt;/em&gt; a common language to represent ecological networks. You can have an overview of the data format &lt;a href=&quot;http://mangal.uqar.ca/doc/spec/&quot;&gt;on the website&lt;/a&gt;. The data format was conceived with two ideas in mind. First, it must makes sense from an ecological point of view. Second, it must be easy to use to exchange data, send them to database, and get them through APIs. Going on a website to download a text file (or an Excel one) should be a thing of the past, and the data format is built around the idea that everything should be done in a programmatic way.&lt;/p&gt;
&lt;p&gt;Very importantly, the data specification explains how data should be formatted when they are &lt;em&gt;exchanged&lt;/em&gt;, not when they are used. The &lt;code&gt;R&lt;/code&gt; package, notably, uses &lt;code&gt;igraph&lt;/code&gt; to manipulate networks. It means that anyone with a database of ecological networks can write an API to expose these data in the &lt;code&gt;mangal&lt;/code&gt; format, and in turn, anyone can access the data with the URL of the API as the only information.&lt;/p&gt;
&lt;p&gt;Because everyone uses &lt;code&gt;R&lt;/code&gt;, as I’ve mentionned above, we are also releasing a &lt;code&gt;R&lt;/code&gt; package (unimaginatively titled &lt;code&gt;rmangal&lt;/code&gt;). You can &lt;a href=&quot;https://github.com/mangal-wg/rmangal&quot;&gt;get it from &lt;em&gt;GitHub&lt;/em&gt;&lt;/a&gt;, and we’ll see in a minute how to install it until it is released on CRAN. Most of these posts will deal with how to use the &lt;code&gt;R&lt;/code&gt; package, and what can be done with it. Ideally, you won’t need to go on the website &lt;em&gt;at all&lt;/em&gt; to interact with the data (but just to make sure you do, the website has some nice eye-candy, with clickable maps and animated networks).&lt;/p&gt;
&lt;h1 id=&quot;things-to-know-before-getting-started&quot;&gt;Things to know before getting started&lt;/h1&gt;
&lt;p&gt;As I’ve mentionned above, I’m looking for people to give the database and package a test before I move on with the release. A &lt;strong&gt;very important point&lt;/strong&gt; is that, because this is a testing period, the database will be emptied quiet frequently. So do not share what you put on the database at the moment. Basically, until the first version of the &lt;code&gt;rmangal&lt;/code&gt; package hits CRAN, consider that all data may be wiped at any moment.&lt;/p&gt;
&lt;h2 id=&quot;the-necessary-r-packages&quot;&gt;The necessary R packages&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;rmangal&lt;/code&gt; package requires a few others things to work with (but if you are using any of the &lt;a href=&quot;http://ropensci.org/&quot;&gt;rOpenSci&lt;/a&gt; packages, chances are you already have most of them. In any case, the installation will take care of getting any required dependencies, so install &lt;code&gt;devtools&lt;/code&gt; if you don’t have it, and run:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;stringsAsFactors =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;FALSE&lt;/span&gt;)
if (&lt;span class=&quot;kw&quot;&gt;getOption&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;) ==&lt;span class=&quot;st&quot;&gt; &amp;quot;&amp;quot;&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;options&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;unzip =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;unzip&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(devtools)
&lt;span class=&quot;kw&quot;&gt;install_github&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&amp;quot;rmangal&amp;quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&amp;quot;mangal-wg&amp;quot;&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;library&lt;/span&gt;(rmangal)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This will pull the most recent version from the &lt;em&gt;GitHub&lt;/em&gt; repository of the package, so it’s a good idea to run that at the beginning of each session.&lt;/p&gt;
&lt;h2 id=&quot;how-to-report-problems-and-suggest-improvements&quot;&gt;How to report problems and suggest improvements&lt;/h2&gt;
&lt;p&gt;The best place to report problems is the &lt;a href=&quot;https://github.com/mangal-wg/rmangal/issues&quot;&gt;Issues page&lt;/a&gt; of the &lt;code&gt;rmangal&lt;/code&gt; repository. Suggestions of improvements are particularly welcome. The code for the API is not open-sourced at the moment, because I have a fair amount of work to do to make it easy to install.&lt;/p&gt;
&lt;h2 id=&quot;how-to-get-more-informations&quot;&gt;How to get more informations?&lt;/h2&gt;
&lt;p&gt;In the &lt;a href=&quot;https://github.com/mangal-wg/rmangal/tree/master/vignettes&quot;&gt;repository of the package&lt;/a&gt;, there is a series of (in progress) vignettes. They give a little bit more background on what is going on.&lt;/p&gt;
&lt;h1 id=&quot;getting-data-from-r&quot;&gt;Getting data from R&lt;/h1&gt;
&lt;p&gt;OK, let’s get started!&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;first&lt;/em&gt; thing you have to do is create a &lt;code&gt;R&lt;/code&gt; object with the URL of the API you want to connect to. By default, this is &lt;code&gt;http://mangal.uqar.ca/api/v1/&lt;/code&gt;. Note that there are arguments for username and password, but we’ll get to those in the second post.&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;api &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;mangalapi&lt;/span&gt;()
&lt;span class=&quot;kw&quot;&gt;names&lt;/span&gt;(api)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;base&amp;quot;        &amp;quot;trail&amp;quot;       &amp;quot;dataset&amp;quot;     &amp;quot;environment&amp;quot; &amp;quot;interaction&amp;quot;
##  [6] &amp;quot;item&amp;quot;        &amp;quot;network&amp;quot;     &amp;quot;population&amp;quot;  &amp;quot;reference&amp;quot;   &amp;quot;taxa&amp;quot;       
## [11] &amp;quot;trait&amp;quot;       &amp;quot;user&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;names&lt;/code&gt; options is a list of all of the properties of the API. Aside from &lt;code&gt;base&lt;/code&gt; and &lt;code&gt;trail&lt;/code&gt; (and if you are logged-in, &lt;code&gt;me&lt;/code&gt; and &lt;code&gt;auth&lt;/code&gt;), they all resources you can interact with. For example&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;api$taxa&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $url
## [1] &amp;quot;http://mangal.uqar.ca/api/v1/taxa/&amp;quot;
## 
## $verbs
## [1] &amp;quot;get&amp;quot;   &amp;quot;post&amp;quot;  &amp;quot;patch&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This gives you two informations. First, the URL to do anything related with taxa (&lt;code&gt;api$taxa$url&lt;/code&gt;), and the versb you can use. Verbs are a way to represent actions when talking to a server. I’m not going to go into much details at this point, but here is the gist: &lt;code&gt;get&lt;/code&gt; will retrieve information, &lt;code&gt;post&lt;/code&gt; will add it, and &lt;code&gt;patch&lt;/code&gt; will modify it. Butyou don’t have to know any of that to use the package.&lt;/p&gt;
&lt;p&gt;The functions to interact with the data in &lt;code&gt;rmangal&lt;/code&gt; are all following a naming convention: first the action, then the type of object. The actions are &lt;code&gt;list&lt;/code&gt; and &lt;code&gt;get&lt;/code&gt; (and &lt;code&gt;add&lt;/code&gt; and &lt;code&gt;patch&lt;/code&gt;, which we’ll see in the next post), and the type of objects are what was returned by &lt;code&gt;names(api)&lt;/code&gt;, with the first letter capitalized.&lt;/p&gt;
&lt;h2 id=&quot;first-step---a-list-of-all-taxa&quot;&gt;First step - a list of all taxa&lt;/h2&gt;
&lt;p&gt;So, if you want to have a list of all the taxa in the database, it’s as simple as doing the following (a bit of &lt;code&gt;plyr&lt;/code&gt; magic to have a nice &lt;code&gt;data.frame&lt;/code&gt;):&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;all_taxa &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;listTaxa&lt;/span&gt;(api)
&lt;span class=&quot;kw&quot;&gt;head&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;data.frame&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;laply&lt;/span&gt;(all_taxa, function(x) x)), &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   bold description gbif id itis                    name ncbi   owner
## 1 NULL        NULL NULL  9 NULL Lamellodiscus ignoratus NULL tpoisot
## 2 NULL        NULL NULL 10 NULL   Lamellodiscus elegans NULL tpoisot
## 3 NULL        NULL NULL 11 NULL   Lamellodiscus ergensi NULL tpoisot
##                vernacular
## 1 Lamellodiscus ignoratus
## 2   Lamellodiscus elegans
## 3   Lamellodiscus ergensi&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And let’s look at the first element of &lt;code&gt;all_taxa&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;all_taxa[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $bold
## NULL
## 
## $description
## NULL
## 
## $gbif
## NULL
## 
## $id
## [1] &amp;quot;9&amp;quot;
## 
## $itis
## NULL
## 
## $name
## [1] &amp;quot;Lamellodiscus ignoratus&amp;quot;
## 
## $ncbi
## NULL
## 
## $owner
## [1] &amp;quot;tpoisot&amp;quot;
## 
## $vernacular
## [1] &amp;quot;Lamellodiscus ignoratus&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So what are all these fields? There is a &lt;code&gt;whatIs&lt;/code&gt; function in &lt;code&gt;rmangal&lt;/code&gt;, whose purpose is to tell you everything you need to know about a type of object. Let’s do that with &lt;code&gt;taxa&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;whatIs&lt;/span&gt;(api, &lt;span class=&quot;st&quot;&gt;&amp;quot;taxa&amp;quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##         field                                        help    type  null
## 1        bold             The BOLD identifier of the taxa integer  TRUE
## 2 description             A short description of the taxa  string  TRUE
## 3        gbif             The GBIF identifier of the taxa integer  TRUE
## 5        itis             The ITIS identifier of the taxa integer  TRUE
## 6        name             The scientific name of the taxa  string FALSE
## 7        ncbi    The NCBI Taxonomy identifier of the taxa integer  TRUE
## 9  vernacular The vernacular name of the taxa, in English  string FALSE
##   unique values
## 1   TRUE       
## 2  FALSE       
## 3   TRUE       
## 5   TRUE       
## 6   TRUE       
## 7   TRUE       
## 9  FALSE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The first column is the name of the field, the second is a description of the data, and the &lt;code&gt;type&lt;/code&gt; column is the format of the field content. The &lt;code&gt;null&lt;/code&gt; column will tell you whether the field can be &lt;code&gt;NULL&lt;/code&gt; or not. The &lt;code&gt;unique&lt;/code&gt; column will tell you whether two different objects can share a value for this field (in the example of &lt;code&gt;taxa&lt;/code&gt;, we see that no two taxa can have the same indetifiers or latin name). Finally, the &lt;code&gt;values&lt;/code&gt; column is set &lt;em&gt;only&lt;/em&gt; when a field accepts a particular set of values.&lt;/p&gt;
&lt;p&gt;Another way to get the first &lt;code&gt;taxa&lt;/code&gt; if we know its &lt;code&gt;id&lt;/code&gt; is&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;getTaxa&lt;/span&gt;(api, all_taxa[[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]]$id)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $bold
## NULL
## 
## $description
## NULL
## 
## $gbif
## NULL
## 
## $id
## [1] &amp;quot;9&amp;quot;
## 
## $itis
## NULL
## 
## $name
## [1] &amp;quot;Lamellodiscus ignoratus&amp;quot;
## 
## $ncbi
## NULL
## 
## $owner
## [1] &amp;quot;tpoisot&amp;quot;
## 
## $vernacular
## [1] &amp;quot;Lamellodiscus ignoratus&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;getting-real-data&quot;&gt;Getting real data&lt;/h2&gt;
&lt;p&gt;The most frequent use will be to look at &lt;code&gt;dataset&lt;/code&gt;s, and get the data within. After looking at the data specification, you’ll reach the conclusion that a &lt;code&gt;dataset&lt;/code&gt; is mostly a list of &lt;code&gt;network&lt;/code&gt;s, which are themselves lists of &lt;code&gt;interactions&lt;/code&gt;, which point to &lt;code&gt;taxa&lt;/code&gt; objects (among other things - it’s explained in the vignettes).&lt;/p&gt;
&lt;p&gt;First thing first, let’s have a look at the datasets:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;(all_ds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;ldply&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;listDataset&lt;/span&gt;(api), function(x) &lt;span class=&quot;kw&quot;&gt;unlist&lt;/span&gt;(x)))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   description id                                              name
## 1              1 Host-parasite interactions in marine environments
##   networks    owner
## 1        2 poisti01&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that you can also &lt;a href=&quot;http://mangal.uqar.ca/data/&quot;&gt;browse the data&lt;/a&gt; from the website, where there are animated maps, and cool dynamical representations of the networks. But meanwhile, let’s get the first dataset:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;(ds &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;getDataset&lt;/span&gt;(api, all_ds$id[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;]))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $data
## list()
## 
## $description
## [1] &amp;quot;&amp;quot;
## 
## $id
## [1] &amp;quot;1&amp;quot;
## 
## $name
## [1] &amp;quot;Host-parasite interactions in marine environments&amp;quot;
## 
## $networks
## [1] &amp;quot;2&amp;quot;
## 
## $owner
## [1] &amp;quot;poisti01&amp;quot;
## 
## $papers
## list()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This dataset has a single network (of &lt;code&gt;id&lt;/code&gt; 2), which looks like:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;getNetwork&lt;/span&gt;(api, ds$networks[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $date
## [1] &amp;quot;2007/04/05&amp;quot;
## 
## $description
## [1] &amp;quot;&amp;quot;
## 
## $environment
## list()
## 
## $id
## [1] &amp;quot;2&amp;quot;
## 
## $interactions
##  [1] &amp;quot;3&amp;quot;  &amp;quot;4&amp;quot;  &amp;quot;5&amp;quot;  &amp;quot;6&amp;quot;  &amp;quot;7&amp;quot;  &amp;quot;8&amp;quot;  &amp;quot;9&amp;quot;  &amp;quot;10&amp;quot; &amp;quot;11&amp;quot; &amp;quot;12&amp;quot; &amp;quot;13&amp;quot; &amp;quot;14&amp;quot; &amp;quot;15&amp;quot; &amp;quot;16&amp;quot;
## [15] &amp;quot;17&amp;quot;
## 
## $latitude
## [1] &amp;quot;42.482&amp;quot;
## 
## $longitude
## [1] &amp;quot;3.137&amp;quot;
## 
## $metaweb
## [1] TRUE
## 
## $name
## [1] &amp;quot;Lamellodiscus of sparids in the Banyuls Bay Area&amp;quot;
## 
## $owner
## [1] &amp;quot;poisti01&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So the process of getting an entire network is calling &lt;code&gt;getInteraction&lt;/code&gt; on each interaction, see which &lt;code&gt;taxa&lt;/code&gt; it involves, then call &lt;code&gt;getTaxa&lt;/code&gt; on each of those, and so forth. But as this is extremely boring, there is a &lt;code&gt;network_as_graph&lt;/code&gt; function, which is doing exactly that:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;g &amp;lt;-&lt;span class=&quot;st&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;network_as_graph&lt;/span&gt;(api, ds$networks[&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Because this function will have to go through (possibly) a lot of resources to find the whole network, and because getting each resource requires an interaction with the server, it can be long. The good strategy is, rather obviously, to decide which objects to store, and interact with them locally, rather than querying the database everytime you want to see what’s in a network. The &lt;code&gt;g&lt;/code&gt; object created this way is an &lt;code&gt;igraph&lt;/code&gt; graph, meaning that we can plot it:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;plot&lt;/span&gt;(g, &lt;span class=&quot;dt&quot;&gt;edge.arrow.size =&lt;/span&gt; &lt;span class=&quot;fl&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.size =&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.color =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.frame.color =&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;NA&lt;/span&gt;, 
    &lt;span class=&quot;dt&quot;&gt;vertex.label.family =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;sans&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;vertex.label.color =&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;black&amp;quot;&lt;/span&gt;, &lt;span class=&quot;dt&quot;&gt;layout =&lt;/span&gt; layout.circle)&lt;/code&gt;&lt;/pre&gt;
&lt;figure&gt;
&lt;img src=&quot;/rfig/rmangal_first_network.png&quot; alt=&quot;plot of chunk rmangal_first_network&quot; /&gt;&lt;figcaption&gt;plot of chunk rmangal_first_network&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Note also that because &lt;code&gt;g&lt;/code&gt; in an &lt;code&gt;igraph&lt;/code&gt; object, both the nodes and interactions have retained their attributes. So if you want to see what type of interactions (&lt;code&gt;whatIs&lt;/code&gt; will tell you that this is the &lt;code&gt;ecotype&lt;/code&gt; field of an &lt;code&gt;interaction&lt;/code&gt;) are in this network, this is as simple as:&lt;/p&gt;
&lt;pre class=&quot;sourceCode r&quot;&gt;&lt;code class=&quot;sourceCode r&quot;&gt;&lt;span class=&quot;kw&quot;&gt;E&lt;/span&gt;(g)$ecotype&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot;
##  [5] &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot;
##  [9] &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot;
## [13] &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot; &amp;quot;ectoparasitism&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is an important idea behind the data specification. The &lt;em&gt;right&lt;/em&gt; way to store data and the &lt;em&gt;right&lt;/em&gt; way to work with these data are most likely different. Although some people will want to manipulate the data directly using the &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;list&lt;/code&gt; functions, it’s always nice to have functions to speed up the process. And if you use &lt;code&gt;network_as_graph&lt;/code&gt;, and want to get a list of the NCBI identifiers of all the species, you don’t need to use &lt;code&gt;getTaxa&lt;/code&gt;; writing &lt;code&gt;V(g)$ncbi&lt;/code&gt; will do the trick.&lt;/p&gt;
&lt;h1 id=&quot;so-now-what&quot;&gt;So now what?&lt;/h1&gt;
&lt;p&gt;This is the end of the first part of this series of posts on &lt;code&gt;mangal&lt;/code&gt;. Later this week, I will publish the next part, about how to &lt;em&gt;upload&lt;/em&gt; your data in the database. This is where I’ll be looking for people to actually test how things work. Meanwhile, if you want to play with the package and report weird things, that’s cool!&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Understanding the variation of species interactions</title>
     <link href="http://timotheepoisot.fr/2014/01/03/variation-species-interactions/"/>
    <updated>2014-01-03T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I spent most of the last two years thinking about &lt;em&gt;why&lt;/em&gt; species interaction vary over time and space. The trouble is that, even though we have some methodological tools, and some interesting observations, we lack a solid framework to make sense of it all. So we (I, &lt;a href=&quot;http://www.stoufferlab.org/people/stouffer/&quot;&gt;Daniel Stouffer&lt;/a&gt; and &lt;a href=&quot;http://chaire-eec.uqar.ca/&quot;&gt;Dominique Gravel&lt;/a&gt;) started thinking about the mechanisms involved in the variation of species interactions. The paper is now available &lt;a href=&quot;http://biorxiv.org/content/early/2014/01/03/001677&quot;&gt;as a preprint&lt;/a&gt; on &lt;em&gt;bioRxiV&lt;/em&gt; (the upload process is really smooth, by the way), and will be submitted shortly.&lt;/p&gt;
&lt;p&gt;Interestingly, understanding why species interactions vary require that we focus on &lt;em&gt;populations&lt;/em&gt;, rather than &lt;em&gt;species&lt;/em&gt;. Most of our argument is that interactions vary because (i) local abundances change, and (ii) there is local variation in traits distributions. &lt;span class=&quot;margin&quot;&gt;Gravel &lt;em&gt;et al.&lt;/em&gt; (2013) Methods Ecol Evol &lt;a href=&quot;http://dx.doi.org/10.1111/2041-210X.12103&quot;&gt;DOI&lt;/a&gt;&lt;/span&gt;And so inferences at the level of the species (such as we made using body size in food webs) will give you an idea of what &lt;em&gt;can&lt;/em&gt; happen (regionally), but the observed interactions (locally) will likely be different. The important point is that, assuming we want to predict ecosystem properties from network structure, it’s not really wise to &lt;em&gt;assume&lt;/em&gt; that interactions happen, because whether they will happen or not depends, again, on local conditions.&lt;/p&gt;
&lt;p&gt;So whereas the “current” view of interaction networks is &lt;em&gt;a matrix of 0s and 1s telling whether two species interact&lt;/em&gt;, it would make sense that we think about these networks in terms of probability that the interaction will happen. The interesting thing is that once everything is put together, we are left with something that is close to a predictive framework:&lt;/p&gt;
&lt;script type=&quot;math/tex; mode=display&quot;&gt;
P(i \rightarrow j) \propto \mathcal{T}(i,j) \times \mathcal{N}(i, j) + \epsilon
&lt;/script&gt;

&lt;p&gt;, or in other words, the probability that &lt;em&gt;i&lt;/em&gt; and &lt;em&gt;j&lt;/em&gt; interact depends on their traits (&lt;em&gt;T&lt;/em&gt;) and local abundances (&lt;em&gt;N&lt;/em&gt;). With a good assumption about the shape of the &lt;em&gt;T&lt;/em&gt; and &lt;em&gt;N&lt;/em&gt; functions, which can be informed by some observations in the field, then it should be possible to extrapolate the probability than any pair of species will interact.&lt;/p&gt;
&lt;p&gt;As we discuss at length in the paper, this has some nice implications for a very active line of research in biogeography, which seeks to integrate species interactions into predictive models of species distribution. So if you want to read more, here is the abstract, and the &lt;a href=&quot;http://biorxiv.org/content/early/2014/01/03/001677&quot;&gt;full text&lt;/a&gt; is available online:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Community ecology is tasked with the considerable challenge of predicting the structure, and properties, of emerging ecosystems. It requires the ability to understand how and why species interact, as this will allow the development of mechanism-based predictive models, and as such to better characterize how ecological mechanisms act locally on the existence of inter-specific interactions. Here we argue that the current conceptualization of species interaction networks is ill-suited for this task. Instead, we propose that future research must start to account for the intrinsic variability of interaction networks. This can be accomplished simply by recognizing that there exists intra-specific variability, in traits or properties related to the establishment of species interactions. By shifting the scale towards population-based processes, we show that this new approach will improve our predictive ability and mechanistic understanding of how species interact over biogeographical scales.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Using git throughout your workflow</title>
     <link href="http://timotheepoisot.fr/2014/01/02/git-workflow/"/>
    <updated>2014-01-02T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;There are good chances that I will give an introductory workshop to the many, many uses of &lt;code&gt;git&lt;/code&gt; for scientists in the next weeks. What follows is a series of notes about the things &lt;em&gt;I&lt;/em&gt; use &lt;code&gt;git&lt;/code&gt; for, which I will cover. In a way, this post is a list of all the possible ways to introduce &lt;code&gt;git&lt;/code&gt; into your workflow as a (computational) scientist. Some things are specific to &lt;code&gt;git&lt;/code&gt; as a protocol, some others to &lt;em&gt;GitHub&lt;/em&gt; as a platform. I will try to make the distinction clear.&lt;/p&gt;
&lt;h1 id=&quot;tracking-your-code&quot;&gt;Tracking your code&lt;/h1&gt;
&lt;p&gt;It would be tempting to discard this one if you are not mainly a computational scientist. Please don’t. Even the simplest piece of code you write, the most basic &lt;code&gt;R&lt;/code&gt; function is a &lt;em&gt;central&lt;/em&gt; step in your workflow if it is responsible for transforming raw data into something you can show around (a figure, or a table). In the most fundamental way, &lt;code&gt;git&lt;/code&gt; is a way for you to track what you changed, and when. And you can &lt;em&gt;revert&lt;/em&gt; back to the previous state of your code if you want.&lt;/p&gt;
&lt;p&gt;The most important feature of &lt;code&gt;git&lt;/code&gt; (in my opinion), and one that is shared with most versioning systems, is the ability to (i) give the reasons of a particular change, and (ii) see exactly what has been changed. See, for example, what happens after &lt;em&gt;adding&lt;/em&gt; a few lines of code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre&gt;&lt;code class=&quot;language-diff&quot; data-lang=&quot;diff&quot;&gt;&lt;span class=&quot;gu&quot;&gt;@@ -50,6 +50,11 @@&lt;/span&gt;
  #&amp;#39; }
  tax_agg &amp;lt;- function(x, rank, db = &amp;#39;ncbi&amp;#39;, ...) 
  {
 +  if(is.matrix(x))
 +  {
 +    if(is.null(colnames(x))) stop(&amp;quot;The community data matrix must have named columns&amp;quot;)
 +    x &amp;lt;- data.frame(x)
 +  }
    # bring to long format
    x$rownames &amp;lt;- rownames(x)
    df_m &amp;lt;- melt(x, id = &amp;#39;rownames&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;If a change in your code breaks it, you can track the lines that where modified, and start looking here for possible bugs.&lt;/p&gt;
&lt;h1 id=&quot;collaborative-manuscript-writing&quot;&gt;Collaborative manuscript writing&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://www.scfbm.org/content/8/1/7&quot;&gt;Karthik Ram&lt;/a&gt; went over this point at large in its paper, so I will keep this point short. If you dread exchanging multiple versions of a paper over email, and fear the day where you will have to handle conflicting edits, or Word and OpenOffice will ruin your formatting, then look into &lt;code&gt;git&lt;/code&gt;. Although it requires that you use &lt;em&gt;different&lt;/em&gt; formats to write (&lt;code&gt;markdown&lt;/code&gt; or &lt;code&gt;LaTeX&lt;/code&gt;), the advantages are numerous (and yes, I count &lt;em&gt;not using Word&lt;/em&gt; as a &lt;em&gt;huge&lt;/em&gt; advantage). You will have the same opportunity to track precisely what is going on with a clear summary of the changes. And because &lt;code&gt;git&lt;/code&gt; handles several people working concurrently just fine, you can have a lot happening:&lt;/p&gt;
&lt;p&gt;[Figure1][fig1] [fig1]: /images/gitnetwork.png “Figure 1”&lt;/p&gt;
&lt;h1 id=&quot;make-replying-to-reviewers-easy&quot;&gt;Make replying to reviewers &lt;em&gt;easy&lt;/em&gt;&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://carlboettiger.info/2013/06/10/mansucript-reviews-on-github.html&quot;&gt;Carl Boettiger&lt;/a&gt; and &lt;a href=&quot;https://github.com/trvrb/flux/issues?page=1&amp;amp;state=closed&quot;&gt;Trevor Bedford&lt;/a&gt; (and I, for some papers) use &lt;em&gt;Issues&lt;/em&gt; as a way to handle reviewers comments. Issues are a paradigm taken straight from software development, where a problem in your code needs to be addressed. We make a point for the relevance of this metaphor in &lt;a href=&quot;https://github.com/PhDP/ms_scriptoria/blob/master/ms.md&quot;&gt;Phil’s &lt;em&gt;in prep&lt;/em&gt; paper&lt;/a&gt; on the &lt;code&gt;scriptoria&lt;/code&gt; project. In short, you can attribute each point raised by a referee to an Issue. You can then assign Issues to people working on the manuscript, and track the progression of the replies. Because most issues tracking systems come with a &lt;em&gt;Milestones&lt;/em&gt; ability, you can assign all issues to the &lt;em&gt;Milestone&lt;/em&gt; “First revision”, and set a deadline at which all the issues have to be fixed.&lt;/p&gt;
&lt;p&gt;As &lt;em&gt;GitHub&lt;/em&gt; allows you to reference &lt;em&gt;commits&lt;/em&gt; (&lt;em&gt;i.e.&lt;/em&gt; changes made to your code/paper), it is really easy to say, in the reply to each point, what you did to address it, and give a link to the &lt;code&gt;diff&lt;/code&gt; (&lt;em&gt;i.e.&lt;/em&gt; the list of all changes). Instead of replying things like “&lt;em&gt;We replaced the sentence P.4 L.24-25 by a short statement (now P.6 L.14-21)&lt;/em&gt;”, you can say “&lt;em&gt;We changed the text in the following way, …, see commit &lt;code&gt;e30b8e&lt;/code&gt;&lt;/em&gt;”. &lt;em&gt;GitHub&lt;/em&gt; will take care of putting a link in place, and the reviewer can then see exactly which changes were made. As a final note on this point: it’s obviously good practice to &lt;em&gt;ask&lt;/em&gt; the editor if s/he agrees with the reviews being put on &lt;em&gt;GitHub&lt;/em&gt;.&lt;/p&gt;
&lt;h1 id=&quot;give-support-to-users&quot;&gt;Give support to users&lt;/h1&gt;
&lt;p&gt;The &lt;em&gt;Issues&lt;/em&gt; system works, obviously, for code. People using your code can suggest improvements, or report bug. It is also possible to contribute new code (through the &lt;em&gt;fork&lt;/em&gt;/&lt;em&gt;pull&lt;/em&gt; mechanism).&lt;/p&gt;
&lt;p&gt;One of the things I enjoy in the &lt;em&gt;Issues&lt;/em&gt; system is that it can (when the people actually use it…) unclutter your mailbox. Instead of sending an email to report a bug, people can submit an issue. You will have a clear list of what to do, and then again, the ability to indicate exactly how you solved it.&lt;/p&gt;
&lt;h1 id=&quot;release-versions-for-publications&quot;&gt;Release versions for publications&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;GitHub&lt;/em&gt; (and probably other platforms) comes with a &lt;em&gt;release&lt;/em&gt; mechanism. You can select one &lt;em&gt;commit&lt;/em&gt; and label it as something special (for example, the version of a code you used to do the analysis presented in a paper). In the context of manuscript writing, I use releases to identify major steps in the life of a paper: first preprint, update to the preprint, revised version, final revision, etc etc. You can see &lt;a href=&quot;https://github.com/tpoisot/ms_connectance_complexity/releases&quot;&gt;an example here&lt;/a&gt;. Reading through a large number of commits can be a bore, but quickly browsing a list of releases can give you a sense of when the important things happened. The release mechanism is also, of course, useful for code.&lt;/p&gt;
&lt;h1 id=&quot;get-confident-in-your-code&quot;&gt;Get confident in your code&lt;/h1&gt;
&lt;p&gt;This is one of the features of &lt;em&gt;GitHub&lt;/em&gt; (and related tools) I hope to use more and more in the future. I started looking into &lt;a href=&quot;https://travis-ci.org/&quot;&gt;TravisCI&lt;/a&gt; a month or so ago, and I love it. In short, TravisCI is a &lt;em&gt;continuous integration&lt;/em&gt; system: each time you commit a change to your code, it will run a pre-specified series of steps to &lt;code&gt;build&lt;/code&gt; it, and tell you (and other people) whether it was a success or not. The list of instructions to build your project can be whatever you want (compiling the &lt;code&gt;LaTeX&lt;/code&gt; document, running the test suite, …). But the central point is that you will know, in real time, if your changes &lt;em&gt;still allow your code to run&lt;/em&gt; or not. Another related service is &lt;a href=&quot;https://coveralls.io/&quot;&gt;coveralls&lt;/a&gt; - it gives you an overview of which proportion of your code is covered by tests. These two services (TravisCI and coveralls) are automated, so you have nothing to do to make sure that you code run, and that it is covered by tests (except that coding well, and writing tests…). Both services will allow you to display little badges on your project page, so your &lt;em&gt;users&lt;/em&gt; can have some confidence in your code.&lt;/p&gt;
&lt;h1 id=&quot;a-terrible-way-to-showcase-your-work&quot;&gt;A terrible way to showcase your work&lt;/h1&gt;
&lt;p&gt;One thing for which social coding platforms are &lt;em&gt;not&lt;/em&gt; so good is showcasing your work. This is why I now have a &lt;a href=&quot;http://timotheepoisot.fr/software/&quot;&gt;software&lt;/a&gt; page on this website. If you use &lt;em&gt;GitHub&lt;/em&gt; to track of lot of things (and I do), what is important can often be buried beneath a pile of your active-but-not-yet-useful projects. And because the listing of your repositories is just the project name and a one-line description, it’s not obvious what is important. So my recommendation if your want to give people a broad overview of what you have been up to, is to have a webpage with your projects, instead of just giving the URL to your &lt;em&gt;GitHub&lt;/em&gt; account.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;And that’s the way I use &lt;code&gt;git&lt;/code&gt; in my everyday workflow. There is a bit of a learning curve, but you can learn (most of) &lt;code&gt;git&lt;/code&gt; &lt;a href=&quot;http://try.github.io/levels/1/challenges/1&quot;&gt;in 15 minutes&lt;/a&gt;. And it saves time in the long run, both because it simplifies some tedious tasks, and because it gives you a single formalism in which you can inscribe your daily activities.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Using Vim as a writing environment</title>
     <link href="http://timotheepoisot.fr/2014/01/01/vim-writing-environment/"/>
    <updated>2014-01-01T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Happy new year, everyone! And to make sure it starts in a good way, let me bring you the gift of productivity! Or specifically, how to set-up &lt;code&gt;Vim&lt;/code&gt; in a way that will transform it into an impressively efficient writing environment. &lt;code&gt;Vim&lt;/code&gt; is a really good code editor, there is no questioning that. But writing code and writing prose are entirely different exercises, and some tools you need to efficiently write code are only getting in the way when you write prose. But &lt;code&gt;Vim&lt;/code&gt; can handle that, and I’m going to share my configuration with you.&lt;/p&gt;
&lt;h2 id=&quot;the-font&quot;&gt;The font&lt;/h2&gt;
&lt;p&gt;I care &lt;em&gt;way too much&lt;/em&gt; about fonts and typography. And as I spend several hours each days looking at a terminal, picking a good font for writing is important. What makes a font good will vary from person to person, but there are a few common elements. I want glyphs that are easy to differentiate (&lt;code&gt;0&lt;/code&gt; &lt;em&gt;vs.&lt;/em&gt; &lt;code&gt;O&lt;/code&gt;, &lt;code&gt;l&lt;/code&gt; &lt;em&gt;vs.&lt;/em&gt; &lt;code&gt;1&lt;/code&gt;, for example), and a font with a good negative space, so that reading long paragraphs of texts is not eye-straining. When spending a few hours working on a paper, it can make all the difference in the world to have a good, easily legible font. I use the &lt;a href=&quot;http://www.google.com/fonts/specimen/Cousine&quot;&gt;Cousine&lt;/a&gt; family, which can be freely downloaded. It works well as all sizes, and has a good inventory of glyphs.&lt;/p&gt;
&lt;h2 id=&quot;the-color-scheme&quot;&gt;The color scheme&lt;/h2&gt;
&lt;p&gt;No surprise, I use &lt;a href=&quot;http://ethanschoonover.com/solarized&quot;&gt;Solarized&lt;/a&gt; (light). It has a good contrast, and because of the beige background, you don’t feel like you are staring at a light bulb. And the &lt;code&gt;solarized-vim&lt;/code&gt; version comes with quite a very exhaustive syntax set, so everything (i) works and (ii) looks great out of the box.&lt;/p&gt;
&lt;h2 id=&quot;the-plugins&quot;&gt;The plugins&lt;/h2&gt;
&lt;p&gt;Although you can get my entire &lt;a href=&quot;https://github.com/tpoisot/dotfiles/blob/master/vimrc&quot;&gt;&lt;code&gt;.vimrc&lt;/code&gt; file&lt;/a&gt; from &lt;em&gt;GitHub&lt;/em&gt;, I will just walk you through the most important plugins. I manage them using &lt;a href=&quot;https://github.com/gmarik/vundle&quot;&gt;vundle&lt;/a&gt;, and the ones I &lt;em&gt;absolutely need&lt;/em&gt; to do some serious writing are:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre&gt;&lt;code class=&quot;language-vim&quot; data-lang=&quot;vim&quot;&gt;Bundle &lt;span class=&quot;s1&quot;&gt;&amp;#39;tpope/vim-markdown&amp;#39;&lt;/span&gt;
Bundle &lt;span class=&quot;s1&quot;&gt;&amp;#39;mikewest/vimroom&amp;#39;&lt;/span&gt;
Bundle &lt;span class=&quot;s1&quot;&gt;&amp;#39;vim-pandoc/vim-pandoc&amp;#39;&lt;/span&gt;
Bundle &lt;span class=&quot;s1&quot;&gt;&amp;#39;altercation/vim-colors-solarized&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;First, &lt;code&gt;vim-markdown&lt;/code&gt; and &lt;code&gt;vim-pandoc&lt;/code&gt; are extremely powerful extensions for (you guessed it), &lt;code&gt;markdown&lt;/code&gt; and &lt;code&gt;pandoc&lt;/code&gt;. As I used these for &lt;em&gt;everything&lt;/em&gt; these days, having good plugins is a requirement. They introduce things like autocompletion of citations from a &lt;code&gt;bibtex&lt;/code&gt; file, and things like &lt;em&gt;replacing LaTeX greek letters by the actual greek letter&lt;/em&gt;, which means that when you are looking at a paragraph, it shows no markup, but the formatting. It’s really, really amazing when you want to &lt;em&gt;read&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The most recent addition to this collection is &lt;code&gt;vimroom&lt;/code&gt;. This plugins attempts to replicate the look and feel of &lt;em&gt;WriteRoom&lt;/em&gt;, one of the many, many “distraction-free” writing softwares. When editing a document, &lt;code&gt;&amp;lt;leader&amp;gt;V&lt;/code&gt; will center the text on the screen, with ample white-space on each sides, and remove every piece of clutter from the “interface”. It means that, if you have a large screen, you don’t need to turn your head all the way to the left to read what you are working on.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;So that’s it! It’s not much work, and it makes for a really pleasant writing experience in &lt;code&gt;Vim&lt;/code&gt;. And it’s effortless to switch from “code” to “prose” mode, making &lt;code&gt;Vim&lt;/code&gt; a very versatile and productive tool.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Software papers and open source licenses</title>
     <link href="http://timotheepoisot.fr/2013/12/19/reviewing-software-papers/"/>
    <updated>2013-12-19T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;I have been reviewing a lot more software / methodological papers these days, which led me to think about open &lt;em&gt;vs.&lt;/em&gt; closed software (even more than usual). By &lt;em&gt;closed&lt;/em&gt;, I mean any software that would require me to pay to be able to reproduce the method, either directly, or through a licence costing money to the university. Think &lt;em&gt;Mathematica&lt;/em&gt;, &lt;em&gt;matlab&lt;/em&gt;, or any other commercial tools. Despite what &lt;a href=&quot;http://www.quantumforest.com/2013/12/should-i-reject-a-manuscript-because-the-analyses-werent-done-using-open-source-software/&quot;&gt;some&lt;/a&gt; would have you believe, the way analyses are done in a “traditional” research paper (&lt;q&gt;Here is my experiment, here are the analyses I have been doing, and here are my conclusions&lt;/q&gt;) is an entirely different piece of work. When I review such papers, I care very little about the software used to obtain the results. And of course, it’s difficult to reproduce a field survey or a large lab experiment, and no amount of free software will change that.&lt;/p&gt;
&lt;p&gt;But software papers, &lt;em&gt;i.e.&lt;/em&gt; either papers presenting a new software, or relying heavily on computer code (&lt;em&gt;i.e.&lt;/em&gt; most simulation studies), are defined largely by their computability. So let’s jump straight to the conclusion: would I reject such a paper because the code relies on closed software? &lt;strong&gt;No&lt;/strong&gt;, for two reasons. The first reason is highly personal: I would not accept to review it in the first place. My condition to review a software paper is to be able to understand and evaluate the code, so if I can’t run the software or understand what it does, I won’t review the paper. The second reason is that, ultimately, the important thing in a software paper is the method described, and so as long as I can reproduce what the authors propose, and it is a useful addition to the methodological toolkit, there is no reason to reject the paper. An additional reason is that I am a co-author on at least two (&lt;em&gt;in prep.&lt;/em&gt;) papers using closed software, and I won’t hold others to a higher standard than the one I hold myself to…&lt;/p&gt;
&lt;p&gt;That being said, there are extremely strong arguments to be made in favor of using Free and Open-Source Software (FOSS) whenever possible. For one thing, and although it’s easy to forget that coming from a &lt;em&gt;rich&lt;/em&gt; university, not everyone can afford to pay a software license. Tools that are relevant for conservation may be unavailalbe to NGOs if they need to pay to use them. Even in the academic world, researchers from developing countries, may have a hard time justifying spending thousands of dollars on software when there are free alternatives available. My (highly personal) point of view is that using FOSS software is part of the collective responsibility to lower the access fee to science.&lt;/p&gt;
&lt;p&gt;Now that we know that &lt;a href=&quot;https://peerj.com/articles/175/&quot;&gt;open data&lt;/a&gt; is associated with an increased citation rate, I wonder whether the same is true of FOSS-using papers. I can think a couple reasons for why it should be the case. Describing a new method is much like explaining a recipe. But I’m much less likely to cook true &lt;em&gt;crêpes&lt;/em&gt; from Britanny, which require a bulky and expensive &lt;em&gt;billlig&lt;/em&gt;, than I am to cook the regular version that I can do at home with my frying pan. Wow, that is a bad metaphor, it almost reads like FOSS is the cheap knock-off version of science. Never mind… In any case, offering users a way to apply an analysis at no cost is a good incentive to using your method. And now that almost anyone knows and uses R (especially students), you can reach ~100% of your field this way.&lt;/p&gt;
&lt;p&gt;But what should we do when no FOSS software can do the particular analysis one wants to do? This is a valid and difficult question. It’s obvious that what matters most is to have the most solid result one can get using the currently available tools. But on the other hand, contributing new software is an activity in itself, that is starting to be recognized as such. Porting a good method into FOSS is probably going to get you some recognition withing your community. &lt;em&gt;ImpactStory&lt;/em&gt; let you track the impact of software releases through &lt;em&gt;e.g.&lt;/em&gt; &lt;em&gt;GitHub&lt;/em&gt;. For example, the &lt;em&gt;ImpactStory&lt;/em&gt; page &lt;a href=&quot;http://impactstory.org/timpoisot/product/puktfnm5rj97v383zwo6smlp&quot;&gt;for the &lt;code&gt;digitize&lt;/code&gt; package&lt;/a&gt; I wrote in one afternoon because I wanted to know whether it (it: extracting data from published scatterplots) could be done, show that people found this package useful. While it’s true that writing useful code is not as appreciated as writing papers that get cited, the development of new metrics will probably make it increasingly rewarding. And the less people have to pay, the more likely they are to use your code.&lt;/p&gt;
&lt;p&gt;At the very least, if your code requires proprietary software to run, pick a &lt;a href=&quot;http://choosealicense.com/&quot;&gt;FOSS license&lt;/a&gt;. There are tools (like &lt;em&gt;Choose a license&lt;/em&gt;, linked just before) that will allow you to select licenses according to your needs. Even if people can’t &lt;em&gt;run&lt;/em&gt; the software, they can see how it works, and translate it in another language it they need it. Starting in January, all &lt;a href=&quot;http://www.britishecologicalsociety.org/publications/&quot;&gt;BES journals&lt;/a&gt; will require that &lt;em&gt;data&lt;/em&gt; are available, free of charge and in a repository, when the paper is accepted - and the goal is clear: allow reprodubilityand re-use. Perhaps the same type of initiatives should be progressively introduced for code. And this is the part where, as referees, we can start making a small difference: by suggesting appropriate FOSS licenses if the authors have not done so. It will help software spread, and the most methods we have at our disposal, the most likely we have to find the right one to solve a problem.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>What's hot on PeerJ?</title>
     <link href="http://timotheepoisot.fr/2013/12/17/what-peerj/"/>
    <updated>2013-12-17T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Lat week, I mentionned that ecology is the leading discipline on &lt;a href=&quot;https://peerj.com/preprints/&quot;&gt;&lt;em&gt;PeerJ&lt;/em&gt; preprints&lt;/a&gt;, as attested by the number of submissions. Which led me to wondering which topics were actually &lt;em&gt;hot&lt;/em&gt; on the preprint server. &lt;em&gt;PeerJ&lt;/em&gt; do not have an API, but there URL scheme is not too complicated, and most of the relevant informations are in the webpage body. So I wrote a very short python script to get the first 158 preprints, download them, and get the abstract.&lt;/p&gt;
&lt;p&gt;The code goes like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;
&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bs4&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;BaseURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;https://peerj.com/preprints/&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;StopAt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;158&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;StartAt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Corpus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Fulltext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preprint_id&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;xrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StartAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StopAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;preprint_page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BaseURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preprint_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preprint_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;preprint_text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preprint_page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;preprint_soup&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preprint_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preprint_soup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;description&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;content&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Fulltext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;abstract&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Corpus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;abstract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fulltext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;There is actually a one-liner version of this code, that exsist solely to show that you can do horrible twisted things with python. I’m not showing it. But the point is: this code will return a list of all abstracts, pasted together in a single sentence. Which I copied, and used in &lt;a href=&quot;http://www.wordle.net&quot;&gt;wordle&lt;/a&gt; to get the following graphic:&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/w-peerj-abs.png&quot; alt=&quot;With abstracts&quot; /&gt;&lt;figcaption&gt;With abstracts&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;So apparently, &lt;code&gt;data&lt;/code&gt; are big, followed by &lt;code&gt;sharks&lt;/code&gt; and &lt;code&gt;whales&lt;/code&gt; (actually whale sharks), but suriprisingly, there are no big ecological keywords that are very prominent - which goes well with the idea that &lt;em&gt;PeerJ&lt;/em&gt; is multi-disciplinary. By changing the &lt;code&gt;BaseURL&lt;/code&gt; variable in my code, it was easy to get the same picture but for the &lt;em&gt;articles&lt;/em&gt;, &lt;em&gt;i.e.&lt;/em&gt; the contributions that went through peer-review. According to the front page, Ecology and Biodiversity are still the leading disciplines there.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/images/w-peerj-pap.png&quot; alt=&quot;With papers&quot; /&gt;&lt;figcaption&gt;With papers&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;It seems to be the case, with &lt;code&gt;species&lt;/code&gt; being the most important word, followed (still) by &lt;code&gt;data&lt;/code&gt;. Interestingly, clinical and molecular keywords are more prominent in the published papers than in the preprints. But in any case, &lt;em&gt;PeerJ&lt;/em&gt; is definitely ecology-friendly, which hopefully will mean that more and more people will submit there.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
  <entry>
     <title>Data-sharing paper online</title>
     <link href="http://timotheepoisot.fr/2013/12/05/data-sharing-paper/"/>
    <updated>2013-12-05T00:00:00+13:00</updated>
    <content type="html">&lt;p&gt;Our &lt;a href=&quot;http://library.queensu.ca/ojs/index.php/IEE/article/view/4632&quot;&gt;paper&lt;/a&gt; &lt;em&gt;Towards a sustainable ecological science&lt;/em&gt; is now online at &lt;em&gt;Ideas in Ecology and Evolution&lt;/em&gt;. Thanks are due to Karthik Ram for the invitation. This is going to be a very exciting special issue. If you want to know more about the paper, the best thing to do is most likely to read it (it’s open access). But in short, we (I, Ross Mounce, and Dominique Gravel), try to make a point of all the benefits of sharing data in ecology. There are some parts about licenses, and some parts about &lt;code&gt;JSON&lt;/code&gt; (because of course there are).&lt;/p&gt;
&lt;p&gt;But besides the content of the paper (that made me think &lt;em&gt;a lot&lt;/em&gt; about data sharing), the way we wrote it was extremely fun. Everything was &lt;a href=&quot;https://github.com/tpoisot/DataSharingPaper/network&quot;&gt;done on &lt;em&gt;GitHub&lt;/em&gt;&lt;/a&gt;, in &lt;em&gt;mardkwon&lt;/em&gt;,and we’ve used Issues and all the tricks in the book to keep track of what needed to be done. It’s also the first paper in which my twitter handle is listed in the contacts, and I’ll probably do that for every paper now.&lt;/p&gt;
&lt;div class=&quot;references&quot;&gt;

&lt;/div&gt;
</content>
  </entry>
  
</feed>
